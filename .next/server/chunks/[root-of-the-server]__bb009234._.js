module.exports=[18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},63021,(e,t,r)=>{t.exports=e.x("@prisma/client-2c3a283f134fdcb6",()=>require("@prisma/client-2c3a283f134fdcb6"))},54799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},9212,55908,e=>{"use strict";var t=e.i(36293),r=e.i(15270);let n=["techlinx_admin","techlinx_webdev","techlinx_marketing","client_admin","client_user"];function a(e){return"string"==typeof e&&n.includes(e)}function s(e){return"techlinx_admin"===e}async function i(){let e=await (0,t.auth)();if(!e?.user?.id)return null;let n=await r.default.user.findUnique({where:{id:e.user.id},select:{id:!0,email:!0,name:!0,role:!0,isActive:!0,createdAt:!0}});return n&&n.isActive?n:(await r.default.session.deleteMany({where:{userId:e.user.id}}),null)}async function o(){let e=await i();return e?s(e.role)?{status:200,user:e}:{status:403,user:e}:{status:401}}e.s(["isRole",()=>a,"isTechlinxAdmin",()=>s],55908),e.s(["getAdminSessionUser",()=>o],9212)},77692,__turbopack_context__=>{"use strict";var __TURBOPACK__imported__module__47909__=__turbopack_context__.i(47909),__TURBOPACK__imported__module__74017__=__turbopack_context__.i(74017),__TURBOPACK__imported__module__96250__=__turbopack_context__.i(96250),__TURBOPACK__imported__module__59756__=__turbopack_context__.i(59756),__TURBOPACK__imported__module__61916__=__turbopack_context__.i(61916),__TURBOPACK__imported__module__74677__=__turbopack_context__.i(74677),__TURBOPACK__imported__module__69741__=__turbopack_context__.i(69741),__TURBOPACK__imported__module__16795__=__turbopack_context__.i(16795),__TURBOPACK__imported__module__87718__=__turbopack_context__.i(87718),__TURBOPACK__imported__module__95169__=__turbopack_context__.i(95169),__TURBOPACK__imported__module__47587__=__turbopack_context__.i(47587),__TURBOPACK__imported__module__66012__=__turbopack_context__.i(66012),__TURBOPACK__imported__module__70101__=__turbopack_context__.i(70101),__TURBOPACK__imported__module__26937__=__turbopack_context__.i(26937),__TURBOPACK__imported__module__10372__=__turbopack_context__.i(10372),__TURBOPACK__imported__module__93695__=__turbopack_context__.i(93695),__TURBOPACK__imported__module__52474__=__turbopack_context__.i(52474),__TURBOPACK__imported__module__220__=__turbopack_context__.i(220),__TURBOPACK__imported__module__63021__=__turbopack_context__.i(63021),__TURBOPACK__imported__module__89171__=__turbopack_context__.i(89171),__TURBOPACK__imported__module__15270__=__turbopack_context__.i(15270),__TURBOPACK__imported__module__9212__=__turbopack_context__.i(9212),__TURBOPACK__imported__module__55908__=__turbopack_context__.i(55908);let runtime="nodejs";function loadArgon2(){return eval("require")("argon2")}async function PATCH(e,{params:t}){let r=await (0,__TURBOPACK__imported__module__9212__.getAdminSessionUser)();if(401===r.status)return __TURBOPACK__imported__module__89171__.NextResponse.json({error:"Unauthorized"},{status:401});if(403===r.status)return __TURBOPACK__imported__module__89171__.NextResponse.json({error:"Forbidden"},{status:403});let{id:n}=await t,a=await e.json(),s={};if("isActive"in a){if("boolean"!=typeof a.isActive)return __TURBOPACK__imported__module__89171__.NextResponse.json({error:"Invalid isActive value"},{status:400});s.isActive=a.isActive}if("role"in a){if(!(0,__TURBOPACK__imported__module__55908__.isRole)(a.role))return __TURBOPACK__imported__module__89171__.NextResponse.json({error:"Invalid role"},{status:400});s.role=a.role}if("name"in a){let e=String(a.name??"").trim();if(!e)return __TURBOPACK__imported__module__89171__.NextResponse.json({error:"Invalid name"},{status:400});s.name=e}if("temporaryPassword"in a){let e=String(a.temporaryPassword??"");if(!e)return __TURBOPACK__imported__module__89171__.NextResponse.json({error:"Invalid password"},{status:400});let t=loadArgon2();s.passwordHash=await t.hash(e,{type:t.argon2id})}if(0===Object.keys(s).length)return __TURBOPACK__imported__module__89171__.NextResponse.json({error:"No updates provided"},{status:400});try{let e=await __TURBOPACK__imported__module__15270__.default.user.update({where:{id:n},data:s,select:{id:!0,email:!0,name:!0,role:!0,isActive:!0,createdAt:!0}});return!1===s.isActive&&await __TURBOPACK__imported__module__15270__.default.session.deleteMany({where:{userId:n}}),__TURBOPACK__imported__module__89171__.NextResponse.json({user:e})}catch(e){if(e instanceof __TURBOPACK__imported__module__63021__.Prisma.PrismaClientKnownRequestError&&"P2025"===e.code)return __TURBOPACK__imported__module__89171__.NextResponse.json({error:"User not found"},{status:404});throw e}}__turbopack_context__.s(["PATCH",()=>PATCH,"runtime",0,runtime],43804);var __TURBOPACK__imported__module__43804__=__turbopack_context__.i(43804);let nextConfigOutput="",routeModule=new __TURBOPACK__imported__module__47909__.AppRouteRouteModule({definition:{kind:__TURBOPACK__imported__module__74017__.RouteKind.APP_ROUTE,page:"/api/admin/users/[id]/route",pathname:"/api/admin/users/[id]",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/admin/users/[id]/route.ts",nextConfigOutput,userland:__TURBOPACK__imported__module__43804__}),{workAsyncStorage,workUnitAsyncStorage,serverHooks}=routeModule;function patchFetch(){return(0,__TURBOPACK__imported__module__96250__.patchFetch)({workAsyncStorage,workUnitAsyncStorage})}async function handler(e,t,r){routeModule.isDev&&(0,__TURBOPACK__imported__module__59756__.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let n="/api/admin/users/[id]/route";n=n.replace(/\/index$/,"")||"/";let a=!1,s=await routeModule.prepare(e,t,{srcPage:n,multiZoneDraftMode:a});if(!s)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:i,params:o,nextConfig:l,parsedUrl:d,isDraftMode:u,prerenderManifest:p,routerServerContext:c,isOnDemandRevalidate:x,revalidateOnlyGenerated:h,resolvedPathname:f,clientReferenceManifest:v,serverActionsManifest:R}=s,m=(0,__TURBOPACK__imported__module__69741__.normalizeAppPath)(n),w=!!(p.dynamicRoutes[m]||p.routes[f]),g=async()=>((null==c?void 0:c.render404)?await c.render404(e,t,d,!1):t.end("This page could not be found"),null);if(w&&!u){let e=!!p.routes[f],t=p.dynamicRoutes[m];if(t&&!1===t.fallback&&!e){if(l.experimental.adapterPath)return await g();throw new __TURBOPACK__imported__module__93695__.NoFallbackError}}let y=null;!w||routeModule.isDev||u||(y="/index"===(y=f)?"/":y);let A=!0===routeModule.isDev||!w,E=w&&!A;R&&v&&(0,__TURBOPACK__imported__module__74677__.setManifestsSingleton)({page:n,clientReferenceManifest:v,serverActionsManifest:R});let C=e.method||"GET",b=(0,__TURBOPACK__imported__module__61916__.getTracer)(),N=b.getActiveScopeSpan(),j={params:o,prerenderManifest:p,renderOpts:{experimental:{authInterrupts:!!l.experimental.authInterrupts},cacheComponents:!!l.cacheComponents,supportsDynamicResponse:A,incrementalCache:(0,__TURBOPACK__imported__module__59756__.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:l.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n,a)=>routeModule.onRequestError(e,t,n,a,c)},sharedContext:{buildId:i}},P=new __TURBOPACK__imported__module__16795__.NodeNextRequest(e),q=new __TURBOPACK__imported__module__16795__.NodeNextResponse(t),T=__TURBOPACK__imported__module__87718__.NextRequestAdapter.fromNodeNextRequest(P,(0,__TURBOPACK__imported__module__87718__.signalFromNodeResponse)(t));try{let a=async e=>routeModule.handle(T,j).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=b.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==__TURBOPACK__imported__module__95169__.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=r.get("next.route");if(a){let t=`${C} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${C} ${n}`)}),s=!!(0,__TURBOPACK__imported__module__59756__.getRequestMeta)(e,"minimalMode"),i=async i=>{var o,d;let f=async({previousCacheEntry:o})=>{try{if(!s&&x&&h&&!o)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await a(i);e.fetchMetrics=j.renderOpts.fetchMetrics;let l=j.renderOpts.pendingWaitUntil;l&&r.waitUntil&&(r.waitUntil(l),l=void 0);let d=j.renderOpts.collectedTags;if(!w)return await (0,__TURBOPACK__imported__module__66012__.sendResponse)(P,q,n,j.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,__TURBOPACK__imported__module__70101__.toNodeOutgoingHttpHeaders)(n.headers);d&&(t[__TURBOPACK__imported__module__10372__.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==j.renderOpts.collectedRevalidate&&!(j.renderOpts.collectedRevalidate>=__TURBOPACK__imported__module__10372__.INFINITE_CACHE)&&j.renderOpts.collectedRevalidate,a=void 0===j.renderOpts.collectedExpire||j.renderOpts.collectedExpire>=__TURBOPACK__imported__module__10372__.INFINITE_CACHE?void 0:j.renderOpts.collectedExpire;return{value:{kind:__TURBOPACK__imported__module__220__.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){if(null==o?void 0:o.isStale){let r=!1;await routeModule.onRequestError(e,t,{routerKind:"App Router",routePath:n,routeType:"route",revalidateReason:(0,__TURBOPACK__imported__module__47587__.getRevalidateReason)({isStaticGeneration:E,isOnDemandRevalidate:x})},r,c)}throw t}},v=await routeModule.handleResponse({req:e,nextConfig:l,cacheKey:y,routeKind:__TURBOPACK__imported__module__74017__.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:p,isRoutePPREnabled:!1,isOnDemandRevalidate:x,revalidateOnlyGenerated:h,responseGenerator:f,waitUntil:r.waitUntil,isMinimalMode:s});if(!w)return null;if((null==v||null==(o=v.value)?void 0:o.kind)!==__TURBOPACK__imported__module__220__.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==v||null==(d=v.value)?void 0:d.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",x?"REVALIDATED":v.isMiss?"MISS":v.isStale?"STALE":"HIT"),u&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let R=(0,__TURBOPACK__imported__module__70101__.fromNodeOutgoingHttpHeaders)(v.value.headers);return s&&w||R.delete(__TURBOPACK__imported__module__10372__.NEXT_CACHE_TAGS_HEADER),!v.cacheControl||t.getHeader("Cache-Control")||R.get("Cache-Control")||R.set("Cache-Control",(0,__TURBOPACK__imported__module__26937__.getCacheControlHeader)(v.cacheControl)),await (0,__TURBOPACK__imported__module__66012__.sendResponse)(P,q,new Response(v.value.body,{headers:R,status:v.value.status||200})),null};N?await i(N):await b.withPropagatedContext(e.headers,()=>b.trace(__TURBOPACK__imported__module__95169__.BaseServerSpan.handleRequest,{spanName:`${C} ${n}`,kind:__TURBOPACK__imported__module__61916__.SpanKind.SERVER,attributes:{"http.method":C,"http.target":e.url}},i))}catch(t){if(!(t instanceof __TURBOPACK__imported__module__93695__.NoFallbackError)){let r=!1;await routeModule.onRequestError(e,t,{routerKind:"App Router",routePath:m,routeType:"route",revalidateReason:(0,__TURBOPACK__imported__module__47587__.getRevalidateReason)({isStaticGeneration:E,isOnDemandRevalidate:x})},r,c)}if(w)throw t;return await (0,__TURBOPACK__imported__module__66012__.sendResponse)(P,q,new Response(null,{status:500})),null}}__turbopack_context__.s(["handler",()=>handler,"patchFetch",()=>patchFetch,"routeModule",()=>routeModule,"serverHooks",()=>serverHooks,"workAsyncStorage",()=>workAsyncStorage,"workUnitAsyncStorage",()=>workUnitAsyncStorage],77692)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__bb009234._.js.map