module.exports=[18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},63021,(e,t,r)=>{t.exports=e.x("@prisma/client-2c3a283f134fdcb6",()=>require("@prisma/client-2c3a283f134fdcb6"))},54799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},9212,55908,e=>{"use strict";var t=e.i(36293),r=e.i(15270);let a=["techlinx_admin","techlinx_webdev","techlinx_marketing","client_admin","client_user"];function n(e){return"string"==typeof e&&a.includes(e)}function s(e){return"techlinx_admin"===e}async function i(){let e=await (0,t.auth)();if(!e?.user?.id)return null;let a=await r.default.user.findUnique({where:{id:e.user.id},select:{id:!0,email:!0,name:!0,role:!0,isActive:!0,createdAt:!0}});return a&&a.isActive?a:(await r.default.session.deleteMany({where:{userId:e.user.id}}),null)}async function o(){let e=await i();return e?s(e.role)?{status:200,user:e}:{status:403,user:e}:{status:401}}e.s(["isRole",()=>n,"isTechlinxAdmin",()=>s],55908),e.s(["getAdminSessionUser",()=>o],9212)},6046,__turbopack_context__=>{"use strict";var __TURBOPACK__imported__module__47909__=__turbopack_context__.i(47909),__TURBOPACK__imported__module__74017__=__turbopack_context__.i(74017),__TURBOPACK__imported__module__96250__=__turbopack_context__.i(96250),__TURBOPACK__imported__module__59756__=__turbopack_context__.i(59756),__TURBOPACK__imported__module__61916__=__turbopack_context__.i(61916),__TURBOPACK__imported__module__74677__=__turbopack_context__.i(74677),__TURBOPACK__imported__module__69741__=__turbopack_context__.i(69741),__TURBOPACK__imported__module__16795__=__turbopack_context__.i(16795),__TURBOPACK__imported__module__87718__=__turbopack_context__.i(87718),__TURBOPACK__imported__module__95169__=__turbopack_context__.i(95169),__TURBOPACK__imported__module__47587__=__turbopack_context__.i(47587),__TURBOPACK__imported__module__66012__=__turbopack_context__.i(66012),__TURBOPACK__imported__module__70101__=__turbopack_context__.i(70101),__TURBOPACK__imported__module__26937__=__turbopack_context__.i(26937),__TURBOPACK__imported__module__10372__=__turbopack_context__.i(10372),__TURBOPACK__imported__module__93695__=__turbopack_context__.i(93695),__TURBOPACK__imported__module__52474__=__turbopack_context__.i(52474),__TURBOPACK__imported__module__220__=__turbopack_context__.i(220),__TURBOPACK__imported__module__89171__=__turbopack_context__.i(89171),__TURBOPACK__imported__module__15270__=__turbopack_context__.i(15270),__TURBOPACK__imported__module__9212__=__turbopack_context__.i(9212),__TURBOPACK__imported__module__55908__=__turbopack_context__.i(55908);let runtime="nodejs";function loadArgon2(){return eval("require")("argon2")}async function GET(){let e=await (0,__TURBOPACK__imported__module__9212__.getAdminSessionUser)();if(401===e.status)return __TURBOPACK__imported__module__89171__.NextResponse.json({error:"Unauthorized"},{status:401});if(403===e.status)return __TURBOPACK__imported__module__89171__.NextResponse.json({error:"Forbidden"},{status:403});let t=await __TURBOPACK__imported__module__15270__.default.user.findMany({orderBy:{createdAt:"desc"},select:{id:!0,email:!0,name:!0,role:!0,isActive:!0,createdAt:!0}});return __TURBOPACK__imported__module__89171__.NextResponse.json({users:t})}async function POST(e){let t=await (0,__TURBOPACK__imported__module__9212__.getAdminSessionUser)();if(401===t.status)return __TURBOPACK__imported__module__89171__.NextResponse.json({error:"Unauthorized"},{status:401});if(403===t.status)return __TURBOPACK__imported__module__89171__.NextResponse.json({error:"Forbidden"},{status:403});let r=await e.json(),a=String(r.email??"").trim().toLowerCase(),n=String(r.name??"").trim(),s=r.role??"client_user",i=String(r.temporaryPassword??"");if(!a||!n||!i||!(0,__TURBOPACK__imported__module__55908__.isRole)(s))return __TURBOPACK__imported__module__89171__.NextResponse.json({error:"Invalid payload"},{status:400});if(await __TURBOPACK__imported__module__15270__.default.user.findUnique({where:{email:a}}))return __TURBOPACK__imported__module__89171__.NextResponse.json({error:"User already exists"},{status:409});let o=loadArgon2(),l=await o.hash(i,{type:o.argon2id}),d=await __TURBOPACK__imported__module__15270__.default.user.create({data:{email:a,name:n,role:s,isActive:!0,passwordHash:l},select:{id:!0,email:!0,name:!0,role:!0,isActive:!0,createdAt:!0}});return __TURBOPACK__imported__module__89171__.NextResponse.json({user:d},{status:201})}__turbopack_context__.s(["GET",()=>GET,"POST",()=>POST,"runtime",0,runtime],61362);var __TURBOPACK__imported__module__61362__=__turbopack_context__.i(61362);let nextConfigOutput="",routeModule=new __TURBOPACK__imported__module__47909__.AppRouteRouteModule({definition:{kind:__TURBOPACK__imported__module__74017__.RouteKind.APP_ROUTE,page:"/api/admin/users/route",pathname:"/api/admin/users",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/admin/users/route.ts",nextConfigOutput,userland:__TURBOPACK__imported__module__61362__}),{workAsyncStorage,workUnitAsyncStorage,serverHooks}=routeModule;function patchFetch(){return(0,__TURBOPACK__imported__module__96250__.patchFetch)({workAsyncStorage,workUnitAsyncStorage})}async function handler(e,t,r){routeModule.isDev&&(0,__TURBOPACK__imported__module__59756__.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let a="/api/admin/users/route";a=a.replace(/\/index$/,"")||"/";let n=!1,s=await routeModule.prepare(e,t,{srcPage:a,multiZoneDraftMode:n});if(!s)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:i,params:o,nextConfig:l,parsedUrl:d,isDraftMode:u,prerenderManifest:c,routerServerContext:p,isOnDemandRevalidate:x,revalidateOnlyGenerated:h,resolvedPathname:f,clientReferenceManifest:m,serverActionsManifest:R}=s,v=(0,__TURBOPACK__imported__module__69741__.normalizeAppPath)(a),w=!!(c.dynamicRoutes[v]||c.routes[f]),g=async()=>((null==p?void 0:p.render404)?await p.render404(e,t,d,!1):t.end("This page could not be found"),null);if(w&&!u){let e=!!c.routes[f],t=c.dynamicRoutes[v];if(t&&!1===t.fallback&&!e){if(l.experimental.adapterPath)return await g();throw new __TURBOPACK__imported__module__93695__.NoFallbackError}}let y=null;!w||routeModule.isDev||u||(y="/index"===(y=f)?"/":y);let A=!0===routeModule.isDev||!w,E=w&&!A;R&&m&&(0,__TURBOPACK__imported__module__74677__.setManifestsSingleton)({page:a,clientReferenceManifest:m,serverActionsManifest:R});let C=e.method||"GET",b=(0,__TURBOPACK__imported__module__61916__.getTracer)(),N=b.getActiveScopeSpan(),j={params:o,prerenderManifest:c,renderOpts:{experimental:{authInterrupts:!!l.experimental.authInterrupts},cacheComponents:!!l.cacheComponents,supportsDynamicResponse:A,incrementalCache:(0,__TURBOPACK__imported__module__59756__.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:l.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a,n)=>routeModule.onRequestError(e,t,a,n,p)},sharedContext:{buildId:i}},T=new __TURBOPACK__imported__module__16795__.NodeNextRequest(e),_=new __TURBOPACK__imported__module__16795__.NodeNextResponse(t),q=__TURBOPACK__imported__module__87718__.NextRequestAdapter.fromNodeNextRequest(T,(0,__TURBOPACK__imported__module__87718__.signalFromNodeResponse)(t));try{let n=async e=>routeModule.handle(q,j).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=b.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==__TURBOPACK__imported__module__95169__.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=r.get("next.route");if(n){let t=`${C} ${n}`;e.setAttributes({"next.route":n,"http.route":n,"next.span_name":t}),e.updateName(t)}else e.updateName(`${C} ${a}`)}),s=!!(0,__TURBOPACK__imported__module__59756__.getRequestMeta)(e,"minimalMode"),i=async i=>{var o,d;let f=async({previousCacheEntry:o})=>{try{if(!s&&x&&h&&!o)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let a=await n(i);e.fetchMetrics=j.renderOpts.fetchMetrics;let l=j.renderOpts.pendingWaitUntil;l&&r.waitUntil&&(r.waitUntil(l),l=void 0);let d=j.renderOpts.collectedTags;if(!w)return await (0,__TURBOPACK__imported__module__66012__.sendResponse)(T,_,a,j.renderOpts.pendingWaitUntil),null;{let e=await a.blob(),t=(0,__TURBOPACK__imported__module__70101__.toNodeOutgoingHttpHeaders)(a.headers);d&&(t[__TURBOPACK__imported__module__10372__.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==j.renderOpts.collectedRevalidate&&!(j.renderOpts.collectedRevalidate>=__TURBOPACK__imported__module__10372__.INFINITE_CACHE)&&j.renderOpts.collectedRevalidate,n=void 0===j.renderOpts.collectedExpire||j.renderOpts.collectedExpire>=__TURBOPACK__imported__module__10372__.INFINITE_CACHE?void 0:j.renderOpts.collectedExpire;return{value:{kind:__TURBOPACK__imported__module__220__.CachedRouteKind.APP_ROUTE,status:a.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:n}}}}catch(t){if(null==o?void 0:o.isStale){let r=!1;await routeModule.onRequestError(e,t,{routerKind:"App Router",routePath:a,routeType:"route",revalidateReason:(0,__TURBOPACK__imported__module__47587__.getRevalidateReason)({isStaticGeneration:E,isOnDemandRevalidate:x})},r,p)}throw t}},m=await routeModule.handleResponse({req:e,nextConfig:l,cacheKey:y,routeKind:__TURBOPACK__imported__module__74017__.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:c,isRoutePPREnabled:!1,isOnDemandRevalidate:x,revalidateOnlyGenerated:h,responseGenerator:f,waitUntil:r.waitUntil,isMinimalMode:s});if(!w)return null;if((null==m||null==(o=m.value)?void 0:o.kind)!==__TURBOPACK__imported__module__220__.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==m||null==(d=m.value)?void 0:d.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",x?"REVALIDATED":m.isMiss?"MISS":m.isStale?"STALE":"HIT"),u&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let R=(0,__TURBOPACK__imported__module__70101__.fromNodeOutgoingHttpHeaders)(m.value.headers);return s&&w||R.delete(__TURBOPACK__imported__module__10372__.NEXT_CACHE_TAGS_HEADER),!m.cacheControl||t.getHeader("Cache-Control")||R.get("Cache-Control")||R.set("Cache-Control",(0,__TURBOPACK__imported__module__26937__.getCacheControlHeader)(m.cacheControl)),await (0,__TURBOPACK__imported__module__66012__.sendResponse)(T,_,new Response(m.value.body,{headers:R,status:m.value.status||200})),null};N?await i(N):await b.withPropagatedContext(e.headers,()=>b.trace(__TURBOPACK__imported__module__95169__.BaseServerSpan.handleRequest,{spanName:`${C} ${a}`,kind:__TURBOPACK__imported__module__61916__.SpanKind.SERVER,attributes:{"http.method":C,"http.target":e.url}},i))}catch(t){if(!(t instanceof __TURBOPACK__imported__module__93695__.NoFallbackError)){let r=!1;await routeModule.onRequestError(e,t,{routerKind:"App Router",routePath:v,routeType:"route",revalidateReason:(0,__TURBOPACK__imported__module__47587__.getRevalidateReason)({isStaticGeneration:E,isOnDemandRevalidate:x})},r,p)}if(w)throw t;return await (0,__TURBOPACK__imported__module__66012__.sendResponse)(T,_,new Response(null,{status:500})),null}}__turbopack_context__.s(["handler",()=>handler,"patchFetch",()=>patchFetch,"routeModule",()=>routeModule,"serverHooks",()=>serverHooks,"workAsyncStorage",()=>workAsyncStorage,"workUnitAsyncStorage",()=>workUnitAsyncStorage],6046)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__2dd19918._.js.map