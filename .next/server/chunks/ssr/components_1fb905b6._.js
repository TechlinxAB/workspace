module.exports=[19314,a=>{"use strict";var b=a.i(87924);function c({children:a,className:c="",frosted:d=!0}){return(0,b.jsx)("section",{className:["rounded-[24px] p-5 shadow-[0_14px_40px_rgba(18,18,18,0.08)] transition-all duration-200 hover:-translate-y-[1px] hover:shadow-[0_18px_55px_rgba(18,18,18,0.12)]",d?"border border-[rgba(255,255,255,0.95)] bg-[linear-gradient(180deg,rgba(255,255,255,0.66)_0%,rgba(255,255,255,0.52)_100%)] backdrop-blur-2xl ring-1 ring-[rgba(18,18,18,0.03)] shadow-[0_14px_40px_rgba(18,18,18,0.08),inset_0_1px_0_rgba(255,255,255,0.98)]":"border border-[rgba(18,18,18,0.04)]",c].join(" "),children:a})}a.s(["Card",()=>c])},52877,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(47085),e=a.i(19314);let f={email:"",name:"",role:"client_user",temporaryPassword:""};function g(){let[a,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(f),[p,q]=(0,c.useState)({}),[r,s]=(0,c.useTransition)();async function t(){k(!0),i(null);try{let a=await fetch("/api/admin/users",{cache:"no-store"});if(!a.ok)throw Error("Failed to load users.");let b=await a.json();g(b.users)}catch(a){i(a instanceof Error?a.message:"Failed to load users.")}finally{k(!1)}}async function u(){let a=await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!a.ok)throw Error((await a.json()).error??"Failed to create user.");await t(),o(f),m(!1)}async function v(a,b){let c=await fetch(`/api/admin/users/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok)throw Error((await c.json()).error??"Failed to update user.");await t()}return(0,c.useEffect)(()=>{t()},[]),(0,b.jsxs)("div",{className:"space-y-5",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-[22px] font-bold text-ink",children:"Users"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-muted",children:"Create users, change roles, and activate or disable workspace access."})]}),(0,b.jsx)("button",{type:"button",onClick:()=>m(!0),className:"focus-ring rounded-full bg-[#1d6b3b] px-4 py-2.5 text-sm font-semibold text-white transition hover:bg-[#185b32]",children:"Create user"})]}),h?(0,b.jsx)("p",{className:"rounded-[24px] border border-[rgba(205,84,71,0.18)] bg-dangerBg px-4 py-3 text-sm text-danger",children:h}):null,(0,b.jsx)(e.Card,{className:"overflow-hidden",children:j?(0,b.jsx)("p",{className:"text-sm text-muted",children:"Loading users..."}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full text-left",children:[(0,b.jsx)("thead",{children:(0,b.jsx)("tr",{className:"border-b border-[rgba(18,18,18,0.08)]",children:["Name","Email","Role","Status","Created","Actions"].map(a=>(0,b.jsx)("th",{className:"px-2 py-2 text-[12px] font-semibold text-muted",children:a},a))})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{className:"border-b border-[rgba(18,18,18,0.06)] align-top",children:[(0,b.jsx)("td",{className:"px-2 py-3 text-sm font-semibold text-ink",children:a.name??"Unnamed user"}),(0,b.jsx)("td",{className:"px-2 py-3 text-sm text-muted",children:a.email}),(0,b.jsx)("td",{className:"px-2 py-3 text-sm text-ink",children:d.roleLabels[a.role]}),(0,b.jsx)("td",{className:"px-2 py-3 text-sm",children:(0,b.jsx)("span",{className:["rounded-full border px-2.5 py-1 text-xs font-semibold",a.isActive?"border-[rgba(52,168,83,0.18)] bg-successBg text-success":"border-[rgba(205,84,71,0.18)] bg-dangerBg text-danger"].join(" "),children:a.isActive?"Active":"Disabled"})}),(0,b.jsx)("td",{className:"px-2 py-3 text-sm text-muted",children:new Date(a.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),(0,b.jsx)("td",{className:"px-2 py-3 text-sm",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)("button",{type:"button",disabled:r,onClick:()=>s(()=>{v(a.id,{isActive:!a.isActive}).catch(a=>{i(a instanceof Error?a.message:"Failed to update user.")})}),className:"focus-ring rounded-full border border-[rgba(18,18,18,0.08)] px-3 py-2 text-xs font-semibold text-ink transition hover:bg-[rgba(241,244,242,0.8)] disabled:opacity-60",children:a.isActive?"Disable":"Enable"}),(0,b.jsx)("select",{value:a.role,onChange:b=>s(()=>{v(a.id,{role:b.target.value}).catch(a=>{i(a instanceof Error?a.message:"Failed to update user.")})}),className:"focus-ring rounded-full border border-[rgba(18,18,18,0.08)] bg-white px-3 py-2 text-xs font-semibold text-ink",children:d.roles.map(a=>(0,b.jsx)("option",{value:a,children:d.roleLabels[a]},a))})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)("input",{type:"password",value:p[a.id]??"",onChange:b=>q(c=>({...c,[a.id]:b.target.value})),className:"focus-ring h-10 min-w-[220px] rounded-full border border-[rgba(18,18,18,0.08)] bg-white px-4 text-xs text-ink",placeholder:"Set temporary password"}),(0,b.jsx)("button",{type:"button",disabled:r||!p[a.id],onClick:()=>s(()=>{v(a.id,{temporaryPassword:p[a.id]}).then(()=>{q(b=>({...b,[a.id]:""}))}).catch(a=>{i(a instanceof Error?a.message:"Failed to reset password.")})}),className:"focus-ring rounded-full border border-[rgba(18,18,18,0.08)] px-3 py-2 text-xs font-semibold text-ink transition hover:bg-[rgba(241,244,242,0.8)] disabled:opacity-60",children:"Reset password"})]})]})})]},a.id))})]})})}),l?(0,b.jsx)("div",{className:"fixed inset-0 z-50 bg-[rgba(18,18,18,0.26)] px-4 py-8 backdrop-blur-sm",children:(0,b.jsx)("div",{className:"mx-auto max-w-xl",children:(0,b.jsxs)(e.Card,{className:"relative",children:[(0,b.jsxs)("div",{className:"mb-5 flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-[20px] font-bold text-ink",children:"Create workspace user"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-muted",children:"Add a workspace user and assign the correct Techlinx or client role."})]}),(0,b.jsx)("button",{type:"button",onClick:()=>m(!1),className:"focus-ring rounded-full border border-[rgba(18,18,18,0.08)] px-3 py-1.5 text-sm font-semibold text-muted",children:"Close"})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("label",{className:"space-y-1 text-sm",children:[(0,b.jsx)("span",{className:"font-semibold text-ink",children:"Name"}),(0,b.jsx)("input",{type:"text",value:n.name,onChange:a=>o(b=>({...b,name:a.target.value})),className:"focus-ring h-11 w-full rounded-2xl border border-[rgba(18,18,18,0.08)] bg-white px-4 text-sm text-ink",placeholder:"User name"})]}),(0,b.jsxs)("label",{className:"space-y-1 text-sm",children:[(0,b.jsx)("span",{className:"font-semibold text-ink",children:"Email"}),(0,b.jsx)("input",{type:"email",value:n.email,onChange:a=>o(b=>({...b,email:a.target.value})),className:"focus-ring h-11 w-full rounded-2xl border border-[rgba(18,18,18,0.08)] bg-white px-4 text-sm text-ink",placeholder:"user@company.com"})]}),(0,b.jsxs)("label",{className:"space-y-1 text-sm",children:[(0,b.jsx)("span",{className:"font-semibold text-ink",children:"Role"}),(0,b.jsx)("select",{value:n.role,onChange:a=>o(b=>({...b,role:a.target.value})),className:"focus-ring h-11 w-full rounded-2xl border border-[rgba(18,18,18,0.08)] bg-white px-4 text-sm text-ink",children:d.roles.map(a=>(0,b.jsx)("option",{value:a,children:d.roleLabels[a]},a))})]}),(0,b.jsxs)("label",{className:"space-y-1 text-sm",children:[(0,b.jsx)("span",{className:"font-semibold text-ink",children:"Temporary password"}),(0,b.jsx)("input",{type:"password",value:n.temporaryPassword,onChange:a=>o(b=>({...b,temporaryPassword:a.target.value})),className:"focus-ring h-11 w-full rounded-2xl border border-[rgba(18,18,18,0.08)] bg-white px-4 text-sm text-ink",placeholder:"Temp password"})]})]}),(0,b.jsxs)("div",{className:"mt-6 flex justify-end gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>m(!1),className:"focus-ring rounded-full border border-[rgba(18,18,18,0.08)] px-4 py-2.5 text-sm font-semibold text-muted",children:"Cancel"}),(0,b.jsx)("button",{type:"button",disabled:r,onClick:()=>s(()=>{u().catch(a=>{i(a instanceof Error?a.message:"Failed to create user.")})}),className:"focus-ring rounded-full bg-[#1d6b3b] px-4 py-2.5 text-sm font-semibold text-white transition hover:bg-[#185b32] disabled:opacity-60",children:"Create user"})]})]})})}):null]})}a.s(["AdminUsersManager",()=>g])}];

//# sourceMappingURL=components_1fb905b6._.js.map