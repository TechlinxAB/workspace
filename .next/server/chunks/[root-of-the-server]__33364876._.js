module.exports=[9254,(e,t,r)=>{"use strict";var n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let c of a(t))o.call(e,c)||c===r||n(e,c,{get:()=>t[c],enumerable:!(s=i(t,c))||s.enumerable});return e},c=e=>s(n({},"__esModule",{value:!0}),e),u={};function l(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"partitioned"in e&&e.partitioned&&"Partitioned","priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean),n=`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}`;return 0===r.length?n:`${n}; ${r.join("; ")}`}function d(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[n,i]=[r.slice(0,e),r.slice(e+1)];try{t.set(n,decodeURIComponent(null!=i?i:"true"))}catch{}}return t}function p(e){if(!e)return;let[[t,r],...n]=d(e),{domain:i,expires:a,httponly:o,maxage:s,path:c,samesite:u,secure:l,partitioned:p,priority:f}=Object.fromEntries(n.map(([e,t])=>[e.toLowerCase().replace(/-/g,""),t]));return h({name:t,value:decodeURIComponent(r),domain:i,...a&&{expires:new Date(a)},...o&&{httpOnly:!0},..."string"==typeof s&&{maxAge:Number(s)},path:c,...u&&{sameSite:m(u)},...l&&{secure:!0},...f&&{priority:y(f)},...p&&{partitioned:!0}})}function h(e){let t={};for(let r in e)e[r]&&(t[r]=e[r]);return t}((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(u,{RequestCookies:()=>w,ResponseCookies:()=>_,parseCookie:()=>d,parseSetCookie:()=>p,stringifyCookie:()=>l}),t.exports=c(u);var f=["strict","lax","none"];function m(e){return e=e.toLowerCase(),f.includes(e)?e:void 0}var g=["low","medium","high"];function y(e){return e=e.toLowerCase(),g.includes(e)?e:void 0}function b(e){if(!e)return[];var t,r,n,i,a,o=[],s=0;function c(){for(;s<e.length&&/\s/.test(e.charAt(s));)s+=1;return s<e.length}function u(){return"="!==(r=e.charAt(s))&&";"!==r&&","!==r}for(;s<e.length;){for(t=s,a=!1;c();)if(","===(r=e.charAt(s))){for(n=s,s+=1,c(),i=s;s<e.length&&u();)s+=1;s<e.length&&"="===e.charAt(s)?(a=!0,s=i,o.push(e.substring(t,n)),t=s):s=n+1}else s+=1;(!a||s>=e.length)&&o.push(e.substring(t,e.length))}return o}var w=class{constructor(e){this._parsed=new Map,this._headers=e;const t=e.get("cookie");if(t)for(const[e,r]of d(t))this._parsed.set(e,{name:e,value:r})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===n).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,n=this._parsed;return n.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(n).map(([e,t])=>l(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>l(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},_=class{constructor(e){var t,r,n;this._parsed=new Map,this._headers=e;const i=null!=(n=null!=(r=null==(t=e.getSetCookie)?void 0:t.call(e))?r:e.get("set-cookie"))?n:[];for(const e of Array.isArray(i)?i:b(i)){const t=p(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===n)}has(e){return this._parsed.has(e)}set(...e){let[t,r,n]=1===e.length?[e[0].name,e[0].value,e[0]]:e,i=this._parsed;return i.set(t,E({name:t,value:r,...n})),v(i,this._headers),this}delete(...e){let[t,r]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0]];return this.set({...r,name:t,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(l).join("; ")}};function v(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=l(r);t.append("set-cookie",e)}}function E(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}},31387,(e,t,r)=>{(()=>{"use strict";var r={491:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;let n=r(223),i=r(172),a=r(930),o="context",s=new n.NoopContextManager;class c{static getInstance(){return this._instance||(this._instance=new c),this._instance}setGlobalContextManager(e){return(0,i.registerGlobal)(o,e,a.DiagAPI.instance())}active(){return this._getContextManager().active()}with(e,t,r,...n){return this._getContextManager().with(e,t,r,...n)}bind(e,t){return this._getContextManager().bind(e,t)}_getContextManager(){return(0,i.getGlobal)(o)||s}disable(){this._getContextManager().disable(),(0,i.unregisterGlobal)(o,a.DiagAPI.instance())}}t.ContextAPI=c},930:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;let n=r(56),i=r(912),a=r(957),o=r(172),s="diag";class c{constructor(){function e(e){return function(...t){let r=(0,o.getGlobal)("diag");if(r)return r[e](...t)}}const t=this,r=(e,r={logLevel:a.DiagLogLevel.INFO})=>{var n,s,c;if(e===t){let e=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!=(n=e.stack)?n:e.message),!1}"number"==typeof r&&(r={logLevel:r});let u=(0,o.getGlobal)("diag"),l=(0,i.createLogLevelDiagLogger)(null!=(s=r.logLevel)?s:a.DiagLogLevel.INFO,e);if(u&&!r.suppressOverrideMessage){let e=null!=(c=Error().stack)?c:"<failed to generate stacktrace>";u.warn(`Current logger will be overwritten from ${e}`),l.warn(`Current logger will overwrite one already registered from ${e}`)}return(0,o.registerGlobal)("diag",l,t,!0)};t.setLogger=r,t.disable=()=>{(0,o.unregisterGlobal)(s,t)},t.createComponentLogger=e=>new n.DiagComponentLogger(e),t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}static instance(){return this._instance||(this._instance=new c),this._instance}}t.DiagAPI=c},653:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsAPI=void 0;let n=r(660),i=r(172),a=r(930),o="metrics";class s{static getInstance(){return this._instance||(this._instance=new s),this._instance}setGlobalMeterProvider(e){return(0,i.registerGlobal)(o,e,a.DiagAPI.instance())}getMeterProvider(){return(0,i.getGlobal)(o)||n.NOOP_METER_PROVIDER}getMeter(e,t,r){return this.getMeterProvider().getMeter(e,t,r)}disable(){(0,i.unregisterGlobal)(o,a.DiagAPI.instance())}}t.MetricsAPI=s},181:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;let n=r(172),i=r(874),a=r(194),o=r(277),s=r(369),c=r(930),u="propagation",l=new i.NoopTextMapPropagator;class d{constructor(){this.createBaggage=s.createBaggage,this.getBaggage=o.getBaggage,this.getActiveBaggage=o.getActiveBaggage,this.setBaggage=o.setBaggage,this.deleteBaggage=o.deleteBaggage}static getInstance(){return this._instance||(this._instance=new d),this._instance}setGlobalPropagator(e){return(0,n.registerGlobal)(u,e,c.DiagAPI.instance())}inject(e,t,r=a.defaultTextMapSetter){return this._getGlobalPropagator().inject(e,t,r)}extract(e,t,r=a.defaultTextMapGetter){return this._getGlobalPropagator().extract(e,t,r)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,n.unregisterGlobal)(u,c.DiagAPI.instance())}_getGlobalPropagator(){return(0,n.getGlobal)(u)||l}}t.PropagationAPI=d},997:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;let n=r(172),i=r(846),a=r(139),o=r(607),s=r(930),c="trace";class u{constructor(){this._proxyTracerProvider=new i.ProxyTracerProvider,this.wrapSpanContext=a.wrapSpanContext,this.isSpanContextValid=a.isSpanContextValid,this.deleteSpan=o.deleteSpan,this.getSpan=o.getSpan,this.getActiveSpan=o.getActiveSpan,this.getSpanContext=o.getSpanContext,this.setSpan=o.setSpan,this.setSpanContext=o.setSpanContext}static getInstance(){return this._instance||(this._instance=new u),this._instance}setGlobalTracerProvider(e){let t=(0,n.registerGlobal)(c,this._proxyTracerProvider,s.DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t}getTracerProvider(){return(0,n.getGlobal)(c)||this._proxyTracerProvider}getTracer(e,t){return this.getTracerProvider().getTracer(e,t)}disable(){(0,n.unregisterGlobal)(c,s.DiagAPI.instance()),this._proxyTracerProvider=new i.ProxyTracerProvider}}t.TraceAPI=u},277:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getActiveBaggage=t.getBaggage=void 0;let n=r(491),i=(0,r(780).createContextKey)("OpenTelemetry Baggage Key");function a(e){return e.getValue(i)||void 0}t.getBaggage=a,t.getActiveBaggage=function(){return a(n.ContextAPI.getInstance().active())},t.setBaggage=function(e,t){return e.setValue(i,t)},t.deleteBaggage=function(e){return e.deleteValue(i)}},993:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;class r{constructor(e){this._entries=e?new Map(e):new Map}getEntry(e){let t=this._entries.get(e);if(t)return Object.assign({},t)}getAllEntries(){return Array.from(this._entries.entries()).map(([e,t])=>[e,t])}setEntry(e,t){let n=new r(this._entries);return n._entries.set(e,t),n}removeEntry(e){let t=new r(this._entries);return t._entries.delete(e),t}removeEntries(...e){let t=new r(this._entries);for(let r of e)t._entries.delete(r);return t}clear(){return new r}}t.BaggageImpl=r},830:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;let n=r(930),i=r(993),a=r(830),o=n.DiagAPI.instance();t.createBaggage=function(e={}){return new i.BaggageImpl(new Map(Object.entries(e)))},t.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(o.error(`Cannot create baggage metadata from unknown type: ${typeof e}`),e=""),{__TYPE__:a.baggageEntryMetadataSymbol,toString:()=>e}}},67:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.context=void 0,t.context=r(491).ContextAPI.getInstance()},223:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;let n=r(780);class i{active(){return n.ROOT_CONTEXT}with(e,t,r,...n){return t.call(r,...n)}bind(e,t){return t}enable(){return this}disable(){return this}}t.NoopContextManager=i},780:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0,t.createContextKey=function(e){return Symbol.for(e)};class r{constructor(e){const t=this;t._currentContext=e?new Map(e):new Map,t.getValue=e=>t._currentContext.get(e),t.setValue=(e,n)=>{let i=new r(t._currentContext);return i._currentContext.set(e,n),i},t.deleteValue=e=>{let n=new r(t._currentContext);return n._currentContext.delete(e),n}}}t.ROOT_CONTEXT=new r},506:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.diag=void 0,t.diag=r(930).DiagAPI.instance()},56:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;let n=r(172);class i{constructor(e){this._namespace=e.namespace||"DiagComponentLogger"}debug(...e){return a("debug",this._namespace,e)}error(...e){return a("error",this._namespace,e)}info(...e){return a("info",this._namespace,e)}warn(...e){return a("warn",this._namespace,e)}verbose(...e){return a("verbose",this._namespace,e)}}function a(e,t,r){let i=(0,n.getGlobal)("diag");if(i)return r.unshift(t),i[e](...r)}t.DiagComponentLogger=i},972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;let r=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class n{constructor(){function e(e){return function(...t){if(console){let r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}for(let t=0;t<r.length;t++)this[r[t].n]=e(r[t].c)}}t.DiagConsoleLogger=n},912:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;let n=r(957);t.createLogLevelDiagLogger=function(e,t){function r(r,n){let i=t[r];return"function"==typeof i&&e>=n?i.bind(t):function(){}}return e<n.DiagLogLevel.NONE?e=n.DiagLogLevel.NONE:e>n.DiagLogLevel.ALL&&(e=n.DiagLogLevel.ALL),t=t||{},{error:r("error",n.DiagLogLevel.ERROR),warn:r("warn",n.DiagLogLevel.WARN),info:r("info",n.DiagLogLevel.INFO),debug:r("debug",n.DiagLogLevel.DEBUG),verbose:r("verbose",n.DiagLogLevel.VERBOSE)}}},957:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0,function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(r=t.DiagLogLevel||(t.DiagLogLevel={}))},172:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;let n=r(200),i=r(521),a=r(130),o=i.VERSION.split(".")[0],s=Symbol.for(`opentelemetry.js.api.${o}`),c=n._globalThis;t.registerGlobal=function(e,t,r,n=!1){var a;let o=c[s]=null!=(a=c[s])?a:{version:i.VERSION};if(!n&&o[e]){let t=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);return r.error(t.stack||t.message),!1}if(o.version!==i.VERSION){let t=Error(`@opentelemetry/api: Registration of version v${o.version} for ${e} does not match previously registered API v${i.VERSION}`);return r.error(t.stack||t.message),!1}return o[e]=t,r.debug(`@opentelemetry/api: Registered a global for ${e} v${i.VERSION}.`),!0},t.getGlobal=function(e){var t,r;let n=null==(t=c[s])?void 0:t.version;if(n&&(0,a.isCompatible)(n))return null==(r=c[s])?void 0:r[e]},t.unregisterGlobal=function(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${i.VERSION}.`);let r=c[s];r&&delete r[e]}},130:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;let n=r(521),i=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function a(e){let t=new Set([e]),r=new Set,n=e.match(i);if(!n)return()=>!1;let a={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=a.prerelease)return function(t){return t===e};function o(e){return r.add(e),!1}function s(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;let n=e.match(i);if(!n)return o(e);let c={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};return null!=c.prerelease||a.major!==c.major?o(e):0===a.major?a.minor===c.minor&&a.patch<=c.patch?s(e):o(e):a.minor<=c.minor?s(e):o(e)}}t._makeCompatibilityCheck=a,t.isCompatible=a(n.VERSION)},886:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.metrics=void 0,t.metrics=r(653).MetricsAPI.getInstance()},901:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ValueType=void 0,function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"}(r=t.ValueType||(t.ValueType={}))},102:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNoopMeter=t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=t.NOOP_OBSERVABLE_GAUGE_METRIC=t.NOOP_OBSERVABLE_COUNTER_METRIC=t.NOOP_UP_DOWN_COUNTER_METRIC=t.NOOP_HISTOGRAM_METRIC=t.NOOP_COUNTER_METRIC=t.NOOP_METER=t.NoopObservableUpDownCounterMetric=t.NoopObservableGaugeMetric=t.NoopObservableCounterMetric=t.NoopObservableMetric=t.NoopHistogramMetric=t.NoopUpDownCounterMetric=t.NoopCounterMetric=t.NoopMetric=t.NoopMeter=void 0;class r{createHistogram(e,r){return t.NOOP_HISTOGRAM_METRIC}createCounter(e,r){return t.NOOP_COUNTER_METRIC}createUpDownCounter(e,r){return t.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,r){return t.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,r){return t.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,r){return t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,t){}removeBatchObservableCallback(e){}}t.NoopMeter=r;class n{}t.NoopMetric=n;class i extends n{add(e,t){}}t.NoopCounterMetric=i;class a extends n{add(e,t){}}t.NoopUpDownCounterMetric=a;class o extends n{record(e,t){}}t.NoopHistogramMetric=o;class s{addCallback(e){}removeCallback(e){}}t.NoopObservableMetric=s;class c extends s{}t.NoopObservableCounterMetric=c;class u extends s{}t.NoopObservableGaugeMetric=u;class l extends s{}function d(){return t.NOOP_METER}t.NoopObservableUpDownCounterMetric=l,t.NOOP_METER=new r,t.NOOP_COUNTER_METRIC=new i,t.NOOP_HISTOGRAM_METRIC=new o,t.NOOP_UP_DOWN_COUNTER_METRIC=new a,t.NOOP_OBSERVABLE_COUNTER_METRIC=new c,t.NOOP_OBSERVABLE_GAUGE_METRIC=new u,t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new l,t.createNoopMeter=d},660:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_METER_PROVIDER=t.NoopMeterProvider=void 0;let n=r(102);class i{getMeter(e,t,r){return n.NOOP_METER}}t.NoopMeterProvider=i,t.NOOP_METER_PROVIDER=new i},200:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(46),t)},651:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r._globalThis=void 0,r._globalThis="object"==typeof globalThis?globalThis:e.g},46:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(651),t)},939:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.propagation=void 0,t.propagation=r(181).PropagationAPI.getInstance()},874:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0;class r{inject(e,t){}extract(e,t){return e}fields(){return[]}}t.NoopTextMapPropagator=r},194:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get(e,t){if(null!=e)return e[t]},keys:e=>null==e?[]:Object.keys(e)},t.defaultTextMapSetter={set(e,t,r){null!=e&&(e[t]=r)}}},845:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.trace=void 0,t.trace=r(997).TraceAPI.getInstance()},403:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;let n=r(476);class i{constructor(e=n.INVALID_SPAN_CONTEXT){this._spanContext=e}spanContext(){return this._spanContext}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return!1}recordException(e,t){}}t.NonRecordingSpan=i},614:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;let n=r(491),i=r(607),a=r(403),o=r(139),s=n.ContextAPI.getInstance();class c{startSpan(e,t,r=s.active()){if(null==t?void 0:t.root)return new a.NonRecordingSpan;let n=r&&(0,i.getSpanContext)(r);return u(n)&&(0,o.isSpanContextValid)(n)?new a.NonRecordingSpan(n):new a.NonRecordingSpan}startActiveSpan(e,t,r,n){let a,o,c;if(arguments.length<2)return;2==arguments.length?c=t:3==arguments.length?(a=t,c=r):(a=t,o=r,c=n);let u=null!=o?o:s.active(),l=this.startSpan(e,a,u),d=(0,i.setSpan)(u,l);return s.with(d,c,void 0,l)}}function u(e){return"object"==typeof e&&"string"==typeof e.spanId&&"string"==typeof e.traceId&&"number"==typeof e.traceFlags}t.NoopTracer=c},124:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;let n=r(614);class i{getTracer(e,t,r){return new n.NoopTracer}}t.NoopTracerProvider=i},125:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;let n=new(r(614)).NoopTracer;class i{constructor(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}startSpan(e,t,r){return this._getTracer().startSpan(e,t,r)}startActiveSpan(e,t,r,n){let i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)}_getTracer(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):n}}t.ProxyTracer=i},846:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;let n=r(125),i=new(r(124)).NoopTracerProvider;class a{getTracer(e,t,r){var i;return null!=(i=this.getDelegateTracer(e,t,r))?i:new n.ProxyTracer(this,e,t,r)}getDelegate(){var e;return null!=(e=this._delegate)?e:i}setDelegate(e){this._delegate=e}getDelegateTracer(e,t,r){var n;return null==(n=this._delegate)?void 0:n.getTracer(e,t,r)}}t.ProxyTracerProvider=a},996:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0,function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(r=t.SamplingDecision||(t.SamplingDecision={}))},607:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getActiveSpan=t.getSpan=void 0;let n=r(780),i=r(403),a=r(491),o=(0,n.createContextKey)("OpenTelemetry Context Key SPAN");function s(e){return e.getValue(o)||void 0}function c(e,t){return e.setValue(o,t)}t.getSpan=s,t.getActiveSpan=function(){return s(a.ContextAPI.getInstance().active())},t.setSpan=c,t.deleteSpan=function(e){return e.deleteValue(o)},t.setSpanContext=function(e,t){return c(e,new i.NonRecordingSpan(t))},t.getSpanContext=function(e){var t;return null==(t=s(e))?void 0:t.spanContext()}},325:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceStateImpl=void 0;let n=r(564),i=32,a=512,o=",",s="=";class c{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+s+this.get(t)),e),[]).join(o)}_parse(e){!(e.length>a)&&(this._internalState=e.split(o).reverse().reduce((e,t)=>{let r=t.trim(),i=r.indexOf(s);if(-1!==i){let a=r.slice(0,i),o=r.slice(i+1,t.length);(0,n.validateKey)(a)&&(0,n.validateValue)(o)&&e.set(a,o)}return e},new Map),this._internalState.size>i&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,i))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new c;return e._internalState=new Map(this._internalState),e}}t.TraceStateImpl=c},564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;let r="[_0-9a-z-*/]",n=`[a-z]${r}{0,255}`,i=`[a-z0-9]${r}{0,240}@[a-z]${r}{0,13}`,a=RegExp(`^(?:${n}|${i})$`),o=/^[ -~]{0,255}[!-~]$/,s=/,|=/;t.validateKey=function(e){return a.test(e)},t.validateValue=function(e){return o.test(e)&&!s.test(e)}},98:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTraceState=void 0;let n=r(325);t.createTraceState=function(e){return new n.TraceStateImpl(e)}},476:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;let n=r(475);t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:n.TraceFlags.NONE}},357:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0,function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(r=t.SpanKind||(t.SpanKind={}))},139:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;let n=r(476),i=r(403),a=/^([0-9a-f]{32})$/i,o=/^[0-9a-f]{16}$/i;function s(e){return a.test(e)&&e!==n.INVALID_TRACEID}function c(e){return o.test(e)&&e!==n.INVALID_SPANID}t.isValidTraceId=s,t.isValidSpanId=c,t.isSpanContextValid=function(e){return s(e.traceId)&&c(e.spanId)},t.wrapSpanContext=function(e){return new i.NonRecordingSpan(e)}},847:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0,function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(r=t.SpanStatusCode||(t.SpanStatusCode={}))},475:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0,function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(r=t.TraceFlags||(t.TraceFlags={}))},521:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.6.0"}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var a=n[e]={exports:{}},o=!0;try{r[e].call(a.exports,a,a.exports,i),o=!1}finally{o&&delete n[e]}return a.exports}i.ab="/ROOT/node_modules/next/dist/compiled/@opentelemetry/api/";var a={};(()=>{var e=a;Object.defineProperty(e,"__esModule",{value:!0}),e.trace=e.propagation=e.metrics=e.diag=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.createTraceState=e.TraceFlags=e.SpanStatusCode=e.SpanKind=e.SamplingDecision=e.ProxyTracerProvider=e.ProxyTracer=e.defaultTextMapSetter=e.defaultTextMapGetter=e.ValueType=e.createNoopMeter=e.DiagLogLevel=e.DiagConsoleLogger=e.ROOT_CONTEXT=e.createContextKey=e.baggageEntryMetadataFromString=void 0;var t=i(369);Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return t.baggageEntryMetadataFromString}});var r=i(780);Object.defineProperty(e,"createContextKey",{enumerable:!0,get:function(){return r.createContextKey}}),Object.defineProperty(e,"ROOT_CONTEXT",{enumerable:!0,get:function(){return r.ROOT_CONTEXT}});var n=i(972);Object.defineProperty(e,"DiagConsoleLogger",{enumerable:!0,get:function(){return n.DiagConsoleLogger}});var o=i(957);Object.defineProperty(e,"DiagLogLevel",{enumerable:!0,get:function(){return o.DiagLogLevel}});var s=i(102);Object.defineProperty(e,"createNoopMeter",{enumerable:!0,get:function(){return s.createNoopMeter}});var c=i(901);Object.defineProperty(e,"ValueType",{enumerable:!0,get:function(){return c.ValueType}});var u=i(194);Object.defineProperty(e,"defaultTextMapGetter",{enumerable:!0,get:function(){return u.defaultTextMapGetter}}),Object.defineProperty(e,"defaultTextMapSetter",{enumerable:!0,get:function(){return u.defaultTextMapSetter}});var l=i(125);Object.defineProperty(e,"ProxyTracer",{enumerable:!0,get:function(){return l.ProxyTracer}});var d=i(846);Object.defineProperty(e,"ProxyTracerProvider",{enumerable:!0,get:function(){return d.ProxyTracerProvider}});var p=i(996);Object.defineProperty(e,"SamplingDecision",{enumerable:!0,get:function(){return p.SamplingDecision}});var h=i(357);Object.defineProperty(e,"SpanKind",{enumerable:!0,get:function(){return h.SpanKind}});var f=i(847);Object.defineProperty(e,"SpanStatusCode",{enumerable:!0,get:function(){return f.SpanStatusCode}});var m=i(475);Object.defineProperty(e,"TraceFlags",{enumerable:!0,get:function(){return m.TraceFlags}});var g=i(98);Object.defineProperty(e,"createTraceState",{enumerable:!0,get:function(){return g.createTraceState}});var y=i(139);Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return y.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return y.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return y.isValidSpanId}});var b=i(476);Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return b.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return b.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return b.INVALID_SPAN_CONTEXT}});let w=i(67);Object.defineProperty(e,"context",{enumerable:!0,get:function(){return w.context}});let _=i(506);Object.defineProperty(e,"diag",{enumerable:!0,get:function(){return _.diag}});let v=i(886);Object.defineProperty(e,"metrics",{enumerable:!0,get:function(){return v.metrics}});let E=i(939);Object.defineProperty(e,"propagation",{enumerable:!0,get:function(){return E.propagation}});let S=i(845);Object.defineProperty(e,"trace",{enumerable:!0,get:function(){return S.trace}}),e.default={context:w.context,diag:_.diag,metrics:v.metrics,propagation:E.propagation,trace:S.trace}})(),t.exports=a})()},62712,(e,t,r)=>{(()=>{"use strict";"u">typeof __nccwpck_require__&&(__nccwpck_require__.ab="/ROOT/node_modules/next/dist/compiled/cookie/");var e={};(()=>{var t=e;t.parse=o,t.serialize=s;var r=decodeURIComponent,n=encodeURIComponent,i=/; */,a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var n={},a=t||{},o=e.split(i),s=a.decode||r,u=0;u<o.length;u++){var l=o[u],d=l.indexOf("=");if(!(d<0)){var p=l.substr(0,d).trim(),h=l.substr(++d,l.length).trim();'"'==h[0]&&(h=h.slice(1,-1)),void 0==n[p]&&(n[p]=c(h,s))}}return n}function s(e,t,r){var i=r||{},o=i.encode||n;if("function"!=typeof o)throw TypeError("option encode is invalid");if(!a.test(e))throw TypeError("argument name is invalid");var s=o(t);if(s&&!a.test(s))throw TypeError("argument val is invalid");var c=e+"="+s;if(null!=i.maxAge){var u=i.maxAge-0;if(isNaN(u)||!isFinite(u))throw TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(u)}if(i.domain){if(!a.test(i.domain))throw TypeError("option domain is invalid");c+="; Domain="+i.domain}if(i.path){if(!a.test(i.path))throw TypeError("option path is invalid");c+="; Path="+i.path}if(i.expires){if("function"!=typeof i.expires.toUTCString)throw TypeError("option expires is invalid");c+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(c+="; HttpOnly"),i.secure&&(c+="; Secure"),i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:case"strict":c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"none":c+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return c}function c(e,t){try{return t(e)}catch(t){return e}}})(),t.exports=e})()},47413,(e,t,r)=>{(()=>{"use strict";var e={993:e=>{var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,n,a,o){if("function"!=typeof n)throw TypeError("The listener must be a function");var s=new i(n,a||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=Array(a);i<a;i++)o[i]=n[i].fn;return o},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,i,a,o){var s=r?r+e:e;if(!this._events[s])return!1;var c,u,l=this._events[s],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,a),!0;case 6:return l.fn.call(l.context,t,n,i,a,o),!0}for(u=1,c=Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var p,h=l.length;for(u=0;u<h;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,i);break;default:if(!c)for(p=1,c=Array(d-1);p<d;p++)c[p-1]=arguments[p];l[u].fn.apply(l[u].context,c)}}return!0},s.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||n&&s.context!==n||o(this,a);else{for(var c=0,u=[],l=s.length;c<l;c++)(s[c].fn!==t||i&&!s[c].once||n&&s[c].context!==n)&&u.push(s[c]);u.length?this._events[a]=1===u.length?u[0]:u:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s},213:e=>{e.exports=(e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e})))},574:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){let n=0,i=e.length;for(;i>0;){let a=i/2|0,o=n+a;0>=r(e[o],t)?(n=++o,i-=a+1):i=a}return n}},821:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(574);class i{constructor(){this._queue=[]}enqueue(e,t){let r={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(r);let i=n.default(this._queue,r,(e,t)=>t.priority-e.priority);this._queue.splice(i,0,r)}dequeue(){let e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(e=>e.run)}get size(){return this._queue.length}}t.default=i},816:(e,t,r)=>{let n=r(213);class i extends Error{constructor(e){super(e),this.name="TimeoutError"}}let a=(e,t,r)=>new Promise((a,o)=>{if("number"!=typeof t||t<0)throw TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void a(e);let s=setTimeout(()=>{if("function"==typeof r){try{a(r())}catch(e){o(e)}return}let n="string"==typeof r?r:`Promise timed out after ${t} milliseconds`,s=r instanceof Error?r:new i(n);"function"==typeof e.cancel&&e.cancel(),o(s)},t);n(e.then(a,o),()=>{clearTimeout(s)})});e.exports=a,e.exports.default=a,e.exports.TimeoutError=i}},r={};function n(t){var i=r[t];if(void 0!==i)return i.exports;var a=r[t]={exports:{}},o=!0;try{e[t](a,a.exports,n),o=!1}finally{o&&delete r[t]}return a.exports}n.ab="/ROOT/node_modules/next/dist/compiled/p-queue/";var i={};(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0});let t=n(993),r=n(816),a=n(821),o=()=>{},s=new r.TimeoutError;class c extends t{constructor(e){var t,r,n,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=o,this._resolveIdle=o,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:a.default},e)).intervalCap&&e.intervalCap>=1))throw TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!=(r=null==(t=e.intervalCap)?void 0:t.toString())?r:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!=(i=null==(n=e.interval)?void 0:n.toString())?i:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=o,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=o,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(void 0===this._intervalId){let t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((n,i)=>{let a=async()=>{this._pendingCount++,this._intervalCount++;try{let a=void 0===this._timeout&&void 0===t.timeout?e():r.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&i(s)});n(await a)}catch(e){i(e)}this._next()};this._queue.enqueue(a,t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this._isPaused&&(this._isPaused=!1,this._processQueue()),this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(e=>{let t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(e=>{let t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}e.default=c})(),t.exports=i})()},51187,(e,t,r)=>{t.exports=e.x("next/dist/server/lib/incremental-cache/tags-manifest.external.js",()=>require("next/dist/server/lib/incremental-cache/tags-manifest.external.js"))},78500,(e,t,r)=>{t.exports=e.x("node:async_hooks",()=>require("node:async_hooks"))},22947,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{getTestReqInfo:function(){return o},withRequest:function(){return a}});let n=new(e.r(78500)).AsyncLocalStorage;function i(e,t){let r=t.header(e,"next-test-proxy-port");if(!r)return;let n=t.url(e);return{url:n,proxyPort:Number(r),testData:t.header(e,"next-test-data")||""}}function a(e,t,r){let a=i(e,t);return a?n.run(a,r):r()}function o(e,t){let r=n.getStore();return r||(e&&t?i(e,t):void 0)}},49883,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{handleFetch:function(){return c},interceptFetch:function(){return u},reader:function(){return i}});let n=e.r(22947),i={url:e=>e.url,header:(e,t)=>e.headers.get(t)};function a(){let e=(Error().stack??"").split("\n");for(let t=1;t<e.length;t++)if(e[t].length>0){e=e.slice(t);break}return(e=(e=(e=e.filter(e=>!e.includes("/next/dist/"))).slice(0,5)).map(e=>e.replace("webpack-internal:///(rsc)/","").trim())).join("    ")}async function o(e,t){let{url:r,method:n,headers:i,body:o,cache:s,credentials:c,integrity:u,mode:l,redirect:d,referrer:p,referrerPolicy:h}=t;return{testData:e,api:"fetch",request:{url:r,method:n,headers:[...Array.from(i),["next-test-stack",a()]],body:o?Buffer.from(await t.arrayBuffer()).toString("base64"):null,cache:s,credentials:c,integrity:u,mode:l,redirect:d,referrer:p,referrerPolicy:h}}}function s(e){let{status:t,headers:r,body:n}=e.response;return new Response(n?Buffer.from(n,"base64"):null,{status:t,headers:new Headers(r)})}async function c(e,t){let r=(0,n.getTestReqInfo)(t,i);if(!r)return e(t);let{testData:a,proxyPort:c}=r,u=await o(a,t),l=await e(`http://localhost:${c}`,{method:"POST",body:JSON.stringify(u),next:{internal:!0}});if(!l.ok)throw Object.defineProperty(Error(`Proxy request failed: ${l.status}`),"__NEXT_ERROR_CODE",{value:"E146",enumerable:!1,configurable:!0});let d=await l.json(),{api:p}=d;switch(p){case"continue":return e(t);case"abort":case"unhandled":throw Object.defineProperty(Error(`Proxy request aborted [${t.method} ${t.url}]`),"__NEXT_ERROR_CODE",{value:"E145",enumerable:!1,configurable:!0});case"fetch":return s(d);default:return p}}function u(t){return e.g.fetch=function(e,r){var n;return(null==r||null==(n=r.next)?void 0:n.internal)?t(e,r):c(t,new Request(e,r))},()=>{e.g.fetch=t}}},76532,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{interceptTestApis:function(){return a},wrapRequestHandler:function(){return o}});let n=e.r(22947),i=e.r(49883);function a(){return(0,i.interceptFetch)(e.g.fetch)}function o(e){return(t,r)=>(0,n.withRequest)(t,i.reader,()=>e(t,r))}},12953,(e,t,r)=>{"use strict";function n(e,t,r){if(e){for(let n of(r&&(r=r.toLowerCase()),e))if(t===n.domain?.split(":",1)[0].toLowerCase()||r===n.defaultLocale.toLowerCase()||n.locales?.some(e=>e.toLowerCase()===r))return n}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"detectDomainLocale",{enumerable:!0,get:function(){return n}})},57520,(e,t,r)=>{"use strict";function n(e){return e.replace(/\/$/,"")||"/"}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"removeTrailingSlash",{enumerable:!0,get:function(){return n}})},52799,(e,t,r)=>{"use strict";function n(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"parsePath",{enumerable:!0,get:function(){return n}})},11959,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addPathPrefix",{enumerable:!0,get:function(){return i}});let n=e.r(52799);function i(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:i,hash:a}=(0,n.parsePath)(e);return`${t}${r}${i}${a}`}},30652,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addPathSuffix",{enumerable:!0,get:function(){return i}});let n=e.r(52799);function i(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:i,hash:a}=(0,n.parsePath)(e);return`${r}${t}${i}${a}`}},86984,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"pathHasPrefix",{enumerable:!0,get:function(){return i}});let n=e.r(52799);function i(e,t){if("string"!=typeof e)return!1;let{pathname:r}=(0,n.parsePath)(e);return r===t||r.startsWith(t+"/")}},99256,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addLocale",{enumerable:!0,get:function(){return a}});let n=e.r(11959),i=e.r(86984);function a(e,t,r,a){if(!t||t===r)return e;let o=e.toLowerCase();return!a&&((0,i.pathHasPrefix)(o,"/api")||(0,i.pathHasPrefix)(o,`/${t.toLowerCase()}`))?e:(0,n.addPathPrefix)(e,`/${t}`)}},16107,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"formatNextPathnameInfo",{enumerable:!0,get:function(){return s}});let n=e.r(57520),i=e.r(11959),a=e.r(30652),o=e.r(99256);function s(e){let t=(0,o.addLocale)(e.pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix);return(e.buildId||!e.trailingSlash)&&(t=(0,n.removeTrailingSlash)(t)),e.buildId&&(t=(0,a.addPathSuffix)((0,i.addPathPrefix)(t,`/_next/data/${e.buildId}`),"/"===e.pathname?"index.json":".json")),t=(0,i.addPathPrefix)(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:(0,a.addPathSuffix)(t,"/"):(0,n.removeTrailingSlash)(t)}},26729,(e,t,r)=>{"use strict";function n(e,t){let r;if(t?.host&&!Array.isArray(t.host))r=t.host.toString().split(":",1)[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getHostname",{enumerable:!0,get:function(){return n}})},96045,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"normalizeLocalePath",{enumerable:!0,get:function(){return i}});let n=new WeakMap;function i(e,t){let r;if(!t)return{pathname:e};let i=n.get(t);i||(i=t.map(e=>e.toLowerCase()),n.set(t,i));let a=e.split("/",2);if(!a[1])return{pathname:e};let o=a[1].toLowerCase(),s=i.indexOf(o);return s<0?{pathname:e}:(r=t[s],{pathname:e=e.slice(r.length+1)||"/",detectedLocale:r})}},92624,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"removePathPrefix",{enumerable:!0,get:function(){return i}});let n=e.r(86984);function i(e,t){if(!(0,n.pathHasPrefix)(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:`/${r}`}},7657,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getNextPathnameInfo",{enumerable:!0,get:function(){return o}});let n=e.r(96045),i=e.r(92624),a=e.r(86984);function o(e,t){let{basePath:r,i18n:o,trailingSlash:s}=t.nextConfig??{},c={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):s};r&&(0,a.pathHasPrefix)(c.pathname,r)&&(c.pathname=(0,i.removePathPrefix)(c.pathname,r),c.basePath=r);let u=c.pathname;if(c.pathname.startsWith("/_next/data/")&&c.pathname.endsWith(".json")){let e=c.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");c.buildId=e[0],u="index"!==e[1]?`/${e.slice(1).join("/")}`:"/",!0===t.parseData&&(c.pathname=u)}if(o){let e=t.i18nProvider?t.i18nProvider.analyze(c.pathname):(0,n.normalizeLocalePath)(c.pathname,o.locales);c.locale=e.detectedLocale,c.pathname=e.pathname??c.pathname,!e.detectedLocale&&c.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(u):(0,n.normalizeLocalePath)(u,o.locales)).detectedLocale&&(c.locale=e.detectedLocale)}return c}},61400,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NextURL",{enumerable:!0,get:function(){return l}});let n=e.r(12953),i=e.r(16107),a=e.r(26729),o=e.r(7657),s=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function c(e,t){return new URL(String(e).replace(s,"localhost"),t&&String(t).replace(s,"localhost"))}let u=Symbol("NextURLInternal");class l{constructor(e,t,r){let n,i;"object"==typeof t&&"pathname"in t||"string"==typeof t?(n=t,i=r||{}):i=r||t||{},this[u]={url:c(e,n??i.base),options:i,basePath:""},this.analyze()}analyze(){var e,t,r,i,s;let c=(0,o.getNextPathnameInfo)(this[u].url.pathname,{nextConfig:this[u].options.nextConfig,parseData:!0,i18nProvider:this[u].options.i18nProvider}),l=(0,a.getHostname)(this[u].url,this[u].options.headers);this[u].domainLocale=this[u].options.i18nProvider?this[u].options.i18nProvider.detectDomainLocale(l):(0,n.detectDomainLocale)(null==(t=this[u].options.nextConfig)||null==(e=t.i18n)?void 0:e.domains,l);let d=(null==(r=this[u].domainLocale)?void 0:r.defaultLocale)||(null==(s=this[u].options.nextConfig)||null==(i=s.i18n)?void 0:i.defaultLocale);this[u].url.pathname=c.pathname,this[u].defaultLocale=d,this[u].basePath=c.basePath??"",this[u].buildId=c.buildId,this[u].locale=c.locale??d,this[u].trailingSlash=c.trailingSlash}formatPathname(){return(0,i.formatNextPathnameInfo)({basePath:this[u].basePath,buildId:this[u].buildId,defaultLocale:this[u].options.forceLocale?void 0:this[u].defaultLocale,locale:this[u].locale,pathname:this[u].url.pathname,trailingSlash:this[u].trailingSlash})}formatSearch(){return this[u].url.search}get buildId(){return this[u].buildId}set buildId(e){this[u].buildId=e}get locale(){return this[u].locale??""}set locale(e){var t,r;if(!this[u].locale||!(null==(r=this[u].options.nextConfig)||null==(t=r.i18n)?void 0:t.locales.includes(e)))throw Object.defineProperty(TypeError(`The NextURL configuration includes no locale "${e}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[u].locale=e}get defaultLocale(){return this[u].defaultLocale}get domainLocale(){return this[u].domainLocale}get searchParams(){return this[u].url.searchParams}get host(){return this[u].url.host}set host(e){this[u].url.host=e}get hostname(){return this[u].url.hostname}set hostname(e){this[u].url.hostname=e}get port(){return this[u].url.port}set port(e){this[u].url.port=e}get protocol(){return this[u].url.protocol}set protocol(e){this[u].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[u].url=c(e),this.analyze()}get origin(){return this[u].url.origin}get pathname(){return this[u].url.pathname}set pathname(e){this[u].url.pathname=e}get hash(){return this[u].url.hash}set hash(e){this[u].url.hash=e}get search(){return this[u].url.search}set search(e){this[u].url.search=e}get password(){return this[u].url.password}set password(e){this[u].url.password=e}get username(){return this[u].url.username}set username(e){this[u].url.username=e}get basePath(){return this[u].basePath}set basePath(e){this[u].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new l(String(this),this[u].options)}}},30009,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{ACTION_SUFFIX:function(){return f},APP_DIR_ALIAS:function(){return U},CACHE_ONE_YEAR:function(){return P},DOT_NEXT_ALIAS:function(){return N},ESLINT_DEFAULT_DIRS:function(){return er},GSP_NO_RETURNED_VALUE:function(){return X},GSSP_COMPONENT_MEMBER_ERROR:function(){return Q},GSSP_NO_RETURNED_VALUE:function(){return Y},HTML_CONTENT_TYPE_HEADER:function(){return i},INFINITE_CACHE:function(){return A},INSTRUMENTATION_HOOK_FILENAME:function(){return I},JSON_CONTENT_TYPE_HEADER:function(){return a},MATCHED_PATH_HEADER:function(){return c},MIDDLEWARE_FILENAME:function(){return k},MIDDLEWARE_LOCATION_REGEXP:function(){return T},NEXT_BODY_SUFFIX:function(){return y},NEXT_CACHE_IMPLICIT_TAG_ID:function(){return x},NEXT_CACHE_REVALIDATED_TAGS_HEADER:function(){return w},NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER:function(){return _},NEXT_CACHE_SOFT_TAG_MAX_LENGTH:function(){return R},NEXT_CACHE_TAGS_HEADER:function(){return b},NEXT_CACHE_TAG_MAX_ITEMS:function(){return E},NEXT_CACHE_TAG_MAX_LENGTH:function(){return S},NEXT_DATA_SUFFIX:function(){return m},NEXT_INTERCEPTION_MARKER_PREFIX:function(){return s},NEXT_META_SUFFIX:function(){return g},NEXT_QUERY_PARAM_PREFIX:function(){return o},NEXT_RESUME_HEADER:function(){return v},NON_STANDARD_NODE_ENV:function(){return ee},PAGES_DIR_ALIAS:function(){return j},PRERENDER_REVALIDATE_HEADER:function(){return u},PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER:function(){return l},PROXY_FILENAME:function(){return O},PROXY_LOCATION_REGEXP:function(){return C},PUBLIC_DIR_MIDDLEWARE_CONFLICT:function(){return q},ROOT_DIR_ALIAS:function(){return D},RSC_ACTION_CLIENT_WRAPPER_ALIAS:function(){return B},RSC_ACTION_ENCRYPTION_ALIAS:function(){return K},RSC_ACTION_PROXY_ALIAS:function(){return $},RSC_ACTION_VALIDATE_ALIAS:function(){return M},RSC_CACHE_WRAPPER_ALIAS:function(){return H},RSC_DYNAMIC_IMPORT_WRAPPER_ALIAS:function(){return W},RSC_MOD_REF_PROXY_ALIAS:function(){return L},RSC_SEGMENTS_DIR_SUFFIX:function(){return d},RSC_SEGMENT_SUFFIX:function(){return p},RSC_SUFFIX:function(){return h},SERVER_PROPS_EXPORT_ERROR:function(){return G},SERVER_PROPS_GET_INIT_PROPS_CONFLICT:function(){return J},SERVER_PROPS_SSG_CONFLICT:function(){return V},SERVER_RUNTIME:function(){return en},SSG_FALLBACK_EXPORT_ERROR:function(){return et},SSG_GET_INITIAL_PROPS_CONFLICT:function(){return z},STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR:function(){return F},TEXT_PLAIN_CONTENT_TYPE_HEADER:function(){return n},UNSTABLE_REVALIDATE_RENAME_ERROR:function(){return Z},WEBPACK_LAYERS:function(){return eo},WEBPACK_RESOURCE_QUERIES:function(){return es},WEB_SOCKET_MAX_RECONNECTIONS:function(){return ei}});let n="text/plain",i="text/html; charset=utf-8",a="application/json; charset=utf-8",o="nxtP",s="nxtI",c="x-matched-path",u="x-prerender-revalidate",l="x-prerender-revalidate-if-generated",d=".segments",p=".segment.rsc",h=".rsc",f=".action",m=".json",g=".meta",y=".body",b="x-next-cache-tags",w="x-next-revalidated-tags",_="x-next-revalidate-tag-token",v="next-resume",E=128,S=256,R=1024,x="_N_T_",P=31536e3,A=0xfffffffe,k="middleware",T=`(?:src/)?${k}`,O="proxy",C=`(?:src/)?${O}`,I="instrumentation",j="private-next-pages",N="private-dot-next",D="private-next-root-dir",U="private-next-app-dir",L="private-next-rsc-mod-ref-proxy",M="private-next-rsc-action-validate",$="private-next-rsc-server-reference",H="private-next-rsc-cache-wrapper",W="private-next-rsc-track-dynamic-import",K="private-next-rsc-action-encryption",B="private-next-rsc-action-client-wrapper",q="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",z="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",J="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",V="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",F="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",G="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",X="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",Y="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",Z="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",Q="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",ee='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',et="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",er=["app","pages","components","lib","src"],en={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},ei=12,ea={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"},eo={...ea,GROUP:{builtinReact:[ea.reactServerComponents,ea.actionBrowser],serverOnly:[ea.reactServerComponents,ea.actionBrowser,ea.instrument,ea.middleware],neutralTarget:[ea.apiNode,ea.apiEdge],clientOnly:[ea.serverSideRendering,ea.appPagesBrowser],bundled:[ea.reactServerComponents,ea.actionBrowser,ea.serverSideRendering,ea.appPagesBrowser,ea.shared,ea.instrument,ea.middleware],appPages:[ea.reactServerComponents,ea.serverSideRendering,ea.appPagesBrowser,ea.actionBrowser]}},es={edgeSSREntry:"__next_edge_ssr_entry__",metadata:"__next_metadata__",metadataRoute:"__next_metadata_route__",metadataImageMeta:"__next_metadata_image_meta__"}},41296,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{fromNodeOutgoingHttpHeaders:function(){return i},normalizeNextQueryParam:function(){return c},splitCookiesString:function(){return a},toNodeOutgoingHttpHeaders:function(){return o},validateURL:function(){return s}});let n=e.r(30009);function i(e){let t=new Headers;for(let[r,n]of Object.entries(e))for(let e of Array.isArray(n)?n:[n])void 0!==e&&("number"==typeof e&&(e=e.toString()),t.append(r,e));return t}function a(e){var t,r,n,i,a,o=[],s=0;function c(){for(;s<e.length&&/\s/.test(e.charAt(s));)s+=1;return s<e.length}function u(){return"="!==(r=e.charAt(s))&&";"!==r&&","!==r}for(;s<e.length;){for(t=s,a=!1;c();)if(","===(r=e.charAt(s))){for(n=s,s+=1,c(),i=s;s<e.length&&u();)s+=1;s<e.length&&"="===e.charAt(s)?(a=!0,s=i,o.push(e.substring(t,n)),t=s):s=n+1}else s+=1;(!a||s>=e.length)&&o.push(e.substring(t,e.length))}return o}function o(e){let t={},r=[];if(e)for(let[n,i]of e.entries())"set-cookie"===n.toLowerCase()?(r.push(...a(i)),t[n]=1===r.length?r[0]:r):t[n]=i;return t}function s(e){try{return String(new URL(String(e)))}catch(t){throw Object.defineProperty(Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}function c(e){for(let t of[n.NEXT_QUERY_PARAM_PREFIX,n.NEXT_INTERCEPTION_MARKER_PREFIX])if(e!==t&&e.startsWith(t))return e.substring(t.length);return null}},43241,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{PageSignatureError:function(){return n},RemovedPageError:function(){return i},RemovedUAError:function(){return a}});class n extends Error{constructor({page:e}){super(`The middleware "${e}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class i extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class a extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}},77312,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{RequestCookies:function(){return n.RequestCookies},ResponseCookies:function(){return n.ResponseCookies},stringifyCookie:function(){return n.stringifyCookie}});let n=e.r(9254)},75447,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{INTERNALS:function(){return s},NextRequest:function(){return c}});let n=e.r(61400),i=e.r(41296),a=e.r(43241),o=e.r(77312),s=Symbol("internal request");class c extends Request{constructor(e,t={}){const r="string"!=typeof e&&"url"in e?e.url:String(e);(0,i.validateURL)(r),t.body&&"half"!==t.duplex&&(t.duplex="half"),e instanceof Request?super(e,t):super(r,t);const a=new n.NextURL(r,{headers:(0,i.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:t.nextConfig});this[s]={cookies:new o.RequestCookies(this.headers),nextUrl:a,url:a.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[s].cookies}get nextUrl(){return this[s].nextUrl}get page(){throw new a.RemovedPageError}get ua(){throw new a.RemovedUAError}get url(){return this[s].url}}},8126,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ReflectAdapter",{enumerable:!0,get:function(){return n}});class n{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},9052,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NextResponse",{enumerable:!0,get:function(){return d}});let n=e.r(77312),i=e.r(61400),a=e.r(41296),o=e.r(8126),s=e.r(77312),c=Symbol("internal response"),u=new Set([301,302,303,307,308]);function l(e,t){var r;if(null==e||null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let r=[];for(let[n,i]of e.request.headers)t.set("x-middleware-request-"+n,i),r.push(n);t.set("x-middleware-override-headers",r.join(","))}}class d extends Response{constructor(e,t={}){super(e,t);const r=this.headers,u=new Proxy(new s.ResponseCookies(r),{get(e,i,a){switch(i){case"delete":case"set":return(...a)=>{let o=Reflect.apply(e[i],e,a),c=new Headers(r);return o instanceof s.ResponseCookies&&r.set("x-middleware-set-cookie",o.getAll().map(e=>(0,n.stringifyCookie)(e)).join(",")),l(t,c),o};default:return o.ReflectAdapter.get(e,i,a)}}});this[c]={cookies:u,url:t.url?new i.NextURL(t.url,{headers:(0,a.toNodeOutgoingHttpHeaders)(r),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[c].cookies}static json(e,t){let r=Response.json(e,t);return new d(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!u.has(r))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let n="object"==typeof t?t:{},i=new Headers(null==n?void 0:n.headers);return i.set("Location",(0,a.validateURL)(e)),new d(null,{...n,headers:i,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",(0,a.validateURL)(e)),l(t,r),new d(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),l(e,t),new d(null,{...e,headers:t})}}},2075,(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error('ImageResponse moved from "next/server" to "next/og" since Next.js 14, please import from "next/og" instead'),"__NEXT_ERROR_CODE",{value:"E183",enumerable:!1,configurable:!0})}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ImageResponse",{enumerable:!0,get:function(){return n}})},6992,(e,t,r)=>{(()=>{var r={226:function(t,r){!function(n,i){"use strict";var a="",o="?",s="function",c="undefined",u="object",l="string",d="major",p="model",h="name",f="type",m="vendor",g="version",y="architecture",b="console",w="mobile",_="tablet",v="smarttv",E="wearable",S="embedded",R=350,x="Amazon",P="Apple",A="ASUS",k="BlackBerry",T="Browser",O="Chrome",C="Firefox",I="Google",j="Huawei",N="LG",D="Microsoft",U="Motorola",L="Opera",M="Samsung",$="Sharp",H="Sony",W="Xiaomi",K="Zebra",B="Facebook",q="Chromium OS",z="Mac OS",J=function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},V=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},F=function(e,t){return typeof e===l&&-1!==G(t).indexOf(G(e))},G=function(e){return e.toLowerCase()},X=function(e){return typeof e===l?e.replace(/[^\d\.]/g,a).split(".")[0]:void 0},Y=function(e,t){if(typeof e===l)return e=e.replace(/^\s\s*/,a),typeof t===c?e:e.substring(0,R)},Z=function(e,t){for(var r,n,i,a,o,c,l=0;l<t.length&&!o;){var d=t[l],p=t[l+1];for(r=n=0;r<d.length&&!o&&d[r];)if(o=d[r++].exec(e))for(i=0;i<p.length;i++)c=o[++n],typeof(a=p[i])===u&&a.length>0?2===a.length?typeof a[1]==s?this[a[0]]=a[1].call(this,c):this[a[0]]=a[1]:3===a.length?typeof a[1]!==s||a[1].exec&&a[1].test?this[a[0]]=c?c.replace(a[1],a[2]):void 0:this[a[0]]=c?a[1].call(this,c,a[2]):void 0:4===a.length&&(this[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):void 0):this[a]=c||void 0;l+=2}},Q=function(e,t){for(var r in t)if(typeof t[r]===u&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(F(t[r][n],e))return r===o?void 0:r}else if(F(t[r],e))return r===o?void 0:r;return e},ee={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},et={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,g],[/opios[\/ ]+([\w\.]+)/i],[g,[h,L+" Mini"]],[/\bopr\/([\w\.]+)/i],[g,[h,L]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,g],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[h,"UC"+T]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[g,[h,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[g,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[g,[h,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+T],g],[/\bfocus\/([\w\.]+)/i],[g,[h,C+" Focus"]],[/\bopt\/([\w\.]+)/i],[g,[h,L+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[h,L+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[h,"MIUI "+T]],[/fxios\/([-\w\.]+)/i],[g,[h,C]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 "+T]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 "+T],g],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[h,g],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,B],g],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[h,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[g,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[h,O+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,O+" WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[h,"Android "+T]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,g],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[g,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[g,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[g,Q,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[h,C+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[h,g],[/(cobalt)\/([\w\.]+)/i],[h,[g,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[y,"amd64"]],[/(ia32(?=;))/i],[[y,G]],[/((?:i[346]|x)86)[;\)]/i],[[y,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[y,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[y,"armhf"]],[/windows (ce|mobile); ppc;/i],[[y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[y,/ower/,a,G]],[/(sun4\w)[;\)]/i],[[y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[y,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[p,[m,M],[f,_]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[p,[m,M],[f,w]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[p,[m,P],[f,w]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[p,[m,P],[f,_]],[/(macintosh);/i],[p,[m,P]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[p,[m,$],[f,w]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[p,[m,j],[f,_]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[p,[m,j],[f,w]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[p,/_/g," "],[m,W],[f,w]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[p,/_/g," "],[m,W],[f,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[p,[m,"OPPO"],[f,w]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[p,[m,"Vivo"],[f,w]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[p,[m,"Realme"],[f,w]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[p,[m,U],[f,w]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[p,[m,U],[f,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[p,[m,N],[f,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[p,[m,N],[f,w]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[p,[m,"Lenovo"],[f,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[p,/_/g," "],[m,"Nokia"],[f,w]],[/(pixel c)\b/i],[p,[m,I],[f,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[p,[m,I],[f,w]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[m,H],[f,w]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[p,"Xperia Tablet"],[m,H],[f,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[p,[m,"OnePlus"],[f,w]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[p,[m,x],[f,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[p,/(.+)/g,"Fire Phone $1"],[m,x],[f,w]],[/(playbook);[-\w\),; ]+(rim)/i],[p,m,[f,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[p,[m,k],[f,w]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[p,[m,A],[f,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[p,[m,A],[f,w]],[/(nexus 9)/i],[p,[m,"HTC"],[f,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[m,[p,/_/g," "],[f,w]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[p,[m,"Acer"],[f,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[p,[m,"Meizu"],[f,w]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,p,[f,w]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,p,[f,_]],[/(surface duo)/i],[p,[m,D],[f,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[p,[m,"Fairphone"],[f,w]],[/(u304aa)/i],[p,[m,"AT&T"],[f,w]],[/\bsie-(\w*)/i],[p,[m,"Siemens"],[f,w]],[/\b(rct\w+) b/i],[p,[m,"RCA"],[f,_]],[/\b(venue[\d ]{2,7}) b/i],[p,[m,"Dell"],[f,_]],[/\b(q(?:mv|ta)\w+) b/i],[p,[m,"Verizon"],[f,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[p,[m,"Barnes & Noble"],[f,_]],[/\b(tm\d{3}\w+) b/i],[p,[m,"NuVision"],[f,_]],[/\b(k88) b/i],[p,[m,"ZTE"],[f,_]],[/\b(nx\d{3}j) b/i],[p,[m,"ZTE"],[f,w]],[/\b(gen\d{3}) b.+49h/i],[p,[m,"Swiss"],[f,w]],[/\b(zur\d{3}) b/i],[p,[m,"Swiss"],[f,_]],[/\b((zeki)?tb.*\b) b/i],[p,[m,"Zeki"],[f,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],p,[f,_]],[/\b(ns-?\w{0,9}) b/i],[p,[m,"Insignia"],[f,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[p,[m,"NextBook"],[f,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],p,[f,w]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],p,[f,w]],[/\b(ph-1) /i],[p,[m,"Essential"],[f,w]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[p,[m,"Envizen"],[f,_]],[/\b(trio[-\w\. ]+) b/i],[p,[m,"MachSpeed"],[f,_]],[/\btu_(1491) b/i],[p,[m,"Rotor"],[f,_]],[/(shield[\w ]+) b/i],[p,[m,"Nvidia"],[f,_]],[/(sprint) (\w+)/i],[m,p,[f,w]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[m,D],[f,w]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[p,[m,K],[f,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[p,[m,K],[f,w]],[/smart-tv.+(samsung)/i],[m,[f,v]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[m,M],[f,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,N],[f,v]],[/(apple) ?tv/i],[m,[p,P+" TV"],[f,v]],[/crkey/i],[[p,O+"cast"],[m,I],[f,v]],[/droid.+aft(\w)( bui|\))/i],[p,[m,x],[f,v]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[p,[m,$],[f,v]],[/(bravia[\w ]+)( bui|\))/i],[p,[m,H],[f,v]],[/(mitv-\w{5}) bui/i],[p,[m,W],[f,v]],[/Hbbtv.*(technisat) (.*);/i],[m,p,[f,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[m,Y],[p,Y],[f,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[f,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,p,[f,b]],[/droid.+; (shield) bui/i],[p,[m,"Nvidia"],[f,b]],[/(playstation [345portablevi]+)/i],[p,[m,H],[f,b]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[p,[m,D],[f,b]],[/((pebble))app/i],[m,p,[f,E]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[p,[m,P],[f,E]],[/droid.+; (glass) \d/i],[p,[m,I],[f,E]],[/droid.+; (wt63?0{2,3})\)/i],[p,[m,K],[f,E]],[/(quest( 2| pro)?)/i],[p,[m,B],[f,E]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[f,S]],[/(aeobc)\b/i],[p,[m,x],[f,S]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[p,[f,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[p,[f,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[f,_]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[f,w]],[/(android[-\w\. ]{0,9});.+buil/i],[p,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,g],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[h,[g,Q,ee]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[h,"Windows"],[g,Q,ee]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,z],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[g,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,g],[/\(bb(10);/i],[g,[h,k]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[h,C+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[g,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[g,[h,O+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,q],g],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,g],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,g]]},er=function(e,t){if(typeof e===u&&(t=e,e=void 0),!(this instanceof er))return new er(e,t).getResult();var r=typeof n!==c&&n.navigator?n.navigator:void 0,i=e||(r&&r.userAgent?r.userAgent:a),o=r&&r.userAgentData?r.userAgentData:void 0,b=t?J(et,t):et,v=r&&r.userAgent==i;return this.getBrowser=function(){var e={};return e[h]=void 0,e[g]=void 0,Z.call(e,i,b.browser),e[d]=X(e[g]),v&&r&&r.brave&&typeof r.brave.isBrave==s&&(e[h]="Brave"),e},this.getCPU=function(){var e={};return e[y]=void 0,Z.call(e,i,b.cpu),e},this.getDevice=function(){var e={};return e[m]=void 0,e[p]=void 0,e[f]=void 0,Z.call(e,i,b.device),v&&!e[f]&&o&&o.mobile&&(e[f]=w),v&&"Macintosh"==e[p]&&r&&typeof r.standalone!==c&&r.maxTouchPoints&&r.maxTouchPoints>2&&(e[p]="iPad",e[f]=_),e},this.getEngine=function(){var e={};return e[h]=void 0,e[g]=void 0,Z.call(e,i,b.engine),e},this.getOS=function(){var e={};return e[h]=void 0,e[g]=void 0,Z.call(e,i,b.os),v&&!e[h]&&o&&"Unknown"!=o.platform&&(e[h]=o.platform.replace(/chrome os/i,q).replace(/macos/i,z)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===l&&e.length>R?Y(e,R):e,this},this.setUA(i),this};if(er.VERSION="1.0.35",er.BROWSER=V([h,g,d]),er.CPU=V([y]),er.DEVICE=V([p,m,f,b,w,v,_,E,S]),er.ENGINE=er.OS=V([h,g]),typeof r!==c)"object"!==c&&t.exports&&(r=t.exports=er),r.UAParser=er;else if(typeof define===s&&define.amd){let t;e.r,void 0!==(t=er)&&e.v(t)}else typeof n!==c&&(n.UAParser=er);var en=typeof n!==c&&(n.jQuery||n.Zepto);if(en&&!en.ua){var ei=new er;en.ua=ei.getResult(),en.ua.get=function(){return ei.getUA()},en.ua.set=function(e){ei.setUA(e);var t=ei.getResult();for(var r in t)en.ua[r]=t[r]}}}(this)}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var a=n[e]={exports:{}},o=!0;try{r[e].call(a.exports,a,a.exports,i),o=!1}finally{o&&delete n[e]}return a.exports}i.ab="/ROOT/node_modules/next/dist/compiled/ua-parser-js/",t.exports=i(226)})()},60567,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{isBot:function(){return a},userAgent:function(){return s},userAgentFromString:function(){return o}});let n=i(e.r(6992));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(e)}function o(e){return{...(0,n.default)(e),isBot:void 0!==e&&a(e)}}function s({headers:e}){return o(e.get("user-agent")||void 0)}},98214,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"URLPattern",{enumerable:!0,get:function(){return n}});let n="u"<typeof URLPattern?void 0:URLPattern},66229,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"after",{enumerable:!0,get:function(){return i}});let n=e.r(56704);function i(e){let t=n.workAsyncStorage.getStore();if(!t)throw Object.defineProperty(Error("`after` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context"),"__NEXT_ERROR_CODE",{value:"E468",enumerable:!1,configurable:!0});let{afterContext:r}=t;return r.after(e)}},3368,(e,t,r)=>{"use strict";function n(e,t){return Object.keys(e).forEach(function(r){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})}),e}Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(66229),r)},39622,(e,t,r)=>{"use strict";t.exports=e.r(18622)},49518,(e,t,r)=>{"use strict";t.exports=e.r(39622).vendored["react-rsc"].React},77753,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{DynamicServerError:function(){return i},isDynamicServerError:function(){return a}});let n="DYNAMIC_SERVER_USAGE";class i extends Error{constructor(e){super(`Dynamic server usage: ${e}`),this.description=e,this.digest=n}}function a(e){return"object"==typeof e&&null!==e&&"digest"in e&&"string"==typeof e.digest&&e.digest===n}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},80773,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{StaticGenBailoutError:function(){return i},isStaticGenBailoutError:function(){return a}});let n="NEXT_STATIC_GEN_BAILOUT";class i extends Error{constructor(...e){super(...e),this.code=n}}function a(e){return"object"==typeof e&&null!==e&&"code"in e&&e.code===n}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},37138,(e,t,r)=>{"use strict";function n(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===i}Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{isHangingPromiseRejectionError:function(){return n},makeDevtoolsIOAwarePromise:function(){return u},makeHangingPromise:function(){return s}});let i="HANGING_PROMISE_REJECTION";class a extends Error{constructor(e,t){super(`During prerendering, ${t} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${t} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${e}".`),this.route=e,this.expression=t,this.digest=i}}let o=new WeakMap;function s(e,t,r){if(e.aborted)return Promise.reject(new a(t,r));{let n=new Promise((n,i)=>{let s=i.bind(null,new a(t,r)),c=o.get(e);if(c)c.push(s);else{let t=[s];o.set(e,t),e.addEventListener("abort",()=>{for(let e=0;e<t.length;e++)t[e]()},{once:!0})}});return n.catch(c),n}}function c(){}function u(e,t,r){return t.stagedRendering?t.stagedRendering.delayUntilStage(r,void 0,e):new Promise(t=>{setTimeout(()=>{t(e)},0)})}},13332,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{METADATA_BOUNDARY_NAME:function(){return n},OUTLET_BOUNDARY_NAME:function(){return a},ROOT_LAYOUT_BOUNDARY_NAME:function(){return o},VIEWPORT_BOUNDARY_NAME:function(){return i}});let n="__next_metadata_boundary__",i="__next_viewport_boundary__",a="__next_outlet_boundary__",o="__next_root_layout_boundary__"},18697,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{atLeastOneTask:function(){return a},scheduleImmediate:function(){return i},scheduleOnNextTick:function(){return n},waitAtLeastOneReactRenderTask:function(){return o}});let n=e=>{Promise.resolve().then(()=>{process.nextTick(e)})},i=e=>{setImmediate(e)};function a(){return new Promise(e=>i(e))}function o(){return new Promise(e=>setImmediate(e))}},39491,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{BailoutToCSRError:function(){return i},isBailoutToCSRError:function(){return a}});let n="BAILOUT_TO_CLIENT_SIDE_RENDERING";class i extends Error{constructor(e){super(`Bail out to client-side rendering: ${e}`),this.reason=e,this.digest=n}}function a(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===n}},35121,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"InvariantError",{enumerable:!0,get:function(){return n}});class n extends Error{constructor(e,t){super(`Invariant: ${e.endsWith(".")?e:e+"."} This is a bug in Next.js.`,t),this.name="InvariantError"}}},21401,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{Postpone:function(){return R},PreludeState:function(){return Y},abortAndThrowOnSynchronousRequestDataAccess:function(){return S},abortOnSynchronousPlatformIOAccess:function(){return E},accessedDynamicData:function(){return I},annotateDynamicAccess:function(){return M},consumeDynamicAccess:function(){return j},createDynamicTrackingState:function(){return m},createDynamicValidationState:function(){return g},createHangingInputAbortSignal:function(){return L},createRenderInBrowserAbortSignal:function(){return U},delayUntilRuntimeStage:function(){return et},formatDynamicAPIAccesses:function(){return N},getFirstDynamicReason:function(){return y},getStaticShellDisallowedDynamicReasons:function(){return ee},isDynamicPostpone:function(){return A},isPrerenderInterruptedError:function(){return C},logDisallowedDynamicError:function(){return Z},markCurrentScopeAsDynamic:function(){return b},postponeWithTracking:function(){return x},throwIfDisallowedDynamic:function(){return Q},throwToInterruptStaticGeneration:function(){return w},trackAllowedDynamicAccess:function(){return V},trackDynamicDataInDynamicRender:function(){return _},trackDynamicHoleInRuntimeShell:function(){return F},trackDynamicHoleInStaticShell:function(){return G},useDynamicRouteParams:function(){return $},useDynamicSearchParams:function(){return H}});let n=h(e.r(49518)),i=e.r(77753),a=e.r(80773),o=e.r(32319),s=e.r(56704),c=e.r(37138),u=e.r(13332),l=e.r(18697),d=e.r(39491),p=e.r(35121);function h(e){return e&&e.__esModule?e:{default:e}}let f="function"==typeof n.default.unstable_postpone;function m(e){return{isDebugDynamicAccesses:e,dynamicAccesses:[],syncDynamicErrorWithStack:null}}function g(){return{hasSuspenseAboveBody:!1,hasDynamicMetadata:!1,dynamicMetadata:null,hasDynamicViewport:!1,hasAllowedDynamic:!1,dynamicErrors:[]}}function y(e){var t;return null==(t=e.dynamicAccesses[0])?void 0:t.expression}function b(e,t,r){if(t)switch(t.type){case"cache":case"unstable-cache":case"private-cache":return}if(!e.forceDynamic&&!e.forceStatic){if(e.dynamicShouldError)throw Object.defineProperty(new a.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${r}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(t)switch(t.type){case"prerender-ppr":return x(e.route,r,t.dynamicTracking);case"prerender-legacy":t.revalidate=0;let n=Object.defineProperty(new i.DynamicServerError(`Route ${e.route} couldn't be rendered statically because it used ${r}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw e.dynamicUsageDescription=r,e.dynamicUsageStack=n.stack,n}}}function w(e,t,r){let n=Object.defineProperty(new i.DynamicServerError(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw r.revalidate=0,t.dynamicUsageDescription=e,t.dynamicUsageStack=n.stack,n}function _(e){switch(e.type){case"cache":case"unstable-cache":case"private-cache":return}}function v(e,t,r){let n=O(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`);r.controller.abort(n);let i=r.dynamicTracking;i&&i.dynamicAccesses.push({stack:i.isDebugDynamicAccesses?Error().stack:void 0,expression:t})}function E(e,t,r,n){let i=n.dynamicTracking;v(e,t,n),i&&null===i.syncDynamicErrorWithStack&&(i.syncDynamicErrorWithStack=r)}function S(e,t,r,n){if(!1===n.controller.signal.aborted){v(e,t,n);let i=n.dynamicTracking;i&&null===i.syncDynamicErrorWithStack&&(i.syncDynamicErrorWithStack=r)}throw O(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`)}function R({reason:e,route:t}){let r=o.workUnitAsyncStorage.getStore();x(t,e,r&&"prerender-ppr"===r.type?r.dynamicTracking:null)}function x(e,t,r){D(),r&&r.dynamicAccesses.push({stack:r.isDebugDynamicAccesses?Error().stack:void 0,expression:t}),n.default.unstable_postpone(P(e,t))}function P(e,t){return`Route ${e} needs to bail out of prerendering at this point because it used ${t}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function A(e){return"object"==typeof e&&null!==e&&"string"==typeof e.message&&k(e.message)}function k(e){return e.includes("needs to bail out of prerendering at this point because it used")&&e.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===k(P("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});let T="NEXT_PRERENDER_INTERRUPTED";function O(e){let t=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t.digest=T,t}function C(e){return"object"==typeof e&&null!==e&&e.digest===T&&"name"in e&&"message"in e&&e instanceof Error}function I(e){return e.length>0}function j(e,t){return e.dynamicAccesses.push(...t.dynamicAccesses),e.dynamicAccesses}function N(e){return e.filter(e=>"string"==typeof e.stack&&e.stack.length>0).map(({expression:e,stack:t})=>(t=t.split("\n").slice(4).filter(e=>!(e.includes("node_modules/next/")||e.includes(" (<anonymous>)")||e.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${e}:
${t}`))}function D(){if(!f)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})}function U(){let e=new AbortController;return e.abort(Object.defineProperty(new d.BailoutToCSRError("Render in Browser"),"__NEXT_ERROR_CODE",{value:"E721",enumerable:!1,configurable:!0})),e.signal}function L(e){switch(e.type){case"prerender":case"prerender-runtime":let t=new AbortController;if(e.cacheSignal)e.cacheSignal.inputReady().then(()=>{t.abort()});else{let r=(0,o.getRuntimeStagePromise)(e);r?r.then(()=>(0,l.scheduleOnNextTick)(()=>t.abort())):(0,l.scheduleOnNextTick)(()=>t.abort())}return t.signal;case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"private-cache":case"unstable-cache":return}}function M(e,t){let r=t.dynamicTracking;r&&r.dynamicAccesses.push({stack:r.isDebugDynamicAccesses?Error().stack:void 0,expression:e})}function $(e){let t=s.workAsyncStorage.getStore(),r=o.workUnitAsyncStorage.getStore();if(t&&r)switch(r.type){case"prerender-client":case"prerender":{let i=r.fallbackRouteParams;i&&i.size>0&&n.default.use((0,c.makeHangingPromise)(r.renderSignal,t.route,e));break}case"prerender-ppr":{let n=r.fallbackRouteParams;if(n&&n.size>0)return x(t.route,e,r.dynamicTracking);break}case"prerender-runtime":throw Object.defineProperty(new p.InvariantError(`\`${e}\` was called during a runtime prerender. Next.js should be preventing ${e} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E771",enumerable:!1,configurable:!0});case"cache":case"private-cache":throw Object.defineProperty(new p.InvariantError(`\`${e}\` was called inside a cache scope. Next.js should be preventing ${e} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0})}}function H(e){let t=s.workAsyncStorage.getStore(),r=o.workUnitAsyncStorage.getStore();if(t)switch(!r&&(0,o.throwForMissingRequestStore)(e),r.type){case"prerender-client":n.default.use((0,c.makeHangingPromise)(r.renderSignal,t.route,e));break;case"prerender-legacy":case"prerender-ppr":if(t.forceStatic)return;throw Object.defineProperty(new d.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":throw Object.defineProperty(new p.InvariantError(`\`${e}\` was called from a Server Component. Next.js should be preventing ${e} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E795",enumerable:!1,configurable:!0});case"cache":case"unstable-cache":case"private-cache":throw Object.defineProperty(new p.InvariantError(`\`${e}\` was called inside a cache scope. Next.js should be preventing ${e} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0});case"request":return}}let W=/\n\s+at Suspense \(<anonymous>\)/,K="body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6",B=RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:${K}) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at ${u.ROOT_LAYOUT_BOUNDARY_NAME} \\([^\\n]*\\)`),q=RegExp(`\\n\\s+at ${u.METADATA_BOUNDARY_NAME}[\\n\\s]`),z=RegExp(`\\n\\s+at ${u.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),J=RegExp(`\\n\\s+at ${u.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function V(e,t,r,n){if(!J.test(t)){if(q.test(t)){r.hasDynamicMetadata=!0;return}if(z.test(t)){r.hasDynamicViewport=!0;return}if(B.test(t)){r.hasAllowedDynamic=!0,r.hasSuspenseAboveBody=!0;return}else if(W.test(t)){r.hasAllowedDynamic=!0;return}else{if(n.syncDynamicErrorWithStack)return void r.dynamicErrors.push(n.syncDynamicErrorWithStack);let i=X(`Route "${e.route}": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,t);return void r.dynamicErrors.push(i)}}}function F(e,t,r,n){if(!J.test(t)){if(q.test(t)){r.dynamicMetadata=X(`Route "${e.route}": Uncached data or \`connection()\` was accessed inside \`generateMetadata\`. Except for this instance, the page would have been entirely prerenderable which may have been the intended behavior. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`,t);return}if(z.test(t)){let n=X(`Route "${e.route}": Uncached data or \`connection()\` was accessed inside \`generateViewport\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`,t);r.dynamicErrors.push(n);return}if(B.test(t)){r.hasAllowedDynamic=!0,r.hasSuspenseAboveBody=!0;return}else if(W.test(t)){r.hasAllowedDynamic=!0;return}else{if(n.syncDynamicErrorWithStack)return void r.dynamicErrors.push(n.syncDynamicErrorWithStack);let i=X(`Route "${e.route}": Uncached data or \`connection()\` was accessed outside of \`<Suspense>\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,t);return void r.dynamicErrors.push(i)}}}function G(e,t,r,n){if(!J.test(t)){if(q.test(t)){r.dynamicMetadata=X(`Route "${e.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed inside \`generateMetadata\` or you have file-based metadata such as icons that depend on dynamic params segments. Except for this instance, the page would have been entirely prerenderable which may have been the intended behavior. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`,t);return}if(z.test(t)){let n=X(`Route "${e.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed inside \`generateViewport\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`,t);r.dynamicErrors.push(n);return}if(B.test(t)){r.hasAllowedDynamic=!0,r.hasSuspenseAboveBody=!0;return}else if(W.test(t)){r.hasAllowedDynamic=!0;return}else{if(n.syncDynamicErrorWithStack)return void r.dynamicErrors.push(n.syncDynamicErrorWithStack);let i=X(`Route "${e.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed outside of \`<Suspense>\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,t);return void r.dynamicErrors.push(i)}}}function X(e,t){let r=null,n=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n.stack=n.name+": "+e+(r||t),n}var Y=function(e){return e[e.Full=0]="Full",e[e.Empty=1]="Empty",e[e.Errored=2]="Errored",e}({});function Z(e,t){console.error(t),e.dev||(e.hasReadableErrorStacks?console.error(`To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \`next dev\`, then open "${e.route}" in your browser to investigate the error.`):console.error(`To get a more detailed stack trace and pinpoint the issue, try one of the following:
  - Start the app in development mode by running \`next dev\`, then open "${e.route}" in your browser to investigate the error.
  - Rerun the production build with \`next build --debug-prerender\` to generate better stack traces.`))}function Q(e,t,r,n){if(n.syncDynamicErrorWithStack)throw Z(e,n.syncDynamicErrorWithStack),new a.StaticGenBailoutError;if(0!==t){if(r.hasSuspenseAboveBody)return;let n=r.dynamicErrors;if(n.length>0){for(let t=0;t<n.length;t++)Z(e,n[t]);throw new a.StaticGenBailoutError}if(r.hasDynamicViewport)throw console.error(`Route "${e.route}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`),new a.StaticGenBailoutError;if(1===t)throw console.error(`Route "${e.route}" did not produce a static shell and Next.js was unable to determine a reason. This is a bug in Next.js.`),new a.StaticGenBailoutError}else if(!1===r.hasAllowedDynamic&&r.hasDynamicMetadata)throw console.error(`Route "${e.route}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`),new a.StaticGenBailoutError}function ee(e,t,r){if(r.hasSuspenseAboveBody)return[];if(0!==t){let n=r.dynamicErrors;if(n.length>0)return n;if(1===t)return[Object.defineProperty(new p.InvariantError(`Route "${e.route}" did not produce a static shell and Next.js was unable to determine a reason.`),"__NEXT_ERROR_CODE",{value:"E936",enumerable:!1,configurable:!0})]}else if(!1===r.hasAllowedDynamic&&0===r.dynamicErrors.length&&r.dynamicMetadata)return[r.dynamicMetadata];return[]}function et(e,t){return e.runtimeStagePromise?e.runtimeStagePromise.then(()=>t):t}},19048,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{isRequestAPICallableInsideAfter:function(){return s},throwForSearchParamsAccessInUseCache:function(){return o},throwWithStaticGenerationBailoutErrorWithDynamicError:function(){return a}});let n=e.r(80773),i=e.r(24725);function a(e,t){throw Object.defineProperty(new n.StaticGenBailoutError(`Route ${e} with \`dynamic = "error"\` couldn't be rendered statically because it used ${t}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E543",enumerable:!1,configurable:!0})}function o(e,t){let r=Object.defineProperty(Error(`Route ${e.route} used \`searchParams\` inside "use cache". Accessing dynamic request data inside a cache scope is not supported. If you need some search params inside a cached function await \`searchParams\` outside of the cached function and pass only the required search params as arguments to the cached function. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E842",enumerable:!1,configurable:!0});throw Error.captureStackTrace(r,t),e.invalidDynamicUsageError??=r,r}function s(){let e=i.afterTaskAsyncStorage.getStore();return(null==e?void 0:e.rootTaskSpawnPhase)==="action"}},45470,(e,t,r)=>{"use strict";function n(){let e,t,r=new Promise((r,n)=>{e=r,t=n});return{resolve:e,reject:t,promise:r}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"createPromiseWithResolvers",{enumerable:!0,get:function(){return n}})},98771,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{RenderStage:function(){return a},StagedRenderingController:function(){return o}});let n=e.r(35121),i=e.r(45470);var a=function(e){return e[e.Before=1]="Before",e[e.Static=2]="Static",e[e.Runtime=3]="Runtime",e[e.Dynamic=4]="Dynamic",e[e.Abandoned=5]="Abandoned",e}({});class o{constructor(e=null,t){this.abortSignal=e,this.hasRuntimePrefetch=t,this.currentStage=1,this.staticInterruptReason=null,this.runtimeInterruptReason=null,this.staticStageEndTime=1/0,this.runtimeStageEndTime=1/0,this.runtimeStageListeners=[],this.dynamicStageListeners=[],this.runtimeStagePromise=(0,i.createPromiseWithResolvers)(),this.dynamicStagePromise=(0,i.createPromiseWithResolvers)(),this.mayAbandon=!1,e&&(e.addEventListener("abort",()=>{let{reason:t}=e;this.currentStage<3&&(this.runtimeStagePromise.promise.catch(s),this.runtimeStagePromise.reject(t)),(this.currentStage<4||5===this.currentStage)&&(this.dynamicStagePromise.promise.catch(s),this.dynamicStagePromise.reject(t))},{once:!0}),this.mayAbandon=!0)}onStage(e,t){if(this.currentStage>=e)t();else if(3===e)this.runtimeStageListeners.push(t);else if(4===e)this.dynamicStageListeners.push(t);else throw Object.defineProperty(new n.InvariantError(`Invalid render stage: ${e}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}canSyncInterrupt(){if(1===this.currentStage)return!1;let e=this.hasRuntimePrefetch?4:3;return this.currentStage<e}syncInterruptCurrentStageWithReason(e){if(1!==this.currentStage){if(this.mayAbandon)return this.abandonRenderImpl();switch(this.currentStage){case 2:this.staticInterruptReason=e,this.advanceStage(4);return;case 3:this.hasRuntimePrefetch&&(this.runtimeInterruptReason=e,this.advanceStage(4));return}}}getStaticInterruptReason(){return this.staticInterruptReason}getRuntimeInterruptReason(){return this.runtimeInterruptReason}getStaticStageEndTime(){return this.staticStageEndTime}getRuntimeStageEndTime(){return this.runtimeStageEndTime}abandonRender(){if(!this.mayAbandon)throw Object.defineProperty(new n.InvariantError("`abandonRender` called on a stage controller that cannot be abandoned."),"__NEXT_ERROR_CODE",{value:"E938",enumerable:!1,configurable:!0});this.abandonRenderImpl()}abandonRenderImpl(){let{currentStage:e}=this;switch(e){case 2:this.currentStage=5,this.resolveRuntimeStage();return;case 3:this.currentStage=5;return}}advanceStage(e){if(e<=this.currentStage)return;let t=this.currentStage;if(this.currentStage=e,t<3&&e>=3&&(this.staticStageEndTime=performance.now()+performance.timeOrigin,this.resolveRuntimeStage()),t<4&&e>=4){this.runtimeStageEndTime=performance.now()+performance.timeOrigin,this.resolveDynamicStage();return}}resolveRuntimeStage(){let e=this.runtimeStageListeners;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.runtimeStagePromise.resolve()}resolveDynamicStage(){let e=this.dynamicStageListeners;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.dynamicStagePromise.resolve()}getStagePromise(e){switch(e){case 3:return this.runtimeStagePromise.promise;case 4:return this.dynamicStagePromise.promise;default:throw Object.defineProperty(new n.InvariantError(`Invalid render stage: ${e}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}}waitForStage(e){return this.getStagePromise(e)}delayUntilStage(e,t,r){let n=c(this.getStagePromise(e),t,r);return this.abortSignal&&n.catch(s),n}}function s(){}function c(e,t,r){let n=new Promise((t,n)=>{e.then(t.bind(null,r),n)});return void 0!==t&&(n.displayName=t),n}},44822,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"connection",{enumerable:!0,get:function(){return u}});let n=e.r(56704),i=e.r(32319),a=e.r(21401),o=e.r(80773),s=e.r(37138),c=e.r(19048);function u(){let e="connection",t=n.workAsyncStorage.getStore(),r=i.workUnitAsyncStorage.getStore();if(t){if(r&&"after"===r.phase&&!(0,c.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${t.route} used \`connection()\` inside \`after()\`. The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but \`after()\` executes after the request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E827",enumerable:!1,configurable:!0});if(t.forceStatic)return Promise.resolve(void 0);if(t.dynamicShouldError)throw Object.defineProperty(new o.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`connection()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E847",enumerable:!1,configurable:!0});if(r)switch(r.type){case"cache":{let e=Object.defineProperty(Error(`Route ${t.route} used \`connection()\` inside "use cache". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual request, but caches must be able to be produced before a request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E841",enumerable:!1,configurable:!0});throw Error.captureStackTrace(e,u),t.invalidDynamicUsageError??=e,e}case"private-cache":{let e=Object.defineProperty(Error(`Route ${t.route} used \`connection()\` inside "use cache: private". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual navigation request, but caches must be able to be produced before a navigation request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E837",enumerable:!1,configurable:!0});throw Error.captureStackTrace(e,u),t.invalidDynamicUsageError??=e,e}case"unstable-cache":throw Object.defineProperty(Error(`Route ${t.route} used \`connection()\` inside a function cached with \`unstable_cache()\`. The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E840",enumerable:!1,configurable:!0});case"prerender":case"prerender-client":case"prerender-runtime":return(0,s.makeHangingPromise)(r.renderSignal,t.route,"`connection()`");case"prerender-ppr":return(0,a.postponeWithTracking)(t.route,"connection",r.dynamicTracking);case"prerender-legacy":return(0,a.throwToInterruptStaticGeneration)("connection",t,r);case"request":return(0,a.trackDynamicDataInDynamicRender)(r),Promise.resolve(void 0)}}(0,i.throwForMissingRequestStore)(e)}e.r(98771)},55207,(e,t,r)=>{let n={NextRequest:e.r(75447).NextRequest,NextResponse:e.r(9052).NextResponse,ImageResponse:e.r(2075).ImageResponse,userAgentFromString:e.r(60567).userAgentFromString,userAgent:e.r(60567).userAgent,URLPattern:e.r(98214).URLPattern,after:e.r(3368).after,connection:e.r(44822).connection};t.exports=n,r.NextRequest=n.NextRequest,r.NextResponse=n.NextResponse,r.ImageResponse=n.ImageResponse,r.userAgentFromString=n.userAgentFromString,r.userAgent=n.userAgent,r.URLPattern=n.URLPattern,r.after=n.after,r.connection=n.connection},53066,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{ActionDidNotRevalidate:function(){return n},ActionDidRevalidateDynamicOnly:function(){return a},ActionDidRevalidateStaticAndDynamic:function(){return i}});let n=0,i=1,a=2},82126,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{MutableRequestCookiesAdapter:function(){return p},ReadonlyRequestCookiesError:function(){return s},RequestCookiesAdapter:function(){return c},appendMutableCookies:function(){return d},areCookiesMutableInCurrentPhase:function(){return f},createCookiesWithMutableAccessCheck:function(){return h},getModifiedCookieValues:function(){return l},responseCookiesToRequestCookies:function(){return g}});let n=e.r(77312),i=e.r(8126),a=e.r(56704),o=e.r(53066);class s extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new s}}class c{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return s.callable;default:return i.ReflectAdapter.get(e,t,r)}}})}}let u=Symbol.for("next.mutated.cookies");function l(e){let t=e[u];return t&&Array.isArray(t)&&0!==t.length?t:[]}function d(e,t){let r=l(t);if(0===r.length)return!1;let i=new n.ResponseCookies(e),a=i.getAll();for(let e of r)i.set(e);for(let e of a)i.set(e);return!0}class p{static wrap(e,t){let r=new n.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let s=[],c=new Set,l=()=>{let e=a.workAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=o.ActionDidRevalidateStaticAndDynamic),s=r.getAll().filter(e=>c.has(e.name)),t){let e=[];for(let t of s){let r=new n.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}},d=new Proxy(r,{get(e,t,r){switch(t){case u:return s;case"delete":return function(...t){c.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.delete(...t),d}finally{l()}};case"set":return function(...t){c.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t),d}finally{l()}};default:return i.ReflectAdapter.get(e,t,r)}}});return d}}function h(e){let t=new Proxy(e.mutableCookies,{get(r,n,a){switch(n){case"delete":return function(...n){return m(e,"cookies().delete"),r.delete(...n),t};case"set":return function(...n){return m(e,"cookies().set"),r.set(...n),t};default:return i.ReflectAdapter.get(r,n,a)}}});return t}function f(e){return"action"===e.phase}function m(e,t){if(!f(e))throw new s}function g(e){let t=new n.RequestCookies(new Headers);for(let r of e.getAll())t.set(r);return t}},37348,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return u}});let n=a(e.r(49518));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}let o={current:null},s="function"==typeof n.cache?n.cache:e=>e,c=console.warn;function u(e){return function(...t){c(e(...t))}}s(e=>{try{c(o.current)}finally{o.current=null}})},75332,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"cookies",{enumerable:!0,get:function(){return h}});let n=e.r(82126),i=e.r(77312),a=e.r(56704),o=e.r(32319),s=e.r(21401),c=e.r(80773),u=e.r(37138),l=e.r(37348),d=e.r(19048),p=e.r(35121);function h(){let e="cookies",t=a.workAsyncStorage.getStore(),r=o.workUnitAsyncStorage.getStore();if(t){if(r&&"after"===r.phase&&!(0,d.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${t.route} used \`cookies()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`cookies()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E843",enumerable:!1,configurable:!0});if(t.forceStatic)return y(f());if(t.dynamicShouldError)throw Object.defineProperty(new c.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E849",enumerable:!1,configurable:!0});if(r)switch(r.type){case"cache":let i=Object.defineProperty(Error(`Route ${t.route} used \`cookies()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E831",enumerable:!1,configurable:!0});throw Error.captureStackTrace(i,h),t.invalidDynamicUsageError??=i,i;case"unstable-cache":throw Object.defineProperty(Error(`Route ${t.route} used \`cookies()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E846",enumerable:!1,configurable:!0});case"prerender":return g(t,r);case"prerender-client":let a="`cookies`";throw Object.defineProperty(new p.InvariantError(`${a} must not be used within a Client Component. Next.js should be preventing ${a} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,s.postponeWithTracking)(t.route,e,r.dynamicTracking);case"prerender-legacy":return(0,s.throwToInterruptStaticGeneration)(e,t,r);case"prerender-runtime":return(0,s.delayUntilRuntimeStage)(r,y(r.cookies));case"private-cache":return y(r.cookies);case"request":return(0,s.trackDynamicDataInDynamicRender)(r),y((0,n.areCookiesMutableInCurrentPhase)(r)?r.userspaceMutableCookies:r.cookies)}}(0,o.throwForMissingRequestStore)(e)}function f(){return n.RequestCookiesAdapter.seal(new i.RequestCookies(new Headers({})))}e.r(98771);let m=new WeakMap;function g(e,t){let r=m.get(t);if(r)return r;let n=(0,u.makeHangingPromise)(t.renderSignal,e.route,"`cookies()`");return m.set(t,n),n}function y(e){let t=m.get(e);if(t)return t;let r=Promise.resolve(e);return m.set(e,r),r}function b(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`cookies()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E830",enumerable:!1,configurable:!0})}(0,l.createDedupedByCallsiteServerErrorLoggerDev)(b)},2620,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{HeadersAdapter:function(){return a},ReadonlyHeadersError:function(){return i}});let n=e.r(8126);class i extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new i}}class a extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,i){if("symbol"==typeof r)return n.ReflectAdapter.get(t,r,i);let a=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===a);if(void 0!==o)return n.ReflectAdapter.get(t,o,i)},set(t,r,i,a){if("symbol"==typeof r)return n.ReflectAdapter.set(t,r,i,a);let o=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===o);return n.ReflectAdapter.set(t,s??r,i,a)},has(t,r){if("symbol"==typeof r)return n.ReflectAdapter.has(t,r);let i=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0!==a&&n.ReflectAdapter.has(t,a)},deleteProperty(t,r){if("symbol"==typeof r)return n.ReflectAdapter.deleteProperty(t,r);let i=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0===a||n.ReflectAdapter.deleteProperty(t,a)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return i.callable;default:return n.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new a(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},87104,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"headers",{enumerable:!0,get:function(){return p}});let n=e.r(2620),i=e.r(56704),a=e.r(32319),o=e.r(21401),s=e.r(80773),c=e.r(37138),u=e.r(37348),l=e.r(19048),d=e.r(35121);function p(){let e="headers",t=i.workAsyncStorage.getStore(),r=a.workUnitAsyncStorage.getStore();if(t){if(r&&"after"===r.phase&&!(0,l.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${t.route} used \`headers()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`headers()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E839",enumerable:!1,configurable:!0});if(t.forceStatic)return m(n.HeadersAdapter.seal(new Headers({})));if(r)switch(r.type){case"cache":{let e=Object.defineProperty(Error(`Route ${t.route} used \`headers()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E833",enumerable:!1,configurable:!0});throw Error.captureStackTrace(e,p),t.invalidDynamicUsageError??=e,e}case"unstable-cache":throw Object.defineProperty(Error(`Route ${t.route} used \`headers()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E838",enumerable:!1,configurable:!0})}if(t.dynamicShouldError)throw Object.defineProperty(new s.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E828",enumerable:!1,configurable:!0});if(r)switch(r.type){case"prerender":return f(t,r);case"prerender-client":let i="`headers`";throw Object.defineProperty(new d.InvariantError(`${i} must not be used within a client component. Next.js should be preventing ${i} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,o.postponeWithTracking)(t.route,e,r.dynamicTracking);case"prerender-legacy":return(0,o.throwToInterruptStaticGeneration)(e,t,r);case"prerender-runtime":return(0,o.delayUntilRuntimeStage)(r,m(r.headers));case"private-cache":return m(r.headers);case"request":return(0,o.trackDynamicDataInDynamicRender)(r),m(r.headers)}}(0,a.throwForMissingRequestStore)(e)}e.r(98771);let h=new WeakMap;function f(e,t){let r=h.get(t);if(r)return r;let n=(0,c.makeHangingPromise)(t.renderSignal,e.route,"`headers()`");return h.set(t,n),n}function m(e){let t=h.get(e);if(t)return t;let r=Promise.resolve(e);return h.set(e,r),r}function g(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`headers()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E836",enumerable:!1,configurable:!0})}(0,u.createDedupedByCallsiteServerErrorLoggerDev)(g)},70392,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"draftMode",{enumerable:!0,get:function(){return l}});let n=e.r(32319),i=e.r(56704),a=e.r(21401),o=e.r(37348),s=e.r(80773),c=e.r(77753),u=e.r(35121);function l(){let e="draftMode",t=i.workAsyncStorage.getStore(),r=n.workUnitAsyncStorage.getStore();switch((!t||!r)&&(0,n.throwForMissingRequestStore)(e),r.type){case"prerender-runtime":return(0,a.delayUntilRuntimeStage)(r,d(r.draftMode,t));case"request":return d(r.draftMode,t);case"cache":case"private-cache":case"unstable-cache":let o=(0,n.getDraftModeProviderForCacheScope)(t,r);if(o)return d(o,t);case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":return d(null,t);default:return r}}function d(e,t){let r=e??p,n=h.get(r);return n||Promise.resolve(new f(e))}e.r(8126);let p={},h=new WeakMap;class f{constructor(e){this._provider=e}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){g("draftMode().enable()",this.enable),null!==this._provider&&this._provider.enable()}disable(){g("draftMode().disable()",this.disable),null!==this._provider&&this._provider.disable()}}function m(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`draftMode()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E835",enumerable:!1,configurable:!0})}function g(e,t){let r=i.workAsyncStorage.getStore(),o=n.workUnitAsyncStorage.getStore();if(r){if((null==o?void 0:o.phase)==="after")throw Object.defineProperty(Error(`Route ${r.route} used "${e}" inside \`after()\`. The enabled status of \`draftMode()\` can be read inside \`after()\` but you cannot enable or disable \`draftMode()\`. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E845",enumerable:!1,configurable:!0});if(r.dynamicShouldError)throw Object.defineProperty(new s.StaticGenBailoutError(`Route ${r.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(o)switch(o.type){case"cache":case"private-cache":{let n=Object.defineProperty(Error(`Route ${r.route} used "${e}" inside "use cache". The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E829",enumerable:!1,configurable:!0});throw Error.captureStackTrace(n,t),r.invalidDynamicUsageError??=n,n}case"unstable-cache":throw Object.defineProperty(Error(`Route ${r.route} used "${e}" inside a function cached with \`unstable_cache()\`. The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E844",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":{let t=Object.defineProperty(Error(`Route ${r.route} used ${e} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});return(0,a.abortAndThrowOnSynchronousRequestDataAccess)(r.route,e,t,o)}case"prerender-client":let n="`draftMode`";throw Object.defineProperty(new u.InvariantError(`${n} must not be used within a Client Component. Next.js should be preventing ${n} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,a.postponeWithTracking)(r.route,e,o.dynamicTracking);case"prerender-legacy":o.revalidate=0;let i=Object.defineProperty(new c.DynamicServerError(`Route ${r.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw r.dynamicUsageDescription=e,r.dynamicUsageStack=i.stack,i;case"request":(0,a.trackDynamicDataInDynamicRender)(o)}}}(0,o.createDedupedByCallsiteServerErrorLoggerDev)(m)},27180,(e,t,r)=>{t.exports.cookies=e.r(75332).cookies,t.exports.headers=e.r(87104).headers,t.exports.draftMode=e.r(70392).draftMode},37542,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ReadonlyURLSearchParams",{enumerable:!0,get:function(){return i}});class n extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class i extends URLSearchParams{append(){throw new n}delete(){throw new n}set(){throw new n}sort(){throw new n}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},7698,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"RedirectStatusCode",{enumerable:!0,get:function(){return n}});var n=function(e){return e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e}({});("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},71306,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{REDIRECT_ERROR_CODE:function(){return i},RedirectType:function(){return a},isRedirectError:function(){return o}});let n=e.r(7698),i="NEXT_REDIRECT";var a=function(e){return e.push="push",e.replace="replace",e}({});function o(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,a]=t,o=t.slice(2,-2).join(";"),s=Number(t.at(-2));return r===i&&("replace"===a||"push"===a)&&"string"==typeof o&&!isNaN(s)&&s in n.RedirectStatusCode}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},29389,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{getRedirectError:function(){return o},getRedirectStatusCodeFromError:function(){return d},getRedirectTypeFromError:function(){return l},getURLFromRedirectError:function(){return u},permanentRedirect:function(){return c},redirect:function(){return s}});let n=e.r(7698),i=e.r(71306),a=e.r(20635).actionAsyncStorage;function o(e,t,r=n.RedirectStatusCode.TemporaryRedirect){let a=Object.defineProperty(Error(i.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a.digest=`${i.REDIRECT_ERROR_CODE};${t};${e};${r};`,a}function s(e,t){throw o(e,t??=a?.getStore()?.isAction?i.RedirectType.push:i.RedirectType.replace,n.RedirectStatusCode.TemporaryRedirect)}function c(e,t=i.RedirectType.replace){throw o(e,t,n.RedirectStatusCode.PermanentRedirect)}function u(e){return(0,i.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function l(e){if(!(0,i.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function d(e){if(!(0,i.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},19321,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{HTTPAccessErrorStatus:function(){return n},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return a},getAccessFallbackErrorTypeByStatus:function(){return c},getAccessFallbackHTTPStatus:function(){return s},isHTTPAccessFallbackError:function(){return o}});let n={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},i=new Set(Object.values(n)),a="NEXT_HTTP_ERROR_FALLBACK";function o(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return t===a&&i.has(Number(r))}function s(e){return Number(e.digest.split(";")[1])}function c(e){switch(e){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},87646,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"notFound",{enumerable:!0,get:function(){return a}});let n=e.r(19321),i=`${n.HTTP_ERROR_FALLBACK_ERROR_CODE};404`;function a(){let e=Object.defineProperty(Error(i),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=i,e}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},72414,(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"forbidden",{enumerable:!0,get:function(){return n}}),e.r(19321).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},52236,(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"unauthorized",{enumerable:!0,get:function(){return n}}),e.r(19321).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},85867,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isPostpone",{enumerable:!0,get:function(){return i}});let n=Symbol.for("react.postpone");function i(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}},98197,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isNextRouterError",{enumerable:!0,get:function(){return a}});let n=e.r(19321),i=e.r(71306);function a(e){return(0,i.isRedirectError)(e)||(0,n.isHTTPAccessFallbackError)(e)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},13979,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"unstable_rethrow",{enumerable:!0,get:function(){return u}});let n=e.r(37138),i=e.r(85867),a=e.r(39491),o=e.r(98197),s=e.r(21401),c=e.r(77753);function u(e){if((0,o.isNextRouterError)(e)||(0,a.isBailoutToCSRError)(e)||(0,c.isDynamicServerError)(e)||(0,s.isDynamicPostpone)(e)||(0,i.isPostpone)(e)||(0,n.isHangingPromiseRejectionError)(e)||(0,s.isPrerenderInterruptedError)(e))throw e;e instanceof Error&&"cause"in e&&u(e.cause)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},50396,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"unstable_rethrow",{enumerable:!0,get:function(){return n}});let n=e.r(13979).unstable_rethrow;("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},2318,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{ReadonlyURLSearchParams:function(){return n.ReadonlyURLSearchParams},RedirectType:function(){return a.RedirectType},forbidden:function(){return s.forbidden},notFound:function(){return o.notFound},permanentRedirect:function(){return i.permanentRedirect},redirect:function(){return i.redirect},unauthorized:function(){return c.unauthorized},unstable_isUnrecognizedActionError:function(){return l},unstable_rethrow:function(){return u.unstable_rethrow}});let n=e.r(37542),i=e.r(29389),a=e.r(71306),o=e.r(87646),s=e.r(72414),c=e.r(52236),u=e.r(50396);function l(){throw Object.defineProperty(Error("`unstable_isUnrecognizedActionError` can only be used on the client."),"__NEXT_ERROR_CODE",{value:"E776",enumerable:!1,configurable:!0})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},62395,__turbopack_context__=>{"use strict";let api,hkdf,cache1,USER_AGENT,encodeBase64Url,decodeBase64Url,jwkCache,jwksMap;async function getEdgeInstrumentationModule(){return"_ENTRIES"in globalThis&&_ENTRIES.middleware_instrumentation&&await _ENTRIES.middleware_instrumentation}let instrumentationModulePromise=null;async function registerInstrumentation(){if("phase-production-build"===process.env.NEXT_PHASE)return;instrumentationModulePromise||(instrumentationModulePromise=getEdgeInstrumentationModule());let e=await instrumentationModulePromise;if(null==e?void 0:e.register)try{await e.register()}catch(e){throw e.message=`An error occurred while loading instrumentation hook: ${e.message}`,e}}async function edgeInstrumentationOnRequestError(...e){let t=await getEdgeInstrumentationModule();try{var r;await (null==t||null==(r=t.onRequestError)?void 0:r.call(t,...e))}catch(e){console.error("Error in instrumentation.onRequestError:",e)}}let registerInstrumentationPromise=null;function ensureInstrumentationRegistered(){return registerInstrumentationPromise||(registerInstrumentationPromise=registerInstrumentation()),registerInstrumentationPromise}function getUnsupportedModuleErrorMessage(e){return`The edge runtime does not support Node.js '${e}' module.
Learn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime`}function __import_unsupported(e){let t=new Proxy(function(){},{get(t,r){if("then"===r)return{};throw Object.defineProperty(Error(getUnsupportedModuleErrorMessage(e)),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})},construct(){throw Object.defineProperty(Error(getUnsupportedModuleErrorMessage(e)),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})},apply(r,n,i){if("function"==typeof i[0])return i[0](t);throw Object.defineProperty(Error(getUnsupportedModuleErrorMessage(e)),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}});return new Proxy({},{get:()=>t})}function enhanceGlobals(){}enhanceGlobals();class PageSignatureError extends Error{constructor({page:e}){super(`The middleware "${e}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class RemovedPageError extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class RemovedUAError extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}let TEXT_PLAIN_CONTENT_TYPE_HEADER="text/plain",HTML_CONTENT_TYPE_HEADER="text/html; charset=utf-8",JSON_CONTENT_TYPE_HEADER="application/json; charset=utf-8",NEXT_QUERY_PARAM_PREFIX="nxtP",NEXT_INTERCEPTION_MARKER_PREFIX="nxtI",MATCHED_PATH_HEADER="x-matched-path",PRERENDER_REVALIDATE_HEADER="x-prerender-revalidate",PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER="x-prerender-revalidate-if-generated",RSC_SEGMENTS_DIR_SUFFIX=".segments",RSC_SEGMENT_SUFFIX=".segment.rsc",RSC_SUFFIX=".rsc",ACTION_SUFFIX=".action",NEXT_DATA_SUFFIX=".json",NEXT_META_SUFFIX=".meta",NEXT_BODY_SUFFIX=".body",NEXT_CACHE_TAGS_HEADER="x-next-cache-tags",NEXT_CACHE_REVALIDATED_TAGS_HEADER="x-next-revalidated-tags",NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER="x-next-revalidate-tag-token",NEXT_RESUME_HEADER="next-resume",NEXT_CACHE_TAG_MAX_ITEMS=128,NEXT_CACHE_TAG_MAX_LENGTH=256,NEXT_CACHE_SOFT_TAG_MAX_LENGTH=1024,NEXT_CACHE_IMPLICIT_TAG_ID="_N_T_",CACHE_ONE_YEAR=31536e3,INFINITE_CACHE=0xfffffffe,MIDDLEWARE_FILENAME="middleware",MIDDLEWARE_LOCATION_REGEXP=`(?:src/)?${MIDDLEWARE_FILENAME}`,PROXY_FILENAME="proxy",PROXY_LOCATION_REGEXP=`(?:src/)?${PROXY_FILENAME}`,INSTRUMENTATION_HOOK_FILENAME="instrumentation",PAGES_DIR_ALIAS="private-next-pages",DOT_NEXT_ALIAS="private-dot-next",ROOT_DIR_ALIAS="private-next-root-dir",APP_DIR_ALIAS="private-next-app-dir",RSC_MOD_REF_PROXY_ALIAS="private-next-rsc-mod-ref-proxy",RSC_ACTION_VALIDATE_ALIAS="private-next-rsc-action-validate",RSC_ACTION_PROXY_ALIAS="private-next-rsc-server-reference",RSC_CACHE_WRAPPER_ALIAS="private-next-rsc-cache-wrapper",RSC_DYNAMIC_IMPORT_WRAPPER_ALIAS="private-next-rsc-track-dynamic-import",RSC_ACTION_ENCRYPTION_ALIAS="private-next-rsc-action-encryption",RSC_ACTION_CLIENT_WRAPPER_ALIAS="private-next-rsc-action-client-wrapper",PUBLIC_DIR_MIDDLEWARE_CONFLICT="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",SSG_GET_INITIAL_PROPS_CONFLICT="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",SERVER_PROPS_GET_INIT_PROPS_CONFLICT="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",SERVER_PROPS_SSG_CONFLICT="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",SERVER_PROPS_EXPORT_ERROR="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",GSP_NO_RETURNED_VALUE="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",GSSP_NO_RETURNED_VALUE="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",UNSTABLE_REVALIDATE_RENAME_ERROR="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",GSSP_COMPONENT_MEMBER_ERROR="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",NON_STANDARD_NODE_ENV='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',SSG_FALLBACK_EXPORT_ERROR="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",ESLINT_DEFAULT_DIRS=["app","pages","components","lib","src"],SERVER_RUNTIME={},WEB_SOCKET_MAX_RECONNECTIONS=12,WEBPACK_LAYERS_NAMES={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"},WEBPACK_LAYERS={...WEBPACK_LAYERS_NAMES,GROUP:{builtinReact:[WEBPACK_LAYERS_NAMES.reactServerComponents,WEBPACK_LAYERS_NAMES.actionBrowser],serverOnly:[WEBPACK_LAYERS_NAMES.reactServerComponents,WEBPACK_LAYERS_NAMES.actionBrowser,WEBPACK_LAYERS_NAMES.instrument,WEBPACK_LAYERS_NAMES.middleware],neutralTarget:[WEBPACK_LAYERS_NAMES.apiNode,WEBPACK_LAYERS_NAMES.apiEdge],clientOnly:[WEBPACK_LAYERS_NAMES.serverSideRendering,WEBPACK_LAYERS_NAMES.appPagesBrowser],bundled:[WEBPACK_LAYERS_NAMES.reactServerComponents,WEBPACK_LAYERS_NAMES.actionBrowser,WEBPACK_LAYERS_NAMES.serverSideRendering,WEBPACK_LAYERS_NAMES.appPagesBrowser,WEBPACK_LAYERS_NAMES.shared,WEBPACK_LAYERS_NAMES.instrument,WEBPACK_LAYERS_NAMES.middleware],appPages:[WEBPACK_LAYERS_NAMES.reactServerComponents,WEBPACK_LAYERS_NAMES.serverSideRendering,WEBPACK_LAYERS_NAMES.appPagesBrowser,WEBPACK_LAYERS_NAMES.actionBrowser]}},WEBPACK_RESOURCE_QUERIES={};function fromNodeOutgoingHttpHeaders(e){let t=new Headers;for(let[r,n]of Object.entries(e))for(let e of Array.isArray(n)?n:[n])void 0!==e&&("number"==typeof e&&(e=e.toString()),t.append(r,e));return t}function splitCookiesString(e){var t,r,n,i,a,o=[],s=0;function c(){for(;s<e.length&&/\s/.test(e.charAt(s));)s+=1;return s<e.length}function u(){return"="!==(r=e.charAt(s))&&";"!==r&&","!==r}for(;s<e.length;){for(t=s,a=!1;c();)if(","===(r=e.charAt(s))){for(n=s,s+=1,c(),i=s;s<e.length&&u();)s+=1;s<e.length&&"="===e.charAt(s)?(a=!0,s=i,o.push(e.substring(t,n)),t=s):s=n+1}else s+=1;(!a||s>=e.length)&&o.push(e.substring(t,e.length))}return o}function toNodeOutgoingHttpHeaders(e){let t={},r=[];if(e)for(let[n,i]of e.entries())"set-cookie"===n.toLowerCase()?(r.push(...splitCookiesString(i)),t[n]=1===r.length?r[0]:r):t[n]=i;return t}function validateURL(e){try{return String(new URL(String(e)))}catch(t){throw Object.defineProperty(Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}function normalizeNextQueryParam(e){for(let t of[NEXT_QUERY_PARAM_PREFIX,NEXT_INTERCEPTION_MARKER_PREFIX])if(e!==t&&e.startsWith(t))return e.substring(t.length);return null}let responseSymbol=Symbol("response"),passThroughSymbol=Symbol("passThrough"),waitUntilSymbol=Symbol("waitUntil");class FetchEvent{constructor(e,t){this[passThroughSymbol]=!1,this[waitUntilSymbol]=t?{kind:"external",function:t}:{kind:"internal",promises:[]}}respondWith(e){this[responseSymbol]||(this[responseSymbol]=Promise.resolve(e))}passThroughOnException(){this[passThroughSymbol]=!0}waitUntil(e){if("external"===this[waitUntilSymbol].kind)return(0,this[waitUntilSymbol].function)(e);this[waitUntilSymbol].promises.push(e)}}function getWaitUntilPromiseFromEvent(e){return"internal"===e[waitUntilSymbol].kind?Promise.all(e[waitUntilSymbol].promises).then(()=>{}):void 0}class NextFetchEvent extends FetchEvent{constructor(e){var t;super(e.request,null==(t=e.context)?void 0:t.waitUntil),this.sourcePage=e.page}get request(){throw Object.defineProperty(new PageSignatureError({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}respondWith(){throw Object.defineProperty(new PageSignatureError({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}}function detectDomainLocale(e,t,r){if(e){for(let n of(r&&(r=r.toLowerCase()),e))if(t===n.domain?.split(":",1)[0].toLowerCase()||r===n.defaultLocale.toLowerCase()||n.locales?.some(e=>e.toLowerCase()===r))return n}}function removeTrailingSlash(e){return e.replace(/\/$/,"")||"/"}function parsePath(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}function addPathPrefix(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:i}=parsePath(e);return`${t}${r}${n}${i}`}function addPathSuffix(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:i}=parsePath(e);return`${r}${t}${n}${i}`}function pathHasPrefix(e,t){if("string"!=typeof e)return!1;let{pathname:r}=parsePath(e);return r===t||r.startsWith(t+"/")}function addLocale(e,t,r,n){if(!t||t===r)return e;let i=e.toLowerCase();return!n&&(pathHasPrefix(i,"/api")||pathHasPrefix(i,`/${t.toLowerCase()}`))?e:addPathPrefix(e,`/${t}`)}function formatNextPathnameInfo(e){let t=addLocale(e.pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix);return(e.buildId||!e.trailingSlash)&&(t=removeTrailingSlash(t)),e.buildId&&(t=addPathSuffix(addPathPrefix(t,`/_next/data/${e.buildId}`),"/"===e.pathname?"index.json":".json")),t=addPathPrefix(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:addPathSuffix(t,"/"):removeTrailingSlash(t)}function getHostname(e,t){let r;if(t?.host&&!Array.isArray(t.host))r=t.host.toString().split(":",1)[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}let cache=new WeakMap;function normalizeLocalePath(e,t){let r;if(!t)return{pathname:e};let n=cache.get(t);n||(n=t.map(e=>e.toLowerCase()),cache.set(t,n));let i=e.split("/",2);if(!i[1])return{pathname:e};let a=i[1].toLowerCase(),o=n.indexOf(a);return o<0?{pathname:e}:(r=t[o],{pathname:e=e.slice(r.length+1)||"/",detectedLocale:r})}function removePathPrefix(e,t){if(!pathHasPrefix(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:`/${r}`}function getNextPathnameInfo(e,t){let{basePath:r,i18n:n,trailingSlash:i}=t.nextConfig??{},a={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):i};r&&pathHasPrefix(a.pathname,r)&&(a.pathname=removePathPrefix(a.pathname,r),a.basePath=r);let o=a.pathname;if(a.pathname.startsWith("/_next/data/")&&a.pathname.endsWith(".json")){let e=a.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");a.buildId=e[0],o="index"!==e[1]?`/${e.slice(1).join("/")}`:"/",!0===t.parseData&&(a.pathname=o)}if(n){let e=t.i18nProvider?t.i18nProvider.analyze(a.pathname):normalizeLocalePath(a.pathname,n.locales);a.locale=e.detectedLocale,a.pathname=e.pathname??a.pathname,!e.detectedLocale&&a.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(o):normalizeLocalePath(o,n.locales)).detectedLocale&&(a.locale=e.detectedLocale)}return a}let REGEX_LOCALHOST_HOSTNAME=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function parseURL(e,t){return new URL(String(e).replace(REGEX_LOCALHOST_HOSTNAME,"localhost"),t&&String(t).replace(REGEX_LOCALHOST_HOSTNAME,"localhost"))}let Internal=Symbol("NextURLInternal");class NextURL{constructor(e,t,r){let n,i;"object"==typeof t&&"pathname"in t||"string"==typeof t?(n=t,i=r||{}):i=r||t||{},this[Internal]={url:parseURL(e,n??i.base),options:i,basePath:""},this.analyze()}analyze(){var e,t,r,n,i;let a=getNextPathnameInfo(this[Internal].url.pathname,{nextConfig:this[Internal].options.nextConfig,parseData:!0,i18nProvider:this[Internal].options.i18nProvider}),o=getHostname(this[Internal].url,this[Internal].options.headers);this[Internal].domainLocale=this[Internal].options.i18nProvider?this[Internal].options.i18nProvider.detectDomainLocale(o):detectDomainLocale(null==(t=this[Internal].options.nextConfig)||null==(e=t.i18n)?void 0:e.domains,o);let s=(null==(r=this[Internal].domainLocale)?void 0:r.defaultLocale)||(null==(i=this[Internal].options.nextConfig)||null==(n=i.i18n)?void 0:n.defaultLocale);this[Internal].url.pathname=a.pathname,this[Internal].defaultLocale=s,this[Internal].basePath=a.basePath??"",this[Internal].buildId=a.buildId,this[Internal].locale=a.locale??s,this[Internal].trailingSlash=a.trailingSlash}formatPathname(){return formatNextPathnameInfo({basePath:this[Internal].basePath,buildId:this[Internal].buildId,defaultLocale:this[Internal].options.forceLocale?void 0:this[Internal].defaultLocale,locale:this[Internal].locale,pathname:this[Internal].url.pathname,trailingSlash:this[Internal].trailingSlash})}formatSearch(){return this[Internal].url.search}get buildId(){return this[Internal].buildId}set buildId(e){this[Internal].buildId=e}get locale(){return this[Internal].locale??""}set locale(e){var t,r;if(!this[Internal].locale||!(null==(r=this[Internal].options.nextConfig)||null==(t=r.i18n)?void 0:t.locales.includes(e)))throw Object.defineProperty(TypeError(`The NextURL configuration includes no locale "${e}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[Internal].locale=e}get defaultLocale(){return this[Internal].defaultLocale}get domainLocale(){return this[Internal].domainLocale}get searchParams(){return this[Internal].url.searchParams}get host(){return this[Internal].url.host}set host(e){this[Internal].url.host=e}get hostname(){return this[Internal].url.hostname}set hostname(e){this[Internal].url.hostname=e}get port(){return this[Internal].url.port}set port(e){this[Internal].url.port=e}get protocol(){return this[Internal].url.protocol}set protocol(e){this[Internal].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[Internal].url=parseURL(e),this.analyze()}get origin(){return this[Internal].url.origin}get pathname(){return this[Internal].url.pathname}set pathname(e){this[Internal].url.pathname=e}get hash(){return this[Internal].url.hash}set hash(e){this[Internal].url.hash=e}get search(){return this[Internal].url.search}set search(e){this[Internal].url.search=e}get password(){return this[Internal].url.password}set password(e){this[Internal].url.password=e}get username(){return this[Internal].url.username}set username(e){this[Internal].url.username=e}get basePath(){return this[Internal].basePath}set basePath(e){this[Internal].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new NextURL(String(this),this[Internal].options)}}var __TURBOPACK__imported__module__9254__=__turbopack_context__.i(9254),__TURBOPACK__imported__module__9254__1=__TURBOPACK__imported__module__9254__;let INTERNALS=Symbol("internal request");class NextRequest extends Request{constructor(e,t={}){const r="string"!=typeof e&&"url"in e?e.url:String(e);validateURL(r),t.body&&"half"!==t.duplex&&(t.duplex="half"),e instanceof Request?super(e,t):super(r,t);const n=new NextURL(r,{headers:toNodeOutgoingHttpHeaders(this.headers),nextConfig:t.nextConfig});this[INTERNALS]={cookies:new __TURBOPACK__imported__module__9254__1.RequestCookies(this.headers),nextUrl:n,url:n.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[INTERNALS].cookies}get nextUrl(){return this[INTERNALS].nextUrl}get page(){throw new RemovedPageError}get ua(){throw new RemovedUAError}get url(){return this[INTERNALS].url}}var __TURBOPACK__imported__module__9254__2=__TURBOPACK__imported__module__9254__;class ReflectAdapter{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}let INTERNALS1=Symbol("internal response"),REDIRECTS=new Set([301,302,303,307,308]);function handleMiddlewareField(e,t){var r;if(null==e||null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let r=[];for(let[n,i]of e.request.headers)t.set("x-middleware-request-"+n,i),r.push(n);t.set("x-middleware-override-headers",r.join(","))}}class NextResponse extends Response{constructor(e,t={}){super(e,t);const r=this.headers,n=new Proxy(new __TURBOPACK__imported__module__9254__2.ResponseCookies(r),{get(e,n,i){switch(n){case"delete":case"set":return(...i)=>{let a=Reflect.apply(e[n],e,i),o=new Headers(r);return a instanceof __TURBOPACK__imported__module__9254__2.ResponseCookies&&r.set("x-middleware-set-cookie",a.getAll().map(e=>(0,__TURBOPACK__imported__module__9254__2.stringifyCookie)(e)).join(",")),handleMiddlewareField(t,o),a};default:return ReflectAdapter.get(e,n,i)}}});this[INTERNALS1]={cookies:n,url:t.url?new NextURL(t.url,{headers:toNodeOutgoingHttpHeaders(r),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[INTERNALS1].cookies}static json(e,t){let r=Response.json(e,t);return new NextResponse(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!REDIRECTS.has(r))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let n="object"==typeof t?t:{},i=new Headers(null==n?void 0:n.headers);return i.set("Location",validateURL(e)),new NextResponse(null,{...n,headers:i,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",validateURL(e)),handleMiddlewareField(t,r),new NextResponse(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),handleMiddlewareField(e,t),new NextResponse(null,{...e,headers:t})}}function parseRelativeURL(e,t){let r="string"==typeof t?new URL(t):t,n=new URL(e,t),i=n.origin===r.origin;return{url:i?n.toString().slice(r.origin.length):n.toString(),isRelative:i}}function getRelativeURL(e,t){return parseRelativeURL(e,t).url}let RSC_HEADER="rsc",ACTION_HEADER="next-action",NEXT_ROUTER_STATE_TREE_HEADER="next-router-state-tree",NEXT_ROUTER_PREFETCH_HEADER="next-router-prefetch",NEXT_ROUTER_SEGMENT_PREFETCH_HEADER="next-router-segment-prefetch",NEXT_HMR_REFRESH_HEADER="next-hmr-refresh",NEXT_HMR_REFRESH_HASH_COOKIE="__next_hmr_refresh_hash__",NEXT_URL="next-url",RSC_CONTENT_TYPE_HEADER="text/x-component",FLIGHT_HEADERS=[RSC_HEADER,NEXT_ROUTER_STATE_TREE_HEADER,NEXT_ROUTER_PREFETCH_HEADER,NEXT_HMR_REFRESH_HEADER,NEXT_ROUTER_SEGMENT_PREFETCH_HEADER],NEXT_RSC_UNION_QUERY="_rsc",NEXT_ROUTER_STALE_TIME_HEADER="x-nextjs-stale-time",NEXT_DID_POSTPONE_HEADER="x-nextjs-postponed",NEXT_REWRITTEN_PATH_HEADER="x-nextjs-rewritten-path",NEXT_REWRITTEN_QUERY_HEADER="x-nextjs-rewritten-query",NEXT_IS_PRERENDER_HEADER="x-nextjs-prerender",NEXT_ACTION_NOT_FOUND_HEADER="x-nextjs-action-not-found",NEXT_REQUEST_ID_HEADER="x-nextjs-request-id",NEXT_HTML_REQUEST_ID_HEADER="x-nextjs-html-request-id",NEXT_ACTION_REVALIDATED_HEADER="x-action-revalidated",INTERNAL_QUERY_NAMES=[NEXT_RSC_UNION_QUERY];function stripInternalQueries(e){for(let t of INTERNAL_QUERY_NAMES)delete e[t]}function stripInternalSearchParams(e){let t="string"==typeof e,r=t?new URL(e):e;return r.searchParams.delete(NEXT_RSC_UNION_QUERY),t?r.toString():r}function ensureLeadingSlash(e){return e.startsWith("/")?e:`/${e}`}function getSegmentValue(e){return Array.isArray(e)?e[1]:e}function isGroupSegment(e){return"("===e[0]&&e.endsWith(")")}function isParallelRouteSegment(e){return e.startsWith("@")&&"@children"!==e}function addSearchParamsIfPageSegment(e,t){if(e.includes(PAGE_SEGMENT_KEY)){let e=JSON.stringify(t);return"{}"!==e?PAGE_SEGMENT_KEY+"?"+e:PAGE_SEGMENT_KEY}return e}function computeSelectedLayoutSegment(e,t){if(!e||0===e.length)return null;let r="children"===t?e[0]:e[e.length-1];return r===DEFAULT_SEGMENT_KEY?null:r}function getSelectedLayoutSegmentPath(e,t,r=!0,n=[]){let i;if(r)i=e[1][t];else{let t=e[1];i=t.children??Object.values(t)[0]}if(!i)return n;let a=getSegmentValue(i[0]);return!a||a.startsWith(PAGE_SEGMENT_KEY)?n:(n.push(a),getSelectedLayoutSegmentPath(i,t,!1,n))}let PAGE_SEGMENT_KEY="__PAGE__",DEFAULT_SEGMENT_KEY="__DEFAULT__",NOT_FOUND_SEGMENT_KEY="/_not-found";function normalizeAppPath(e){return ensureLeadingSlash(e.split("/").reduce((e,t,r,n)=>!t||isGroupSegment(t)||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:`${e}/${t}`,""))}function normalizeRscURL(e){return e.replace(/\.rsc($|\?)/,"$1")}class ReadonlyHeadersError extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new ReadonlyHeadersError}}class HeadersAdapter extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,n){if("symbol"==typeof r)return ReflectAdapter.get(t,r,n);let i=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===i);if(void 0!==a)return ReflectAdapter.get(t,a,n)},set(t,r,n,i){if("symbol"==typeof r)return ReflectAdapter.set(t,r,n,i);let a=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===a);return ReflectAdapter.set(t,o??r,n,i)},has(t,r){if("symbol"==typeof r)return ReflectAdapter.has(t,r);let n=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0!==i&&ReflectAdapter.has(t,i)},deleteProperty(t,r){if("symbol"==typeof r)return ReflectAdapter.deleteProperty(t,r);let n=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0===i||ReflectAdapter.deleteProperty(t,i)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return ReadonlyHeadersError.callable;default:return ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new HeadersAdapter(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}var __TURBOPACK__imported__module__9254__3=__TURBOPACK__imported__module__9254__,__TURBOPACK__imported__module__56704__=__turbopack_context__.i(56704);let ActionDidNotRevalidate=0,ActionDidRevalidateStaticAndDynamic=1,ActionDidRevalidateDynamicOnly=2;class ReadonlyRequestCookiesError extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new ReadonlyRequestCookiesError}}class RequestCookiesAdapter{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return ReadonlyRequestCookiesError.callable;default:return ReflectAdapter.get(e,t,r)}}})}}let SYMBOL_MODIFY_COOKIE_VALUES=Symbol.for("next.mutated.cookies");function getModifiedCookieValues(e){let t=e[SYMBOL_MODIFY_COOKIE_VALUES];return t&&Array.isArray(t)&&0!==t.length?t:[]}function appendMutableCookies(e,t){let r=getModifiedCookieValues(t);if(0===r.length)return!1;let n=new __TURBOPACK__imported__module__9254__3.ResponseCookies(e),i=n.getAll();for(let e of r)n.set(e);for(let e of i)n.set(e);return!0}class MutableRequestCookiesAdapter{static wrap(e,t){let r=new __TURBOPACK__imported__module__9254__3.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let n=[],i=new Set,a=()=>{let e=__TURBOPACK__imported__module__56704__.workAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=ActionDidRevalidateStaticAndDynamic),n=r.getAll().filter(e=>i.has(e.name)),t){let e=[];for(let t of n){let r=new __TURBOPACK__imported__module__9254__3.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}},o=new Proxy(r,{get(e,t,r){switch(t){case SYMBOL_MODIFY_COOKIE_VALUES:return n;case"delete":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.delete(...t),o}finally{a()}};case"set":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t),o}finally{a()}};default:return ReflectAdapter.get(e,t,r)}}});return o}}function createCookiesWithMutableAccessCheck(e){let t=new Proxy(e.mutableCookies,{get(r,n,i){switch(n){case"delete":return function(...n){return ensureCookiesAreStillMutable(e,"cookies().delete"),r.delete(...n),t};case"set":return function(...n){return ensureCookiesAreStillMutable(e,"cookies().set"),r.set(...n),t};default:return ReflectAdapter.get(r,n,i)}}});return t}function areCookiesMutableInCurrentPhase(e){return"action"===e.phase}function ensureCookiesAreStillMutable(e,t){if(!areCookiesMutableInCurrentPhase(e))throw new ReadonlyRequestCookiesError}function responseCookiesToRequestCookies(e){let t=new __TURBOPACK__imported__module__9254__3.RequestCookies(new Headers);for(let r of e.getAll())t.set(r);return t}var __TURBOPACK__imported__module__9254__4=__TURBOPACK__imported__module__9254__,BaseServerSpan=function(e){return e.handleRequest="BaseServer.handleRequest",e.run="BaseServer.run",e.pipe="BaseServer.pipe",e.getStaticHTML="BaseServer.getStaticHTML",e.render="BaseServer.render",e.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",e.renderToResponse="BaseServer.renderToResponse",e.renderToHTML="BaseServer.renderToHTML",e.renderError="BaseServer.renderError",e.renderErrorToResponse="BaseServer.renderErrorToResponse",e.renderErrorToHTML="BaseServer.renderErrorToHTML",e.render404="BaseServer.render404",e}(BaseServerSpan||{}),LoadComponentsSpan=function(e){return e.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",e.loadComponents="LoadComponents.loadComponents",e}(LoadComponentsSpan||{}),NextServerSpan=function(e){return e.getRequestHandler="NextServer.getRequestHandler",e.getRequestHandlerWithMetadata="NextServer.getRequestHandlerWithMetadata",e.getServer="NextServer.getServer",e.getServerRequestHandler="NextServer.getServerRequestHandler",e.createServer="createServer.createServer",e}(NextServerSpan||{}),NextNodeServerSpan=function(e){return e.compression="NextNodeServer.compression",e.getBuildId="NextNodeServer.getBuildId",e.createComponentTree="NextNodeServer.createComponentTree",e.clientComponentLoading="NextNodeServer.clientComponentLoading",e.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",e.generateStaticRoutes="NextNodeServer.generateStaticRoutes",e.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",e.generatePublicRoutes="NextNodeServer.generatePublicRoutes",e.generateImageRoutes="NextNodeServer.generateImageRoutes.route",e.sendRenderResult="NextNodeServer.sendRenderResult",e.proxyRequest="NextNodeServer.proxyRequest",e.runApi="NextNodeServer.runApi",e.render="NextNodeServer.render",e.renderHTML="NextNodeServer.renderHTML",e.imageOptimizer="NextNodeServer.imageOptimizer",e.getPagePath="NextNodeServer.getPagePath",e.getRoutesManifest="NextNodeServer.getRoutesManifest",e.findPageComponents="NextNodeServer.findPageComponents",e.getFontManifest="NextNodeServer.getFontManifest",e.getServerComponentManifest="NextNodeServer.getServerComponentManifest",e.getRequestHandler="NextNodeServer.getRequestHandler",e.renderToHTML="NextNodeServer.renderToHTML",e.renderError="NextNodeServer.renderError",e.renderErrorToHTML="NextNodeServer.renderErrorToHTML",e.render404="NextNodeServer.render404",e.startResponse="NextNodeServer.startResponse",e.route="route",e.onProxyReq="onProxyReq",e.apiResolver="apiResolver",e.internalFetch="internalFetch",e}(NextNodeServerSpan||{}),StartServerSpan=function(e){return e.startServer="startServer.startServer",e}(StartServerSpan||{}),RenderSpan=function(e){return e.getServerSideProps="Render.getServerSideProps",e.getStaticProps="Render.getStaticProps",e.renderToString="Render.renderToString",e.renderDocument="Render.renderDocument",e.createBodyResult="Render.createBodyResult",e}(RenderSpan||{}),AppRenderSpan=function(e){return e.renderToString="AppRender.renderToString",e.renderToReadableStream="AppRender.renderToReadableStream",e.getBodyResult="AppRender.getBodyResult",e.fetch="AppRender.fetch",e}(AppRenderSpan||{}),RouterSpan=function(e){return e.executeRoute="Router.executeRoute",e}(RouterSpan||{}),NodeSpan=function(e){return e.runHandler="Node.runHandler",e}(NodeSpan||{}),AppRouteRouteHandlersSpan=function(e){return e.runHandler="AppRouteRouteHandlers.runHandler",e}(AppRouteRouteHandlersSpan||{}),ResolveMetadataSpan=function(e){return e.generateMetadata="ResolveMetadata.generateMetadata",e.generateViewport="ResolveMetadata.generateViewport",e}(ResolveMetadataSpan||{}),MiddlewareSpan=function(e){return e.execute="Middleware.execute",e}(MiddlewareSpan||{});let NextVanillaSpanAllowlist=new Set(["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"]),LogSpanAllowList=new Set(["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"]);function isThenable(e){return null!==e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then}let NEXT_OTEL_PERFORMANCE_PREFIX=process.env.NEXT_OTEL_PERFORMANCE_PREFIX;try{api=__turbopack_context__.r(70406)}catch(err){api=__turbopack_context__.r(31387)}let{context,propagation,trace,SpanStatusCode,SpanKind,ROOT_CONTEXT}=api;class BubbledError extends Error{constructor(e,t){super(),this.bubble=e,this.result=t}}function isBubbledError(e){return"object"==typeof e&&null!==e&&e instanceof BubbledError}let closeSpanWithError=(e,t)=>{isBubbledError(t)&&t.bubble?e.setAttribute("next.bubble",!0):(t&&(e.recordException(t),e.setAttribute("error.type",t.name)),e.setStatus({code:SpanStatusCode.ERROR,message:null==t?void 0:t.message})),e.end()},rootSpanAttributesStore=new Map,rootSpanIdKey=api.createContextKey("next.rootSpanId"),lastSpanId=0,getSpanId=()=>lastSpanId++,clientTraceDataSetter={set(e,t,r){e.push({key:t,value:r})}};class NextTracerImpl{getTracerInstance(){return trace.getTracer("next.js","0.0.1")}getContext(){return context}getTracePropagationData(){let e=context.active(),t=[];return propagation.inject(e,t,clientTraceDataSetter),t}getActiveScopeSpan(){return trace.getSpan(null==context?void 0:context.active())}withPropagatedContext(e,t,r){let n=context.active();if(trace.getSpanContext(n))return t();let i=propagation.extract(n,e,r);return context.with(i,t)}trace(...e){let[t,r,n]=e,{fn:i,options:a}="function"==typeof r?{fn:r,options:{}}:{fn:n,options:{...r}},o=a.spanName??t;if(!NextVanillaSpanAllowlist.has(t)&&"1"!==process.env.NEXT_OTEL_VERBOSE||a.hideSpan)return i();let s=this.getSpanContext((null==a?void 0:a.parentSpan)??this.getActiveScopeSpan());s||(s=(null==context?void 0:context.active())??ROOT_CONTEXT);let c=s.getValue(rootSpanIdKey),u="number"!=typeof c||!rootSpanAttributesStore.has(c),l=getSpanId();return a.attributes={"next.span_name":o,"next.span_type":t,...a.attributes},context.with(s.setValue(rootSpanIdKey,l),()=>this.getTracerInstance().startActiveSpan(o,a,e=>{let r;NEXT_OTEL_PERFORMANCE_PREFIX&&t&&LogSpanAllowList.has(t)&&(r="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0);let n=!1,o=()=>{!n&&(n=!0,rootSpanAttributesStore.delete(l),r&&performance.measure(`${NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(t.split(".").pop()||"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}`,{start:r,end:performance.now()}))};if(u&&rootSpanAttributesStore.set(l,new Map(Object.entries(a.attributes??{}))),i.length>1)try{return i(e,t=>closeSpanWithError(e,t))}catch(t){throw closeSpanWithError(e,t),t}finally{o()}try{let t=i(e);if(isThenable(t))return t.then(t=>(e.end(),t)).catch(t=>{throw closeSpanWithError(e,t),t}).finally(o);return e.end(),o(),t}catch(t){throw closeSpanWithError(e,t),o(),t}}))}wrap(...e){let t=this,[r,n,i]=3===e.length?e:[e[0],{},e[1]];return NextVanillaSpanAllowlist.has(r)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let e=n;"function"==typeof e&&"function"==typeof i&&(e=e.apply(this,arguments));let a=arguments.length-1,o=arguments[a];if("function"!=typeof o)return t.trace(r,e,()=>i.apply(this,arguments));{let n=t.getContext().bind(context.active(),o);return t.trace(r,e,(e,t)=>(arguments[a]=function(e){return null==t||t(e),n.apply(this,arguments)},i.apply(this,arguments)))}}:i}startSpan(...e){let[t,r]=e,n=this.getSpanContext((null==r?void 0:r.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(t,r,n)}getSpanContext(e){return e?trace.setSpan(context.active(),e):void 0}getRootSpanAttributes(){let e=context.active().getValue(rootSpanIdKey);return rootSpanAttributesStore.get(e)}setRootSpanAttribute(e,t){let r=context.active().getValue(rootSpanIdKey),n=rootSpanAttributesStore.get(r);n&&!n.has(e)&&n.set(e,t)}withSpan(e,t){let r=trace.setSpan(context.active(),e);return context.with(r,t)}}let getTracer=(()=>{let e=new NextTracerImpl;return()=>e})();function wrapApiHandler(e,t){return(...r)=>(getTracer().setRootSpanAttribute("next.route",e),getTracer().trace(NodeSpan.runHandler,{spanName:`executing api route (pages) ${e}`},()=>t(...r)))}function sendStatusCode(e,t){return e.statusCode=t,e}function redirect(e,t,r){if("string"==typeof t&&(r=t,t=307),"number"!=typeof t||"string"!=typeof r)throw Object.defineProperty(Error("Invalid redirect arguments. Please use a single argument URL, e.g. res.redirect('/destination') or use a status code and URL, e.g. res.redirect(307, '/destination')."),"__NEXT_ERROR_CODE",{value:"E389",enumerable:!1,configurable:!0});return e.writeHead(t,{Location:r}),e.write(r),e.end(),e}function checkIsOnDemandRevalidate(e,t){let r=HeadersAdapter.from(e.headers);return{isOnDemandRevalidate:r.get(PRERENDER_REVALIDATE_HEADER)===t.previewModeId,revalidateOnlyGenerated:r.has(PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER)}}let COOKIE_NAME_PRERENDER_BYPASS="__prerender_bypass",COOKIE_NAME_PRERENDER_DATA="__next_preview_data",RESPONSE_LIMIT_DEFAULT=4194304,SYMBOL_PREVIEW_DATA=Symbol(COOKIE_NAME_PRERENDER_DATA),SYMBOL_CLEARED_COOKIES=Symbol(COOKIE_NAME_PRERENDER_BYPASS);function clearPreviewData(e,t={}){if(SYMBOL_CLEARED_COOKIES in e)return e;let{serialize:r}=__turbopack_context__.r(62712),n=e.getHeader("Set-Cookie");return e.setHeader("Set-Cookie",[..."string"==typeof n?[n]:Array.isArray(n)?n:[],r(COOKIE_NAME_PRERENDER_BYPASS,"",{expires:new Date(0),httpOnly:!0,sameSite:"none",secure:!0,path:"/",...void 0!==t.path?{path:t.path}:void 0}),r(COOKIE_NAME_PRERENDER_DATA,"",{expires:new Date(0),httpOnly:!0,sameSite:"none",secure:!0,path:"/",...void 0!==t.path?{path:t.path}:void 0})]),Object.defineProperty(e,SYMBOL_CLEARED_COOKIES,{value:!0,enumerable:!1}),e}class ApiError extends Error{constructor(e,t){super(t),this.statusCode=e}}function sendError(e,t,r){e.statusCode=t,e.statusMessage=r,e.end(r)}function setLazyProp({req:e},t,r){let n={configurable:!0,enumerable:!0},i={...n,writable:!0};Object.defineProperty(e,t,{...n,get:()=>{let n=r();return Object.defineProperty(e,t,{...i,value:n}),n},set:r=>{Object.defineProperty(e,t,{...i,value:r})}})}class DraftModeProvider{constructor(e,t,r,n){var i;const a=e&&checkIsOnDemandRevalidate(t,e).isOnDemandRevalidate,o=null==(i=r.get(COOKIE_NAME_PRERENDER_BYPASS))?void 0:i.value;this._isEnabled=!!(!a&&o&&e&&o===e.previewModeId),this._previewModeId=null==e?void 0:e.previewModeId,this._mutableCookies=n}get isEnabled(){return this._isEnabled}enable(){if(!this._previewModeId)throw Object.defineProperty(Error("Invariant: previewProps missing previewModeId this should never happen"),"__NEXT_ERROR_CODE",{value:"E93",enumerable:!1,configurable:!0});this._mutableCookies.set({name:COOKIE_NAME_PRERENDER_BYPASS,value:this._previewModeId,httpOnly:!0,sameSite:"none",secure:!0,path:"/"}),this._isEnabled=!0}disable(){this._mutableCookies.set({name:COOKIE_NAME_PRERENDER_BYPASS,value:"",httpOnly:!0,sameSite:"none",secure:!0,path:"/",expires:new Date(0)}),this._isEnabled=!1}}function getHeaders(e){let t=HeadersAdapter.from(e);for(let e of FLIGHT_HEADERS)t.delete(e);return HeadersAdapter.seal(t)}function getMutableCookies(e,t){let r=new __TURBOPACK__imported__module__9254__4.RequestCookies(HeadersAdapter.from(e));return MutableRequestCookiesAdapter.wrap(r,t)}function mergeMiddlewareCookies(e,t){if("x-middleware-set-cookie"in e.headers&&"string"==typeof e.headers["x-middleware-set-cookie"]){let r=e.headers["x-middleware-set-cookie"],n=new Headers;for(let e of splitCookiesString(r))n.append("set-cookie",e);for(let e of new __TURBOPACK__imported__module__9254__4.ResponseCookies(n).getAll())t.set(e)}}function createRequestStoreForRender(e,t,r,n,i,a,o,s,c,u,l){return createRequestStoreImpl("render",e,t,r,n,i,a,u,o,s,c,l)}function createRequestStoreForAPI(e,t,r,n,i){return createRequestStoreImpl("action",e,void 0,t,{},r,n,null,i,!1,void 0,null)}function createRequestStoreImpl(e,t,r,n,i,a,o,s,c,u,l,d){function p(e){r&&r.setHeader("Set-Cookie",e)}let h={};return{type:"request",phase:e,implicitTags:a,url:{pathname:n.pathname,search:n.search??""},rootParams:i,get headers(){return h.headers||(h.headers=getHeaders(t.headers)),h.headers},get cookies(){if(!h.cookies){let e=new __TURBOPACK__imported__module__9254__4.RequestCookies(HeadersAdapter.from(t.headers));mergeMiddlewareCookies(t,e),h.cookies=RequestCookiesAdapter.seal(e)}return h.cookies},set cookies(value){h.cookies=value},get mutableCookies(){if(!h.mutableCookies){let e=getMutableCookies(t.headers,o||(r?p:void 0));mergeMiddlewareCookies(t,e),h.mutableCookies=e}return h.mutableCookies},get userspaceMutableCookies(){return h.userspaceMutableCookies||(h.userspaceMutableCookies=createCookiesWithMutableAccessCheck(this)),h.userspaceMutableCookies},get draftMode(){return h.draftMode||(h.draftMode=new DraftModeProvider(c,t,this.cookies,this.mutableCookies)),h.draftMode},renderResumeDataCache:s??null,isHmrRefresh:u,serverComponentsHmrCache:l||globalThis.__serverComponentsHmrCache,devFallbackParams:d}}function synchronizeMutableCookies(e){e.cookies=RequestCookiesAdapter.seal(responseCookiesToRequestCookies(e.mutableCookies))}var __TURBOPACK__imported__module__32319__=__turbopack_context__.i(32319),__TURBOPACK__imported__module__47413__=__turbopack_context__.i(47413);class InvariantError extends Error{constructor(e,t){super(`Invariant: ${e.endsWith(".")?e:e+"."} This is a bug in Next.js.`,t),this.name="InvariantError"}}var __TURBOPACK__imported__module__56704__1=__TURBOPACK__imported__module__56704__;class LRUNode{constructor(e,t,r){this.prev=null,this.next=null,this.key=e,this.data=t,this.size=r}}class SentinelNode{constructor(){this.prev=null,this.next=null}}class LRUCache{constructor(e,t,r){this.cache=new Map,this.totalSize=0,this.maxSize=e,this.calculateSize=t,this.onEvict=r,this.head=new SentinelNode,this.tail=new SentinelNode,this.head.next=this.tail,this.tail.prev=this.head}addToHead(e){e.prev=this.head,e.next=this.head.next,this.head.next.prev=e,this.head.next=e}removeNode(e){e.prev.next=e.next,e.next.prev=e.prev}moveToHead(e){this.removeNode(e),this.addToHead(e)}removeTail(){let e=this.tail.prev;return this.removeNode(e),e}set(e,t){let r=(null==this.calculateSize?void 0:this.calculateSize.call(this,t))??1;if(r>this.maxSize)return void console.warn("Single item size exceeds maxSize");let n=this.cache.get(e);if(n)n.data=t,this.totalSize=this.totalSize-n.size+r,n.size=r,this.moveToHead(n);else{let n=new LRUNode(e,t,r);this.cache.set(e,n),this.addToHead(n),this.totalSize+=r}for(;this.totalSize>this.maxSize&&this.cache.size>0;){let e=this.removeTail();this.cache.delete(e.key),this.totalSize-=e.size,null==this.onEvict||this.onEvict.call(this,e.key,e.data)}}has(e){return this.cache.has(e)}get(e){let t=this.cache.get(e);if(t)return this.moveToHead(t),t.data}*[Symbol.iterator](){let e=this.head.next;for(;e&&e!==this.tail;){let t=e;yield[t.key,t.data],e=e.next}}remove(e){let t=this.cache.get(e);t&&(this.removeNode(t),this.cache.delete(e),this.totalSize-=t.size)}get size(){return this.cache.size}get currentSize(){return this.totalSize}}var __TURBOPACK__imported__module__51187__=__turbopack_context__.i(51187);function createDefaultCacheHandler(e){if(0===e)return{get:()=>Promise.resolve(void 0),set:()=>Promise.resolve(),refreshTags:()=>Promise.resolve(),getExpiration:()=>Promise.resolve(0),updateTags:()=>Promise.resolve()};let t=new LRUCache(e,e=>e.size),r=new Map,n=process.env.NEXT_PRIVATE_DEBUG_CACHE?console.debug.bind(console,"DefaultCacheHandler:"):void 0;return{async get(e){let i=r.get(e);i&&(null==n||n("get",e,"pending"),await i);let a=t.get(e);if(!a){null==n||n("get",e,"not found");return}let o=a.entry;if(performance.timeOrigin+performance.now()>o.timestamp+1e3*o.revalidate){null==n||n("get",e,"expired");return}let s=o.revalidate;if((0,__TURBOPACK__imported__module__51187__.areTagsExpired)(o.tags,o.timestamp)){null==n||n("get",e,"had expired tag");return}(0,__TURBOPACK__imported__module__51187__.areTagsStale)(o.tags,o.timestamp)&&(null==n||n("get",e,"had stale tag"),s=-1);let[c,u]=o.value.tee();return o.value=u,null==n||n("get",e,"found",{tags:o.tags,timestamp:o.timestamp,expire:o.expire,revalidate:s}),{...o,revalidate:s,value:c}},async set(e,i){null==n||n("set",e,"start");let a=()=>{},o=new Promise(e=>{a=e});r.set(e,o);let s=await i,c=0;try{let[r,i]=s.value.tee();s.value=r;let a=i.getReader();for(let e;!(e=await a.read()).done;)c+=Buffer.from(e.value).byteLength;t.set(e,{entry:s,isErrored:!1,errorRetryCount:0,size:c}),null==n||n("set",e,"done")}catch(t){null==n||n("set",e,"failed",t)}finally{a(),r.delete(e)}},async refreshTags(){},async getExpiration(e){let t=Math.max(...e.map(e=>{let t=__TURBOPACK__imported__module__51187__.tagsManifest.get(e);return t&&t.expired||0}),0);return null==n||n("getExpiration",{tags:e,expiration:t}),t},async updateTags(e,t){let r=Math.round(performance.timeOrigin+performance.now());for(let i of(null==n||n("updateTags",{tags:e,timestamp:r}),e)){let e=__TURBOPACK__imported__module__51187__.tagsManifest.get(i)||{};if(t){let n={...e};n.stale=r,void 0!==t.expire&&(n.expired=r+1e3*t.expire),__TURBOPACK__imported__module__51187__.tagsManifest.set(i,n)}else __TURBOPACK__imported__module__51187__.tagsManifest.set(i,{...e,expired:r})}}}}let debug=process.env.NEXT_PRIVATE_DEBUG_CACHE?(e,...t)=>{console.log(`use-cache: ${e}`,...t)}:void 0,handlersSymbol=Symbol.for("@next/cache-handlers"),handlersMapSymbol=Symbol.for("@next/cache-handlers-map"),handlersSetSymbol=Symbol.for("@next/cache-handlers-set"),reference=globalThis;function initializeCacheHandlers(e){if(reference[handlersMapSymbol])return null==debug||debug("cache handlers already initialized"),!1;if(null==debug||debug("initializing cache handlers"),reference[handlersMapSymbol]=new Map,reference[handlersSymbol]){let t;reference[handlersSymbol].DefaultCache?(null==debug||debug('setting "default" cache handler from symbol'),t=reference[handlersSymbol].DefaultCache):(null==debug||debug('setting "default" cache handler from default'),t=createDefaultCacheHandler(e)),reference[handlersMapSymbol].set("default",t),reference[handlersSymbol].RemoteCache?(null==debug||debug('setting "remote" cache handler from symbol'),reference[handlersMapSymbol].set("remote",reference[handlersSymbol].RemoteCache)):(null==debug||debug('setting "remote" cache handler from default'),reference[handlersMapSymbol].set("remote",t))}else{let t=createDefaultCacheHandler(e);null==debug||debug('setting "default" cache handler from default'),reference[handlersMapSymbol].set("default",t),null==debug||debug('setting "remote" cache handler from default'),reference[handlersMapSymbol].set("remote",t)}return reference[handlersSetSymbol]=new Set(reference[handlersMapSymbol].values()),!0}function getCacheHandler(e){if(!reference[handlersMapSymbol])throw Object.defineProperty(Error("Cache handlers not initialized"),"__NEXT_ERROR_CODE",{value:"E649",enumerable:!1,configurable:!0});return reference[handlersMapSymbol].get(e)}function getCacheHandlers(){if(reference[handlersSetSymbol])return reference[handlersSetSymbol].values()}function getCacheHandlerEntries(){if(reference[handlersMapSymbol])return reference[handlersMapSymbol].entries()}function setCacheHandler(e,t){if(!reference[handlersMapSymbol]||!reference[handlersSetSymbol])throw Object.defineProperty(Error("Cache handlers not initialized"),"__NEXT_ERROR_CODE",{value:"E649",enumerable:!1,configurable:!0});null==debug||debug('setting cache handler for "%s"',e),reference[handlersMapSymbol].set(e,t),reference[handlersSetSymbol].add(t)}async function withExecuteRevalidates(e,t){if(!e)return t();let r=cloneRevalidationState(e);try{return await t()}finally{let t=diffRevalidationState(r,cloneRevalidationState(e));await executeRevalidates(e,t)}}function cloneRevalidationState(e){return{pendingRevalidatedTags:e.pendingRevalidatedTags?[...e.pendingRevalidatedTags]:[],pendingRevalidates:{...e.pendingRevalidates},pendingRevalidateWrites:e.pendingRevalidateWrites?[...e.pendingRevalidateWrites]:[]}}function diffRevalidationState(e,t){let r=new Set(e.pendingRevalidatedTags.map(e=>{let t="object"==typeof e.profile?JSON.stringify(e.profile):e.profile||"";return`${e.tag}:${t}`})),n=new Set(e.pendingRevalidateWrites);return{pendingRevalidatedTags:t.pendingRevalidatedTags.filter(e=>{let t="object"==typeof e.profile?JSON.stringify(e.profile):e.profile||"";return!r.has(`${e.tag}:${t}`)}),pendingRevalidates:Object.fromEntries(Object.entries(t.pendingRevalidates).filter(([t])=>!(t in e.pendingRevalidates))),pendingRevalidateWrites:t.pendingRevalidateWrites.filter(e=>!n.has(e))}}async function revalidateTags(e,t,r){if(0===e.length)return;let n=getCacheHandlers(),i=[],a=new Map;for(let t of e){let e,r=t.profile;for(let[t]of a)if("string"==typeof t&&"string"==typeof r&&t===r||"object"==typeof t&&"object"==typeof r&&JSON.stringify(t)===JSON.stringify(r)||t===r){e=t;break}let n=e||r;a.has(n)||a.set(n,[]),a.get(n).push(t.tag)}for(let[e,s]of a){let a;if(e){let t;if("object"==typeof e)t=e;else if("string"==typeof e){var o;if(!(t=null==r||null==(o=r.cacheLifeProfiles)?void 0:o[e]))throw Object.defineProperty(Error(`Invalid profile provided "${e}" must be configured under cacheLife in next.config or be "max"`),"__NEXT_ERROR_CODE",{value:"E873",enumerable:!1,configurable:!0})}t&&(a={expire:t.expire})}for(let t of n||[])e?i.push(null==t.updateTags?void 0:t.updateTags.call(t,s,a)):i.push(null==t.updateTags?void 0:t.updateTags.call(t,s));t&&i.push(t.revalidateTag(s,a))}await Promise.all(i)}async function executeRevalidates(e,t){let r=(null==t?void 0:t.pendingRevalidatedTags)??e.pendingRevalidatedTags??[],n=(null==t?void 0:t.pendingRevalidates)??e.pendingRevalidates??{},i=(null==t?void 0:t.pendingRevalidateWrites)??e.pendingRevalidateWrites??[];return Promise.all([revalidateTags(r,e.incrementalCache,e),...Object.values(n),...i])}let sharedAsyncLocalStorageNotAvailableError=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class FakeAsyncLocalStorage{disable(){throw sharedAsyncLocalStorageNotAvailableError}getStore(){}run(){throw sharedAsyncLocalStorageNotAvailableError}exit(){throw sharedAsyncLocalStorageNotAvailableError}enterWith(){throw sharedAsyncLocalStorageNotAvailableError}static bind(e){return e}}let maybeGlobalAsyncLocalStorage="u">typeof globalThis&&globalThis.AsyncLocalStorage;function createAsyncLocalStorage(){return maybeGlobalAsyncLocalStorage?new maybeGlobalAsyncLocalStorage:new FakeAsyncLocalStorage}function bindSnapshot(e){return maybeGlobalAsyncLocalStorage?maybeGlobalAsyncLocalStorage.bind(e):FakeAsyncLocalStorage.bind(e)}function createSnapshot(){return maybeGlobalAsyncLocalStorage?maybeGlobalAsyncLocalStorage.snapshot():function(e,...t){return e(...t)}}var __TURBOPACK__imported__module__32319__1=__TURBOPACK__imported__module__32319__,__TURBOPACK__imported__module__24725__=__turbopack_context__.i(24725);class AfterContext{constructor({waitUntil:e,onClose:t,onTaskError:r}){this.workUnitStores=new Set,this.waitUntil=e,this.onClose=t,this.onTaskError=r,this.callbackQueue=new __TURBOPACK__imported__module__47413__.default,this.callbackQueue.pause()}after(e){if(isThenable(e))this.waitUntil||errorWaitUntilNotAvailable(),this.waitUntil(e.catch(e=>this.reportTaskError("promise",e)));else if("function"==typeof e)this.addCallback(e);else throw Object.defineProperty(Error("`after()`: Argument must be a promise or a function"),"__NEXT_ERROR_CODE",{value:"E50",enumerable:!1,configurable:!0})}addCallback(e){this.waitUntil||errorWaitUntilNotAvailable();let t=__TURBOPACK__imported__module__32319__1.workUnitAsyncStorage.getStore();t&&this.workUnitStores.add(t);let r=__TURBOPACK__imported__module__24725__.afterTaskAsyncStorage.getStore(),n=r?r.rootTaskSpawnPhase:null==t?void 0:t.phase;this.runCallbacksOnClosePromise||(this.runCallbacksOnClosePromise=this.runCallbacksOnClose(),this.waitUntil(this.runCallbacksOnClosePromise));let i=bindSnapshot(async()=>{try{await __TURBOPACK__imported__module__24725__.afterTaskAsyncStorage.run({rootTaskSpawnPhase:n},()=>e())}catch(e){this.reportTaskError("function",e)}});this.callbackQueue.add(i)}async runCallbacksOnClose(){return await new Promise(e=>this.onClose(e)),this.runCallbacks()}async runCallbacks(){if(0===this.callbackQueue.size)return;for(let e of this.workUnitStores)e.phase="after";let e=__TURBOPACK__imported__module__56704__1.workAsyncStorage.getStore();if(!e)throw Object.defineProperty(new InvariantError("Missing workStore in AfterContext.runCallbacks"),"__NEXT_ERROR_CODE",{value:"E547",enumerable:!1,configurable:!0});return withExecuteRevalidates(e,()=>(this.callbackQueue.start(),this.callbackQueue.onIdle()))}reportTaskError(e,t){if(console.error("promise"===e?"A promise passed to `after()` rejected:":"An error occurred in a function passed to `after()`:",t),this.onTaskError)try{null==this.onTaskError||this.onTaskError.call(this,t)}catch(e){console.error(Object.defineProperty(new InvariantError("`onTaskError` threw while handling an error thrown from an `after` task",{cause:e}),"__NEXT_ERROR_CODE",{value:"E569",enumerable:!1,configurable:!0}))}}}function errorWaitUntilNotAvailable(){throw Object.defineProperty(Error("`after()` will not work correctly, because `waitUntil` is not available in the current environment."),"__NEXT_ERROR_CODE",{value:"E91",enumerable:!1,configurable:!0})}function createLazyResult(e){let t,r={then:(n,i)=>(t||(t=Promise.resolve(e())),t.then(e=>{r.value=e}).catch(()=>{}),t.then(n,i))};return r}function isResolvedLazyResult(e){return e.hasOwnProperty("value")}function createWorkStore({page:e,renderOpts:t,isPrefetchRequest:r,buildId:n,previouslyRevalidatedTags:i,nonce:a}){let o=!t.shouldWaitOnAllReady&&!t.supportsDynamicResponse&&!t.isDraftMode&&!t.isPossibleServerAction,s=t.dev??!1,c=s||o&&(!!process.env.NEXT_DEBUG_BUILD||"1"===process.env.NEXT_SSG_FETCH_METRICS),u={isStaticGeneration:o,page:e,route:normalizeAppPath(e),incrementalCache:t.incrementalCache||globalThis.__incrementalCache,cacheLifeProfiles:t.cacheLifeProfiles,isBuildTimePrerendering:t.nextExport,hasReadableErrorStacks:t.hasReadableErrorStacks,fetchCache:t.fetchCache,isOnDemandRevalidate:t.isOnDemandRevalidate,isDraftMode:t.isDraftMode,isPrefetchRequest:r,buildId:n,reactLoadableManifest:(null==t?void 0:t.reactLoadableManifest)||{},assetPrefix:(null==t?void 0:t.assetPrefix)||"",nonce:a,afterContext:createAfterContext(t),cacheComponentsEnabled:t.cacheComponents,dev:s,previouslyRevalidatedTags:i,refreshTagsByCacheKind:createRefreshTagsByCacheKind(),runInCleanSnapshot:createSnapshot(),shouldTrackFetchMetrics:c,reactServerErrorsByDigest:new Map};return t.store=u,u}function createAfterContext(e){let{waitUntil:t,onClose:r,onAfterTaskError:n}=e;return new AfterContext({waitUntil:t,onClose:r,onTaskError:n})}function createRefreshTagsByCacheKind(){let e=new Map,t=getCacheHandlerEntries();if(t)for(let[r,n]of t)"refreshTags"in n&&e.set(r,createLazyResult(async()=>n.refreshTags()));return e}var __TURBOPACK__imported__module__56704__2=__TURBOPACK__imported__module__56704__;function trackBodyConsumed(e,t){return"string"==typeof e?async function*(){let r=new TextEncoder;yield r.encode(e),t()}():trackStreamConsumed(e,t)}function trackStreamConsumed(e,t){let r=new TransformStream,n=()=>t();return e.pipeTo(r.writable).then(n,n),r.readable}class CloseController{onClose(e){if(this.isClosed)throw Object.defineProperty(Error("Cannot subscribe to a closed CloseController"),"__NEXT_ERROR_CODE",{value:"E365",enumerable:!1,configurable:!0});this.target.addEventListener("close",e),this.listeners++}dispatchClose(){if(this.isClosed)throw Object.defineProperty(Error("Cannot close a CloseController multiple times"),"__NEXT_ERROR_CODE",{value:"E229",enumerable:!1,configurable:!0});this.listeners>0&&this.target.dispatchEvent(new Event("close")),this.isClosed=!0}constructor(){this.target=new EventTarget,this.listeners=0,this.isClosed=!1}}function getEdgePreviewProps(){return{previewModeId:process.env.__NEXT_PREVIEW_MODE_ID||"",previewModeSigningKey:process.env.__NEXT_PREVIEW_MODE_SIGNING_KEY||"",previewModeEncryptionKey:process.env.__NEXT_PREVIEW_MODE_ENCRYPTION_KEY||""}}function getBuiltinRequestContext(){let e=globalThis[NEXT_REQUEST_CONTEXT_SYMBOL];return null==e?void 0:e.get()}let NEXT_REQUEST_CONTEXT_SYMBOL=Symbol.for("@next/request-context");function createLocalRequestContext(){let e=createAsyncLocalStorage();return{get:()=>e.getStore(),run:(t,r)=>e.run(t,r)}}let getDerivedTags=e=>{let t=["/layout"];if(e.startsWith("/")){let r=e.split("/");for(let e=1;e<r.length+1;e++){let n=r.slice(0,e).join("/");n&&(n.endsWith("/page")||n.endsWith("/route")||(n=`${n}${!n.endsWith("/")?"/":""}layout`),t.push(n))}}return t};function createTagsExpirationsByCacheKind(e){let t=new Map,r=getCacheHandlerEntries();if(r)for(let[n,i]of r)"getExpiration"in i&&t.set(n,createLazyResult(async()=>i.getExpiration(e)));return t}async function getImplicitTags(e,t,r){let n=new Set;for(let t of getDerivedTags(e))t=`${NEXT_CACHE_IMPLICIT_TAG_ID}${t}`,n.add(t);if(t.pathname&&(!r||0===r.size)){let e=`${NEXT_CACHE_IMPLICIT_TAG_ID}${t.pathname}`;n.add(e)}n.has(`${NEXT_CACHE_IMPLICIT_TAG_ID}/`)&&n.add(`${NEXT_CACHE_IMPLICIT_TAG_ID}/index`),n.has(`${NEXT_CACHE_IMPLICIT_TAG_ID}/index`)&&n.add(`${NEXT_CACHE_IMPLICIT_TAG_ID}/`);let i=Array.from(n);return{tags:i,expirationsByCacheKind:createTagsExpirationsByCacheKind(i)}}class NextRequestHint extends NextRequest{constructor(e){super(e.input,e.init),this.sourcePage=e.page}get request(){throw Object.defineProperty(new PageSignatureError({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}respondWith(){throw Object.defineProperty(new PageSignatureError({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}waitUntil(){throw Object.defineProperty(new PageSignatureError({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}}let headersGetter={keys:e=>Array.from(e.keys()),get:(e,t)=>e.get(t)??void 0},propagator=(e,t)=>getTracer().withPropagatedContext(e.headers,t,headersGetter),testApisIntercepted=!1;function ensureTestApisIntercepted(){if(!testApisIntercepted&&(testApisIntercepted=!0,"true"===process.env.NEXT_PRIVATE_TEST_PROXY)){let{interceptTestApis:e,wrapRequestHandler:t}=__turbopack_context__.r(76532);e(),propagator=t(propagator)}}async function adapter(e){var t,r,n,i;let a,o;ensureTestApisIntercepted(),await ensureInstrumentationRegistered();let s=void 0!==globalThis.__BUILD_MANIFEST;e.request.url=normalizeRscURL(e.request.url);let c=e.bypassNextUrl?new URL(e.request.url):new NextURL(e.request.url,{headers:e.request.headers,nextConfig:e.request.nextConfig});for(let e of[...c.searchParams.keys()]){let t=c.searchParams.getAll(e),r=normalizeNextQueryParam(e);if(r){for(let e of(c.searchParams.delete(r),t))c.searchParams.append(r,e);c.searchParams.delete(e)}}let u=process.env.__NEXT_BUILD_ID||"";"buildId"in c&&(u=c.buildId||"",c.buildId="");let l=fromNodeOutgoingHttpHeaders(e.request.headers),d=l.has("x-nextjs-data"),p="1"===l.get(RSC_HEADER);d&&"/index"===c.pathname&&(c.pathname="/");let h=new Map;if(!s)for(let e of FLIGHT_HEADERS){let t=l.get(e);null!==t&&(h.set(e,t),l.delete(e))}let f=c,m=f.searchParams.get(NEXT_RSC_UNION_QUERY),g=new NextRequestHint({page:e.page,input:stripInternalSearchParams(f).toString(),init:{body:e.request.body,headers:l,method:e.request.method,nextConfig:e.request.nextConfig,signal:e.request.signal}});d&&Object.defineProperty(g,"__isData",{enumerable:!1,value:!0}),!globalThis.__incrementalCacheShared&&e.IncrementalCache&&(globalThis.__incrementalCache=new e.IncrementalCache({CurCacheHandler:e.incrementalCacheHandler,minimalMode:!0,fetchCacheKeyPrefix:"",dev:!1,requestHeaders:e.request.headers,getPrerenderManifest:()=>({version:-1,routes:{},dynamicRoutes:{},notFoundRoutes:[],preview:getEdgePreviewProps()})}));let y=e.request.waitUntil??(null==(t=getBuiltinRequestContext())?void 0:t.waitUntil),b=new NextFetchEvent({request:g,page:e.page,context:y?{waitUntil:y}:void 0});if((a=await propagator(g,()=>{if("/middleware"===e.page||"/src/middleware"===e.page||"/proxy"===e.page||"/src/proxy"===e.page){let t=b.waitUntil.bind(b),r=new CloseController;return getTracer().trace(MiddlewareSpan.execute,{spanName:`middleware ${g.method}`,attributes:{"http.target":g.nextUrl.pathname,"http.method":g.method}},async()=>{try{var n,i,a,s;let c=e=>{o=e},l=getEdgePreviewProps(),d="/",p=null,h=await getImplicitTags(d,g.nextUrl,p),f=createRequestStoreForAPI(g,g.nextUrl,h,c,l),m=createWorkStore({page:d,renderOpts:{cacheLifeProfiles:null==(i=e.request.nextConfig)||null==(n=i.experimental)?void 0:n.cacheLife,cacheComponents:!1,experimental:{isRoutePPREnabled:!1,authInterrupts:!!(null==(s=e.request.nextConfig)||null==(a=s.experimental)?void 0:a.authInterrupts)},supportsDynamicResponse:!0,waitUntil:t,onClose:r.onClose.bind(r),onAfterTaskError:void 0},isPrefetchRequest:"1"===g.headers.get(NEXT_ROUTER_PREFETCH_HEADER),buildId:u??"",previouslyRevalidatedTags:[]});return await __TURBOPACK__imported__module__56704__2.workAsyncStorage.run(m,()=>__TURBOPACK__imported__module__32319__.workUnitAsyncStorage.run(f,e.handler,g,b))}finally{setTimeout(()=>{r.dispatchClose()},0)}})}return e.handler(g,b)}))&&!(a instanceof Response))throw Object.defineProperty(TypeError("Expected an instance of Response to be returned"),"__NEXT_ERROR_CODE",{value:"E567",enumerable:!1,configurable:!0});a&&o&&a.headers.set("set-cookie",o);let w=null==a?void 0:a.headers.get("x-middleware-rewrite");if(a&&w&&(p||!s)){let t=new NextURL(w,{forceLocale:!0,headers:e.request.headers,nextConfig:e.request.nextConfig});s||t.host!==g.nextUrl.host||(t.buildId=u||t.buildId,a.headers.set("x-middleware-rewrite",String(t)));let{url:o,isRelative:l}=parseRelativeURL(t.toString(),c.toString());!s&&d&&a.headers.set("x-nextjs-rewrite",o);let h=!l&&(null==(i=e.request.nextConfig)||null==(n=i.experimental)||null==(r=n.clientParamParsingOrigins)?void 0:r.some(e=>new RegExp(e).test(t.origin)));p&&(l||h)&&(c.pathname!==t.pathname&&a.headers.set(NEXT_REWRITTEN_PATH_HEADER,t.pathname),c.search!==t.search&&a.headers.set(NEXT_REWRITTEN_QUERY_HEADER,t.search.slice(1)))}if(a&&w&&p&&m){let e=new URL(w);e.searchParams.has(NEXT_RSC_UNION_QUERY)||(e.searchParams.set(NEXT_RSC_UNION_QUERY,m),a.headers.set("x-middleware-rewrite",e.toString()))}let _=null==a?void 0:a.headers.get("Location");if(a&&_&&!s){let t=new NextURL(_,{forceLocale:!1,headers:e.request.headers,nextConfig:e.request.nextConfig});a=new Response(a.body,a),t.host===c.host&&(t.buildId=u||t.buildId,a.headers.set("Location",getRelativeURL(t,c))),d&&(a.headers.delete("Location"),a.headers.set("x-nextjs-redirect",getRelativeURL(t.toString(),c.toString())))}let v=a||NextResponse.next(),E=v.headers.get("x-middleware-override-headers"),S=[];if(E){for(let[e,t]of h)v.headers.set(`x-middleware-request-${e}`,t),S.push(e);S.length>0&&v.headers.set("x-middleware-override-headers",E+","+S.join(","))}return{response:v,waitUntil:getWaitUntilPromiseFromEvent(b)??Promise.resolve(),fetchMetrics:g.fetchMetrics}}var __TURBOPACK__imported__module__55207__=__turbopack_context__.i(55207),__TURBOPACK__imported__module__54799__=__turbopack_context__.i(54799);function PrismaAdapter(e){let t=e;return{createUser:({id:e,...r})=>t.user.create(stripUndefined(r)),getUser:e=>t.user.findUnique({where:{id:e}}),getUserByEmail:e=>t.user.findUnique({where:{email:e}}),async getUserByAccount(e){let r=await t.account.findUnique({where:{provider_providerAccountId:e},include:{user:!0}});return r?.user??null},updateUser:({id:e,...r})=>t.user.update({where:{id:e},...stripUndefined(r)}),deleteUser:e=>t.user.delete({where:{id:e}}),linkAccount:e=>t.account.create({data:e}),unlinkAccount:e=>t.account.delete({where:{provider_providerAccountId:e}}),async getSessionAndUser(e){let r=await t.session.findUnique({where:{sessionToken:e},include:{user:!0}});if(!r)return null;let{user:n,...i}=r;return{user:n,session:i}},createSession:e=>t.session.create(stripUndefined(e)),updateSession:e=>t.session.update({where:{sessionToken:e.sessionToken},...stripUndefined(e)}),deleteSession:e=>t.session.delete({where:{sessionToken:e}}),async createVerificationToken(e){let r=await t.verificationToken.create(stripUndefined(e));return"id"in r&&r.id&&delete r.id,r},async useVerificationToken(e){try{let r=await t.verificationToken.delete({where:{identifier_token:e}});return"id"in r&&r.id&&delete r.id,r}catch(e){if(e&&"object"==typeof e&&"code"in e&&"P2025"===e.code)return null;throw e}},getAccount:async(e,r)=>t.account.findFirst({where:{providerAccountId:e,provider:r}}),createAuthenticator:async e=>t.authenticator.create(stripUndefined(e)),getAuthenticator:async e=>t.authenticator.findUnique({where:{credentialID:e}}),listAuthenticatorsByUserId:async e=>t.authenticator.findMany({where:{userId:e}}),updateAuthenticatorCounter:async(e,r)=>t.authenticator.update({where:{credentialID:e},data:{counter:r}})}}function stripUndefined(e){let t={};for(let r in e)void 0!==e[r]&&(t[r]=e[r]);return{data:t}}var __classPrivateFieldSet=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},__classPrivateFieldGet=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};let ALLOWED_COOKIE_SIZE=4096,ESTIMATED_EMPTY_COOKIE_SIZE=160,CHUNK_SIZE=ALLOWED_COOKIE_SIZE-ESTIMATED_EMPTY_COOKIE_SIZE;function defaultCookies(e){let t=e?"__Secure-":"";return{sessionToken:{name:`${t}authjs.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},callbackUrl:{name:`${t}authjs.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},csrfToken:{name:`${e?"__Host-":""}authjs.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},pkceCodeVerifier:{name:`${t}authjs.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},state:{name:`${t}authjs.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},nonce:{name:`${t}authjs.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},webauthnChallenge:{name:`${t}authjs.challenge`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}}}}class SessionStore{constructor(e,t,r){if(_SessionStore_instances.add(this),_SessionStore_chunks.set(this,{}),_SessionStore_option.set(this,void 0),_SessionStore_logger.set(this,void 0),__classPrivateFieldSet(this,_SessionStore_logger,r,"f"),__classPrivateFieldSet(this,_SessionStore_option,e,"f"),!t)return;const{name:n}=e;for(const[e,r]of Object.entries(t))e.startsWith(n)&&r&&(__classPrivateFieldGet(this,_SessionStore_chunks,"f")[e]=r)}get value(){return Object.keys(__classPrivateFieldGet(this,_SessionStore_chunks,"f")).sort((e,t)=>parseInt(e.split(".").pop()||"0")-parseInt(t.split(".").pop()||"0")).map(e=>__classPrivateFieldGet(this,_SessionStore_chunks,"f")[e]).join("")}chunk(e,t){let r=__classPrivateFieldGet(this,_SessionStore_instances,"m",_SessionStore_clean).call(this);for(let n of __classPrivateFieldGet(this,_SessionStore_instances,"m",_SessionStore_chunk).call(this,{name:__classPrivateFieldGet(this,_SessionStore_option,"f").name,value:e,options:{...__classPrivateFieldGet(this,_SessionStore_option,"f").options,...t}}))r[n.name]=n;return Object.values(r)}clean(){return Object.values(__classPrivateFieldGet(this,_SessionStore_instances,"m",_SessionStore_clean).call(this))}}_SessionStore_chunks=new WeakMap,_SessionStore_option=new WeakMap,_SessionStore_logger=new WeakMap,_SessionStore_instances=new WeakSet,_SessionStore_chunk=function(e){let t=Math.ceil(e.value.length/CHUNK_SIZE);if(1===t)return __classPrivateFieldGet(this,_SessionStore_chunks,"f")[e.name]=e.value,[e];let r=[];for(let n=0;n<t;n++){let t=`${e.name}.${n}`,i=e.value.substr(n*CHUNK_SIZE,CHUNK_SIZE);r.push({...e,name:t,value:i}),__classPrivateFieldGet(this,_SessionStore_chunks,"f")[t]=i}return __classPrivateFieldGet(this,_SessionStore_logger,"f").debug("CHUNKING_SESSION_COOKIE",{message:`Session cookie exceeds allowed ${ALLOWED_COOKIE_SIZE} bytes.`,emptyCookieSize:ESTIMATED_EMPTY_COOKIE_SIZE,valueSize:e.value.length,chunks:r.map(e=>e.value.length+ESTIMATED_EMPTY_COOKIE_SIZE)}),r},_SessionStore_clean=function(){let e={};for(let t in __classPrivateFieldGet(this,_SessionStore_chunks,"f"))delete __classPrivateFieldGet(this,_SessionStore_chunks,"f")?.[t],e[t]={name:t,value:"",options:{...__classPrivateFieldGet(this,_SessionStore_option,"f").options,maxAge:0}};return e};class AuthError extends Error{constructor(e,t){e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);const r=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${r}`}}class SignInError extends AuthError{}SignInError.kind="signIn";class AdapterError extends AuthError{}AdapterError.type="AdapterError";class AccessDenied extends AuthError{}AccessDenied.type="AccessDenied";class CallbackRouteError extends AuthError{}CallbackRouteError.type="CallbackRouteError";class ErrorPageLoop extends AuthError{}ErrorPageLoop.type="ErrorPageLoop";class EventError extends AuthError{}EventError.type="EventError";class InvalidCallbackUrl extends AuthError{}InvalidCallbackUrl.type="InvalidCallbackUrl";class CredentialsSignin extends SignInError{constructor(){super(...arguments),this.code="credentials"}}CredentialsSignin.type="CredentialsSignin";class InvalidEndpoints extends AuthError{}InvalidEndpoints.type="InvalidEndpoints";class InvalidCheck extends AuthError{}InvalidCheck.type="InvalidCheck";class JWTSessionError extends AuthError{}JWTSessionError.type="JWTSessionError";class MissingAdapter extends AuthError{}MissingAdapter.type="MissingAdapter";class MissingAdapterMethods extends AuthError{}MissingAdapterMethods.type="MissingAdapterMethods";class MissingAuthorize extends AuthError{}MissingAuthorize.type="MissingAuthorize";class MissingSecret extends AuthError{}MissingSecret.type="MissingSecret";class OAuthAccountNotLinked extends SignInError{}OAuthAccountNotLinked.type="OAuthAccountNotLinked";class OAuthCallbackError extends SignInError{}OAuthCallbackError.type="OAuthCallbackError";class OAuthProfileParseError extends AuthError{}OAuthProfileParseError.type="OAuthProfileParseError";class SessionTokenError extends AuthError{}SessionTokenError.type="SessionTokenError";class OAuthSignInError extends SignInError{}OAuthSignInError.type="OAuthSignInError";class EmailSignInError extends SignInError{}EmailSignInError.type="EmailSignInError";class SignOutError extends AuthError{}SignOutError.type="SignOutError";class UnknownAction extends AuthError{}UnknownAction.type="UnknownAction";class UnsupportedStrategy extends AuthError{}UnsupportedStrategy.type="UnsupportedStrategy";class InvalidProvider extends AuthError{}InvalidProvider.type="InvalidProvider";class UntrustedHost extends AuthError{}UntrustedHost.type="UntrustedHost";class Verification extends AuthError{}Verification.type="Verification";class MissingCSRF extends SignInError{}MissingCSRF.type="MissingCSRF";let clientErrors=new Set(["CredentialsSignin","OAuthAccountNotLinked","OAuthCallbackError","AccessDenied","Verification","MissingCSRF","AccountNotLinked","WebAuthnVerificationError"]);function isClientError(e){return e instanceof AuthError&&clientErrors.has(e.type)}class DuplicateConditionalUI extends AuthError{}DuplicateConditionalUI.type="DuplicateConditionalUI";class MissingWebAuthnAutocomplete extends AuthError{}MissingWebAuthnAutocomplete.type="MissingWebAuthnAutocomplete";class WebAuthnVerificationError extends AuthError{}WebAuthnVerificationError.type="WebAuthnVerificationError";class AccountNotLinked extends SignInError{}AccountNotLinked.type="AccountNotLinked";class ExperimentalFeatureNotEnabled extends AuthError{}ExperimentalFeatureNotEnabled.type="ExperimentalFeatureNotEnabled";let warned=!1;function isValidHttpUrl(e,t){try{return/^https?:/.test(new URL(e,e.startsWith("/")?t:void 0).protocol)}catch{return!1}}function isSemverString(e){return/^v\d+(?:\.\d+){0,2}$/.test(e)}let hasCredentials=!1,hasEmail=!1,hasWebAuthn=!1,emailMethods=["createVerificationToken","useVerificationToken","getUserByEmail"],sessionMethods=["createUser","getUser","getUserByEmail","getUserByAccount","updateUser","linkAccount","createSession","getSessionAndUser","updateSession","deleteSession"],webauthnMethods=["createUser","getUser","linkAccount","getAccount","getAuthenticator","createAuthenticator","listAuthenticatorsByUserId","updateAuthenticatorCounter"];function assertConfig(e,t){let{url:r}=e,n=[];if(!warned&&t.debug&&n.push("debug-enabled"),!t.trustHost)return new UntrustedHost(`Host must be trusted. URL was: ${e.url}`);if(!t.secret?.length)return new MissingSecret("Please define a `secret`");let i=e.query?.callbackUrl;if(i&&!isValidHttpUrl(i,r.origin))return new InvalidCallbackUrl(`Invalid callback URL. Received: ${i}`);let{callbackUrl:a}=defaultCookies(t.useSecureCookies??"https:"===r.protocol),o=e.cookies?.[t.cookies?.callbackUrl?.name??a.name];if(o&&!isValidHttpUrl(o,r.origin))return new InvalidCallbackUrl(`Invalid callback URL. Received: ${o}`);let s=!1;for(let e of t.providers){let t="function"==typeof e?e():e;if(("oauth"===t.type||"oidc"===t.type)&&!(t.issuer??t.options?.issuer)){let e,{authorization:r,token:n,userinfo:i}=t;if("string"==typeof r||r?.url?"string"==typeof n||n?.url?"string"==typeof i||i?.url||(e="userinfo"):e="token":e="authorization",e)return new InvalidEndpoints(`Provider "${t.id}" is missing both \`issuer\` and \`${e}\` endpoint config. At least one of them is required`)}if("credentials"===t.type)hasCredentials=!0;else if("email"===t.type)hasEmail=!0;else if("webauthn"===t.type){if(hasWebAuthn=!0,t.simpleWebAuthnBrowserVersion&&!isSemverString(t.simpleWebAuthnBrowserVersion))return new AuthError(`Invalid provider config for "${t.id}": simpleWebAuthnBrowserVersion "${t.simpleWebAuthnBrowserVersion}" must be a valid semver string.`);if(t.enableConditionalUI){if(s)return new DuplicateConditionalUI("Multiple webauthn providers have 'enableConditionalUI' set to True. Only one provider can have this option enabled at a time");if(s=!0,!Object.values(t.formFields).some(e=>e.autocomplete&&e.autocomplete.toString().indexOf("webauthn")>-1))return new MissingWebAuthnAutocomplete(`Provider "${t.id}" has 'enableConditionalUI' set to True, but none of its formFields have 'webauthn' in their autocomplete param`)}}}if(hasCredentials){let e=t.session?.strategy==="database",r=!t.providers.some(e=>"credentials"!==("function"==typeof e?e():e).type);if(e&&r)return new UnsupportedStrategy("Signing in with credentials only supported if JWT strategy is enabled");if(t.providers.some(e=>{let t="function"==typeof e?e():e;return"credentials"===t.type&&!t.authorize}))return new MissingAuthorize("Must define an authorize() handler to use credentials authentication provider")}let{adapter:c,session:u}=t,l=[];if(hasEmail||u?.strategy==="database"||!u?.strategy&&c)if(hasEmail){if(!c)return new MissingAdapter("Email login requires an adapter");l.push(...emailMethods)}else{if(!c)return new MissingAdapter("Database session requires an adapter");l.push(...sessionMethods)}if(hasWebAuthn){if(!t.experimental?.enableWebAuthn)return new ExperimentalFeatureNotEnabled("WebAuthn is an experimental feature. To enable it, set `experimental.enableWebAuthn` to `true` in your config");if(n.push("experimental-webauthn"),!c)return new MissingAdapter("WebAuthn requires an adapter");l.push(...webauthnMethods)}if(c){let e=l.filter(e=>!(e in c));if(e.length)return new MissingAdapterMethods(`Required adapter methods were missing: ${e.join(", ")}`)}return warned||(warned=!0),n}var __TURBOPACK__imported__module__54799__1=__TURBOPACK__imported__module__54799__,__TURBOPACK__imported__module__54799__2=__TURBOPACK__imported__module__54799__;let __TURBOPACK__default__export__=(e,t,r,n,i)=>{let a=parseInt(e.substr(3),10)>>3||20,o=(0,__TURBOPACK__imported__module__54799__2.createHmac)(e,r.byteLength?r:new Uint8Array(a)).update(t).digest(),s=Math.ceil(i/a),c=new Uint8Array(a*s+n.byteLength+1),u=0,l=0;for(let t=1;t<=s;t++)c.set(n,l),c[l+n.byteLength]=t,c.set((0,__TURBOPACK__imported__module__54799__2.createHmac)(e,o).update(c.subarray(u,l+n.byteLength+1)).digest(),l),u=l,l+=a;return c.slice(0,i)};"function"!=typeof __TURBOPACK__imported__module__54799__1.hkdf||process.versions.electron||(hkdf=async(...e)=>new Promise((t,r)=>{__TURBOPACK__imported__module__54799__1.hkdf(...e,(e,n)=>{e?r(e):t(new Uint8Array(n))})}));let __TURBOPACK__default__export__1=async(e,t,r,n,i)=>(hkdf||__TURBOPACK__default__export__)(e,t,r,n,i);function normalizeDigest(e){switch(e){case"sha256":case"sha384":case"sha512":case"sha1":return e;default:throw TypeError('unsupported "digest" value')}}function normalizeUint8Array(e,t){if("string"==typeof e)return new TextEncoder().encode(e);if(!(e instanceof Uint8Array))throw TypeError(`"${t}"" must be an instance of Uint8Array or a string`);return e}function normalizeIkm(e){let t=normalizeUint8Array(e,"ikm");if(!t.byteLength)throw TypeError('"ikm" must be at least one byte in length');return t}function normalizeInfo(e){let t=normalizeUint8Array(e,"info");if(t.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return t}function normalizeKeylen(e,t){if("number"!=typeof e||!Number.isInteger(e)||e<1)throw TypeError('"keylen" must be a positive integer');if(e>255*(parseInt(t.substr(3),10)>>3||20))throw TypeError('"keylen" too large');return e}async function hkdf1(e,t,r,n,i){return __TURBOPACK__default__export__1(normalizeDigest(e),normalizeIkm(t),normalizeUint8Array(r,"salt"),normalizeInfo(n),normalizeKeylen(i,e))}let encoder=new TextEncoder,decoder=new TextDecoder,MAX_INT32=0x100000000;function concat(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t}function writeUInt32BE(e,t,r){if(t<0||t>=MAX_INT32)throw RangeError(`value must be >= 0 and <= ${MAX_INT32-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function uint64be(e){let t=Math.floor(e/MAX_INT32),r=e%MAX_INT32,n=new Uint8Array(8);return writeUInt32BE(n,t,0),writeUInt32BE(n,r,4),n}function uint32be(e){let t=new Uint8Array(4);return writeUInt32BE(t,e),t}function encode(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n>127)throw TypeError("non-ASCII string encountered in encode()");t[r]=n}return t}function encodeBase64(e){if(Uint8Array.prototype.toBase64)return e.toBase64();let t=32768,r=[];for(let n=0;n<e.length;n+=t)r.push(String.fromCharCode.apply(null,e.subarray(n,n+t)));return btoa(r.join(""))}function decodeBase64(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(e);let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}function decode(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof e?e:decoder.decode(e),{alphabet:"base64url"});let t=e;t instanceof Uint8Array&&(t=decoder.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/");try{return decodeBase64(t)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function encode1(e){let t=e;return("string"==typeof t&&(t=encoder.encode(t)),Uint8Array.prototype.toBase64)?t.toBase64({alphabet:"base64url",omitPadding:!0}):encodeBase64(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}__turbopack_context__.s(["decode",()=>decode,"encode",()=>encode1],86769);let unprotected=Symbol();class JOSEError extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,t){super(e,t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class JWTClaimValidationFailed extends JOSEError{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.claim=r,this.reason=n,this.payload=t}}class JWTExpired extends JOSEError{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.claim=r,this.reason=n,this.payload=t}}class JOSEAlgNotAllowed extends JOSEError{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class JOSENotSupported extends JOSEError{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class JWEDecryptionFailed extends JOSEError{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(e="decryption operation failed",t){super(e,t)}}class JWEInvalid extends JOSEError{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}class JWSInvalid extends JOSEError{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class JWTInvalid extends JOSEError{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class JWKInvalid extends JOSEError{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}class JWKSInvalid extends JOSEError{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"}class JWKSNoMatchingKey extends JOSEError{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor(e="no applicable key found in the JSON Web Key Set",t){super(e,t)}}class JWKSMultipleMatchingKeys extends JOSEError{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t)}}class JWKSTimeout extends JOSEError{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor(e="request timed out",t){super(e,t)}}class JWSSignatureVerificationFailed extends JOSEError{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(e="signature verification failed",t){super(e,t)}}function bitLength(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new JOSENotSupported(`Unsupported JWE Algorithm: ${e}`)}}let generateIv=e=>crypto.getRandomValues(new Uint8Array(bitLength(e)>>3));function checkIvLength(e,t){if(t.length<<3!==bitLength(e))throw new JWEInvalid("Invalid Initialization Vector length")}function checkCekLength(e,t){let r=e.byteLength<<3;if(r!==t)throw new JWEInvalid(`Invalid Content Encryption Key length. Expected ${t} bits, got ${r} bits`)}let unusable=(e,t="algorithm.name")=>TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`),isAlgorithm=(e,t)=>e.name===t;function getHashLength(e){return parseInt(e.name.slice(4),10)}function getNamedCurve(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}function checkUsage(e,t){if(t&&!e.usages.includes(t))throw TypeError(`CryptoKey does not support this operation, its usages must include ${t}.`)}function checkSigCryptoKey(e,t,r){switch(t){case"HS256":case"HS384":case"HS512":{if(!isAlgorithm(e.algorithm,"HMAC"))throw unusable("HMAC");let r=parseInt(t.slice(2),10);if(getHashLength(e.algorithm.hash)!==r)throw unusable(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!isAlgorithm(e.algorithm,"RSASSA-PKCS1-v1_5"))throw unusable("RSASSA-PKCS1-v1_5");let r=parseInt(t.slice(2),10);if(getHashLength(e.algorithm.hash)!==r)throw unusable(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!isAlgorithm(e.algorithm,"RSA-PSS"))throw unusable("RSA-PSS");let r=parseInt(t.slice(2),10);if(getHashLength(e.algorithm.hash)!==r)throw unusable(`SHA-${r}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":if(!isAlgorithm(e.algorithm,"Ed25519"))throw unusable("Ed25519");break;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":if(!isAlgorithm(e.algorithm,t))throw unusable(t);break;case"ES256":case"ES384":case"ES512":{if(!isAlgorithm(e.algorithm,"ECDSA"))throw unusable("ECDSA");let r=getNamedCurve(t);if(e.algorithm.namedCurve!==r)throw unusable(r,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}checkUsage(e,r)}function checkEncCryptoKey(e,t,r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!isAlgorithm(e.algorithm,"AES-GCM"))throw unusable("AES-GCM");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw unusable(r,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!isAlgorithm(e.algorithm,"AES-KW"))throw unusable("AES-KW");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw unusable(r,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":break;default:throw unusable("ECDH or X25519")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!isAlgorithm(e.algorithm,"PBKDF2"))throw unusable("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!isAlgorithm(e.algorithm,"RSA-OAEP"))throw unusable("RSA-OAEP");let r=parseInt(t.slice(9),10)||1;if(getHashLength(e.algorithm.hash)!==r)throw unusable(`SHA-${r}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}checkUsage(e,r)}function message(e,t,...r){if((r=r.filter(Boolean)).length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}let invalidKeyInput=(e,...t)=>message("Key must be ",e,...t),withAlg=(e,t,...r)=>message(`Key for the ${e} algorithm must be `,t,...r);function assertCryptoKey(e){if(!isCryptoKey(e))throw Error("CryptoKey instance expected")}let isCryptoKey=e=>{if(e?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return e instanceof CryptoKey}catch{return!1}},isKeyObject=e=>e?.[Symbol.toStringTag]==="KeyObject",isKeyLike=e=>isCryptoKey(e)||isKeyObject(e);async function cbcEncrypt(e,t,r,n,i){if(!(r instanceof Uint8Array))throw TypeError(invalidKeyInput(r,"Uint8Array"));let a=parseInt(e.slice(1,4),10),o=await crypto.subtle.importKey("raw",r.subarray(a>>3),"AES-CBC",!1,["encrypt"]),s=await crypto.subtle.importKey("raw",r.subarray(0,a>>3),{hash:`SHA-${a<<1}`,name:"HMAC"},!1,["sign"]),c=new Uint8Array(await crypto.subtle.encrypt({iv:n,name:"AES-CBC"},o,t)),u=concat(i,n,c,uint64be(i.length<<3));return{ciphertext:c,tag:new Uint8Array((await crypto.subtle.sign("HMAC",s,u)).slice(0,a>>3)),iv:n}}async function gcmEncrypt(e,t,r,n,i){let a;r instanceof Uint8Array?a=await crypto.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(checkEncCryptoKey(r,e,"encrypt"),a=r);let o=new Uint8Array(await crypto.subtle.encrypt({additionalData:i,iv:n,name:"AES-GCM",tagLength:128},a,t)),s=o.slice(-16);return{ciphertext:o.slice(0,-16),tag:s,iv:n}}async function encrypt(e,t,r,n,i){if(!isCryptoKey(r)&&!(r instanceof Uint8Array))throw TypeError(invalidKeyInput(r,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));switch(n?checkIvLength(e,n):n=generateIv(e),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&checkCekLength(r,parseInt(e.slice(-3),10)),cbcEncrypt(e,t,r,n,i);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&checkCekLength(r,parseInt(e.slice(1,4),10)),gcmEncrypt(e,t,r,n,i);default:throw new JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}function checkKeySize(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${t}`)}function getCryptoKey(e,t,r){return e instanceof Uint8Array?crypto.subtle.importKey("raw",e,"AES-KW",!0,[r]):(checkEncCryptoKey(e,t,r),e)}async function wrap(e,t,r){let n=await getCryptoKey(t,e,"wrapKey");checkKeySize(n,e);let i=await crypto.subtle.importKey("raw",r,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",i,n,"AES-KW"))}async function unwrap(e,t,r){let n=await getCryptoKey(t,e,"unwrapKey");checkKeySize(n,e);let i=await crypto.subtle.unwrapKey("raw",r,n,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",i))}async function digest(e,t){let r=`SHA-${e.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(r,t))}function lengthAndInput(e){return concat(uint32be(e.length),e)}async function concatKdf(e,t,r){let n=t>>3,i=32,a=Math.ceil(n/32),o=new Uint8Array(32*a);for(let t=1;t<=a;t++){let n=new Uint8Array(4+e.length+r.length);n.set(uint32be(t),0),n.set(e,4),n.set(r,4+e.length);let a=await digest("sha256",n);o.set(a,(t-1)*i)}return o.slice(0,n)}async function deriveKey(e,t,r,n,i=new Uint8Array,a=new Uint8Array){checkEncCryptoKey(e,"ECDH"),checkEncCryptoKey(t,"ECDH","deriveBits");let o=concat(lengthAndInput(encode(r)),lengthAndInput(i),lengthAndInput(a),uint32be(n),new Uint8Array);return concatKdf(new Uint8Array(await crypto.subtle.deriveBits({name:e.algorithm.name,public:e},t,getEcdhBitLength(e))),n,o)}function getEcdhBitLength(e){return"X25519"===e.algorithm.name?256:Math.ceil(parseInt(e.algorithm.namedCurve.slice(-3),10)/8)<<3}function allowed(e){switch(e.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return"X25519"===e.algorithm.name}}function getCryptoKey1(e,t){return e instanceof Uint8Array?crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]):(checkEncCryptoKey(e,t,"deriveBits"),e)}let concatSalt=(e,t)=>concat(encode(e),Uint8Array.of(0),t);async function deriveKey1(e,t,r,n){if(!(e instanceof Uint8Array)||e.length<8)throw new JWEInvalid("PBES2 Salt Input must be 8 or more octets");let i=concatSalt(t,e),a=parseInt(t.slice(13,16),10),o={hash:`SHA-${t.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:i},s=await getCryptoKey1(n,t);return new Uint8Array(await crypto.subtle.deriveBits(o,s,a))}async function wrap1(e,t,r,n=2048,i=crypto.getRandomValues(new Uint8Array(16))){let a=await deriveKey1(i,e,n,t);return{encryptedKey:await wrap(e.slice(-6),a,r),p2c:n,p2s:encode1(i)}}async function unwrap1(e,t,r,n,i){let a=await deriveKey1(i,e,n,t);return unwrap(e.slice(-6),a,r)}function checkKeyLength(e,t){if(e.startsWith("RS")||e.startsWith("PS")){let{modulusLength:r}=t.algorithm;if("number"!=typeof r||r<2048)throw TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}}let subtleAlgorithm=e=>{switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}};async function encrypt1(e,t,r){return checkEncCryptoKey(t,e,"encrypt"),checkKeyLength(e,t),new Uint8Array(await crypto.subtle.encrypt(subtleAlgorithm(e),t,r))}async function decrypt(e,t,r){return checkEncCryptoKey(t,e,"decrypt"),checkKeyLength(e,t),new Uint8Array(await crypto.subtle.decrypt(subtleAlgorithm(e),t,r))}let isObjectLike=e=>"object"==typeof e&&null!==e;function isObject(e){if(!isObjectLike(e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}let isJWK=e=>isObject(e)&&"string"==typeof e.kty,isPrivateJWK=e=>"oct"!==e.kty&&("AKP"===e.kty&&"string"==typeof e.priv||"string"==typeof e.d),isPublicJWK=e=>"oct"!==e.kty&&void 0===e.d&&void 0===e.priv,isSecretJWK=e=>"oct"===e.kty&&"string"==typeof e.k;function subtleMapping(e){let t,r;switch(e.kty){case"AKP":switch(e.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":t={name:e.alg},r=e.priv?["sign"]:["verify"];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(e.alg){case"Ed25519":case"EdDSA":t={name:"Ed25519"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new JOSENotSupported('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}async function jwkToKey(e){if(!e.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:t,keyUsages:r}=subtleMapping(e),n={...e};return"AKP"!==n.kty&&delete n.alg,delete n.use,crypto.subtle.importKey("jwk",n,t,e.ext??(!e.d&&!e.priv),e.key_ops??r)}let handleJWK=async(e,t,r,n=!1)=>{let i=(cache1||=new WeakMap).get(e);if(i?.[r])return i[r];let a=await jwkToKey({...t,alg:r});return n&&Object.freeze(e),i?i[r]=a:cache1.set(e,{[r]:a}),a},handleKeyObject=(e,t)=>{let r,n=(cache1||=new WeakMap).get(e);if(n?.[t])return n[t];let i="public"===e.type,a=!!i;if("x25519"===e.asymmetricKeyType){switch(t){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}r=e.toCryptoKey(e.asymmetricKeyType,a,i?[]:["deriveBits"])}if("ed25519"===e.asymmetricKeyType){if("EdDSA"!==t&&"Ed25519"!==t)throw TypeError("given KeyObject instance cannot be used for this algorithm");r=e.toCryptoKey(e.asymmetricKeyType,a,[i?"verify":"sign"])}switch(e.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":if(t!==e.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");r=e.toCryptoKey(e.asymmetricKeyType,a,[i?"verify":"sign"])}if("rsa"===e.asymmetricKeyType){let n;switch(t){case"RSA-OAEP":n="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":n="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":n="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":n="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(t.startsWith("RSA-OAEP"))return e.toCryptoKey({name:"RSA-OAEP",hash:n},a,i?["encrypt"]:["decrypt"]);r=e.toCryptoKey({name:t.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:n},a,[i?"verify":"sign"])}if("ec"===e.asymmetricKeyType){let n=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(e.asymmetricKeyDetails?.namedCurve);if(!n)throw TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===t&&"P-256"===n&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:n},a,[i?"verify":"sign"])),"ES384"===t&&"P-384"===n&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:n},a,[i?"verify":"sign"])),"ES512"===t&&"P-521"===n&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:n},a,[i?"verify":"sign"])),t.startsWith("ECDH-ES")&&(r=e.toCryptoKey({name:"ECDH",namedCurve:n},a,i?[]:["deriveBits"]))}if(!r)throw TypeError("given KeyObject instance cannot be used for this algorithm");return n?n[t]=r:cache1.set(e,{[t]:r}),r};async function normalizeKey(e,t){if(e instanceof Uint8Array||isCryptoKey(e))return e;if(isKeyObject(e)){if("secret"===e.type)return e.export();if("toCryptoKey"in e&&"function"==typeof e.toCryptoKey)try{return handleKeyObject(e,t)}catch(e){if(e instanceof TypeError)throw e}let r=e.export({format:"jwk"});return handleJWK(e,r,t)}if(isJWK(e))return e.k?decode(e.k):handleJWK(e,e,t,!0);throw Error("unreachable")}function cekLength(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new JOSENotSupported(`Unsupported JWE Algorithm: ${e}`)}}let generateCek=e=>crypto.getRandomValues(new Uint8Array(cekLength(e)>>3));async function keyToJWK(e){if(isKeyObject(e))if("secret"!==e.type)return e.export({format:"jwk"});else e=e.export();if(e instanceof Uint8Array)return{kty:"oct",k:encode1(e)};if(!isCryptoKey(e))throw TypeError(invalidKeyInput(e,"CryptoKey","KeyObject","Uint8Array"));if(!e.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:t,key_ops:r,alg:n,use:i,...a}=await crypto.subtle.exportKey("jwk",e);return"AKP"===a.kty&&(a.alg=n),a}async function exportSPKI(e){return(0,__TURBOPACK__imported__module__99589__.toSPKI)(e)}async function exportPKCS8(e){return(0,__TURBOPACK__imported__module__99589__.toPKCS8)(e)}async function exportJWK(e){return keyToJWK(e)}async function timingSafeEqual(e,t){if(!(e instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw TypeError("Second argument must be a buffer");let r={name:"HMAC",hash:"SHA-256"},n=await crypto.subtle.generateKey(r,!1,["sign"]),i=new Uint8Array(await crypto.subtle.sign(r,n,e)),a=new Uint8Array(await crypto.subtle.sign(r,n,t)),o=0,s=-1;for(;++s<32;)o|=i[s]^a[s];return 0===o}async function cbcDecrypt(e,t,r,n,i,a){let o,s;if(!(t instanceof Uint8Array))throw TypeError(invalidKeyInput(t,"Uint8Array"));let c=parseInt(e.slice(1,4),10),u=await crypto.subtle.importKey("raw",t.subarray(c>>3),"AES-CBC",!1,["decrypt"]),l=await crypto.subtle.importKey("raw",t.subarray(0,c>>3),{hash:`SHA-${c<<1}`,name:"HMAC"},!1,["sign"]),d=concat(a,n,r,uint64be(a.length<<3)),p=new Uint8Array((await crypto.subtle.sign("HMAC",l,d)).slice(0,c>>3));try{o=await timingSafeEqual(i,p)}catch{}if(!o)throw new JWEDecryptionFailed;try{s=new Uint8Array(await crypto.subtle.decrypt({iv:n,name:"AES-CBC"},u,r))}catch{}if(!s)throw new JWEDecryptionFailed;return s}async function gcmDecrypt(e,t,r,n,i,a){let o;t instanceof Uint8Array?o=await crypto.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(checkEncCryptoKey(t,e,"decrypt"),o=t);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:a,iv:n,name:"AES-GCM",tagLength:128},o,concat(r,i)))}catch{throw new JWEDecryptionFailed}}async function decrypt1(e,t,r,n,i,a){if(!isCryptoKey(t)&&!(t instanceof Uint8Array))throw TypeError(invalidKeyInput(t,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!n)throw new JWEInvalid("JWE Initialization Vector missing");if(!i)throw new JWEInvalid("JWE Authentication Tag missing");switch(checkIvLength(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&checkCekLength(t,parseInt(e.slice(-3),10)),cbcDecrypt(e,t,r,n,i,a);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&checkCekLength(t,parseInt(e.slice(1,4),10)),gcmDecrypt(e,t,r,n,i,a);default:throw new JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}async function wrap2(e,t,r,n){let i=e.slice(0,7),a=await encrypt(i,r,t,n,new Uint8Array);return{encryptedKey:a.ciphertext,iv:encode1(a.iv),tag:encode1(a.tag)}}async function unwrap2(e,t,r,n,i){return decrypt1(e.slice(0,7),t,r,n,i,new Uint8Array)}async function encryptKeyManagement(e,t,r,n,i={}){let a,o,s;switch(e){case"dir":s=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let c;if(assertCryptoKey(r),!allowed(r))throw new JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:u,apv:l}=i;c=i.epk?await normalizeKey(i.epk,e):(await crypto.subtle.generateKey(r.algorithm,!0,["deriveBits"])).privateKey;let{x:d,y:p,crv:h,kty:f}=await exportJWK(c),m=await deriveKey(r,c,"ECDH-ES"===e?t:e,"ECDH-ES"===e?cekLength(t):parseInt(e.slice(-5,-2),10),u,l);if(o={epk:{x:d,crv:h,kty:f}},"EC"===f&&(o.epk.y=p),u&&(o.apu=encode1(u)),l&&(o.apv=encode1(l)),"ECDH-ES"===e){s=m;break}s=n||generateCek(t);let g=e.slice(-6);a=await wrap(g,m,s);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":s=n||generateCek(t),assertCryptoKey(r),a=await encrypt1(e,r,s);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{s=n||generateCek(t);let{p2c:c,p2s:u}=i;({encryptedKey:a,...o}=await wrap1(e,r,s,c,u));break}case"A128KW":case"A192KW":case"A256KW":s=n||generateCek(t),a=await wrap(e,r,s);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{s=n||generateCek(t);let{iv:c}=i;({encryptedKey:a,...o}=await wrap2(e,r,s,c));break}default:throw new JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:s,encryptedKey:a,parameters:o}}function isDisjoint(...e){let t,r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0}function validateCrit(e,t,r,n,i){let a;if(void 0!==i.crit&&n?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let o of(a=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,n.crit)){if(!a.has(o))throw new JOSENotSupported(`Extension Header Parameter "${o}" is not recognized`);if(void 0===i[o])throw new e(`Extension Header Parameter "${o}" is missing`);if(a.get(o)&&void 0===n[o])throw new e(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(n.crit)}let tag=e=>e?.[Symbol.toStringTag],jwkMatchesOp=(e,t,r)=>{if(void 0!==t.use){let e;switch(r){case"sign":case"verify":e="sig";break;case"encrypt":case"decrypt":e="enc"}if(t.use!==e)throw TypeError(`Invalid key for this operation, its "use" must be "${e}" when present`)}if(void 0!==t.alg&&t.alg!==e)throw TypeError(`Invalid key for this operation, its "alg" must be "${e}" when present`);if(Array.isArray(t.key_ops)){let n;switch(!0){case"sign"===r||"verify"===r:case"dir"===e:case e.includes("CBC-HS"):n=r;break;case e.startsWith("PBES2"):n="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(e):n=!e.includes("GCM")&&e.endsWith("KW")?"encrypt"===r?"wrapKey":"unwrapKey":r;break;case"encrypt"===r&&e.startsWith("RSA"):n="wrapKey";break;case"decrypt"===r:n=e.startsWith("RSA")?"unwrapKey":"deriveBits"}if(n&&t.key_ops?.includes?.(n)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${n}" when present`)}return!0},symmetricTypeCheck=(e,t,r)=>{if(!(t instanceof Uint8Array)){if(isJWK(t)){if(isSecretJWK(t)&&jwkMatchesOp(e,t,r))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!isKeyLike(t))throw TypeError(withAlg(e,t,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==t.type)throw TypeError(`${tag(t)} instances for symmetric algorithms must be of type "secret"`)}},asymmetricTypeCheck=(e,t,r)=>{if(isJWK(t))switch(r){case"decrypt":case"sign":if(isPrivateJWK(t)&&jwkMatchesOp(e,t,r))return;throw TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if(isPublicJWK(t)&&jwkMatchesOp(e,t,r))return;throw TypeError("JSON Web Key for this operation must be a public JWK")}if(!isKeyLike(t))throw TypeError(withAlg(e,t,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===t.type)throw TypeError(`${tag(t)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===t.type)switch(r){case"sign":throw TypeError(`${tag(t)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${tag(t)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===t.type)switch(r){case"verify":throw TypeError(`${tag(t)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${tag(t)} instances for asymmetric algorithm encryption must be of type "public"`)}};function checkKeyType(e,t,r){switch(e.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":symmetricTypeCheck(e,t,r);break;default:asymmetricTypeCheck(e,t,r)}}class FlattenedEncrypt{#e;#t;#r;#n;#i;#a;#o;#s;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this.#e=e}setKeyManagementParameters(e){if(this.#s)throw TypeError("setKeyManagementParameters can only be called once");return this.#s=e,this}setProtectedHeader(e){if(this.#t)throw TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setSharedUnprotectedHeader(e){if(this.#r)throw TypeError("setSharedUnprotectedHeader can only be called once");return this.#r=e,this}setUnprotectedHeader(e){if(this.#n)throw TypeError("setUnprotectedHeader can only be called once");return this.#n=e,this}setAdditionalAuthenticatedData(e){return this.#i=e,this}setContentEncryptionKey(e){if(this.#a)throw TypeError("setContentEncryptionKey can only be called once");return this.#a=e,this}setInitializationVector(e){if(this.#o)throw TypeError("setInitializationVector can only be called once");return this.#o=e,this}async encrypt(e,t){let r,n,i,a,o,s;if(!this.#t&&!this.#n&&!this.#r)throw new JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!isDisjoint(this.#t,this.#n,this.#r))throw new JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let c={...this.#t,...this.#n,...this.#r};if(validateCrit(JWEInvalid,new Map,t?.crit,this.#t,c),void 0!==c.zip)throw new JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:u,enc:l}=c;if("string"!=typeof u||!u)throw new JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof l||!l)throw new JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this.#a&&("dir"===u||"ECDH-ES"===u))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${u}`);checkKeyType("dir"===u?l:u,e,"encrypt");{let i,a=await normalizeKey(e,u);({cek:n,encryptedKey:r,parameters:i}=await encryptKeyManagement(u,l,a,this.#a,this.#s)),i&&(t&&unprotected in t?this.#n?this.#n={...this.#n,...i}:this.setUnprotectedHeader(i):this.#t?this.#t={...this.#t,...i}:this.setProtectedHeader(i))}if(this.#t?o=encode(a=encode1(JSON.stringify(this.#t))):(a="",o=new Uint8Array),this.#i){let e=encode(s=encode1(this.#i));i=concat(o,encode("."),e)}else i=o;let{ciphertext:d,tag:p,iv:h}=await encrypt(l,this.#e,n,this.#o,i),f={ciphertext:encode1(d)};return h&&(f.iv=encode1(h)),p&&(f.tag=encode1(p)),r&&(f.encrypted_key=encode1(r)),s&&(f.aad=s),this.#t&&(f.protected=a),this.#r&&(f.unprotected=this.#r),this.#n&&(f.header=this.#n),f}}class CompactEncrypt{#c;constructor(e){this.#c=new FlattenedEncrypt(e)}setContentEncryptionKey(e){return this.#c.setContentEncryptionKey(e),this}setInitializationVector(e){return this.#c.setInitializationVector(e),this}setProtectedHeader(e){return this.#c.setProtectedHeader(e),this}setKeyManagementParameters(e){return this.#c.setKeyManagementParameters(e),this}async encrypt(e,t){let r=await this.#c.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}let epoch=e=>Math.floor(e.getTime()/1e3),minute=60,hour=60*minute,day=24*hour,week=7*day,year=365.25*day,REGEX=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function secs(e){let t,r=REGEX.exec(e);if(!r||r[4]&&r[1])throw TypeError("Invalid time period format");let n=parseFloat(r[2]);switch(r[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(n*minute);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(n*hour);break;case"day":case"days":case"d":t=Math.round(n*day);break;case"week":case"weeks":case"w":t=Math.round(n*week);break;default:t=Math.round(n*year)}return"-"===r[1]||"ago"===r[4]?-t:t}function validateInput(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}let normalizeTyp=e=>e.includes("/")?e.toLowerCase():`application/${e.toLowerCase()}`,checkAudiencePresence=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e)));function validateClaimsSet(e,t,r={}){let n,i;try{n=JSON.parse(decoder.decode(t))}catch{}if(!isObject(n))throw new JWTInvalid("JWT Claims Set must be a top-level JSON object");let{typ:a}=r;if(a&&("string"!=typeof e.typ||normalizeTyp(e.typ)!==normalizeTyp(a)))throw new JWTClaimValidationFailed('unexpected "typ" JWT header value',n,"typ","check_failed");let{requiredClaims:o=[],issuer:s,subject:c,audience:u,maxTokenAge:l}=r,d=[...o];for(let e of(void 0!==l&&d.push("iat"),void 0!==u&&d.push("aud"),void 0!==c&&d.push("sub"),void 0!==s&&d.push("iss"),new Set(d.reverse())))if(!(e in n))throw new JWTClaimValidationFailed(`missing required "${e}" claim`,n,e,"missing");if(s&&!(Array.isArray(s)?s:[s]).includes(n.iss))throw new JWTClaimValidationFailed('unexpected "iss" claim value',n,"iss","check_failed");if(c&&n.sub!==c)throw new JWTClaimValidationFailed('unexpected "sub" claim value',n,"sub","check_failed");if(u&&!checkAudiencePresence(n.aud,"string"==typeof u?[u]:u))throw new JWTClaimValidationFailed('unexpected "aud" claim value',n,"aud","check_failed");switch(typeof r.clockTolerance){case"string":i=secs(r.clockTolerance);break;case"number":i=r.clockTolerance;break;case"undefined":i=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:p}=r,h=epoch(p||new Date);if((void 0!==n.iat||l)&&"number"!=typeof n.iat)throw new JWTClaimValidationFailed('"iat" claim must be a number',n,"iat","invalid");if(void 0!==n.nbf){if("number"!=typeof n.nbf)throw new JWTClaimValidationFailed('"nbf" claim must be a number',n,"nbf","invalid");if(n.nbf>h+i)throw new JWTClaimValidationFailed('"nbf" claim timestamp check failed',n,"nbf","check_failed")}if(void 0!==n.exp){if("number"!=typeof n.exp)throw new JWTClaimValidationFailed('"exp" claim must be a number',n,"exp","invalid");if(n.exp<=h-i)throw new JWTExpired('"exp" claim timestamp check failed',n,"exp","check_failed")}if(l){let e=h-n.iat;if(e-i>("number"==typeof l?l:secs(l)))throw new JWTExpired('"iat" claim timestamp check failed (too far in the past)',n,"iat","check_failed");if(e<0-i)throw new JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',n,"iat","check_failed")}return n}class JWTClaimsBuilder{#u;constructor(e){if(!isObject(e))throw TypeError("JWT Claims Set MUST be an object");this.#u=structuredClone(e)}data(){return encoder.encode(JSON.stringify(this.#u))}get iss(){return this.#u.iss}set iss(e){this.#u.iss=e}get sub(){return this.#u.sub}set sub(e){this.#u.sub=e}get aud(){return this.#u.aud}set aud(e){this.#u.aud=e}set jti(e){this.#u.jti=e}set nbf(e){"number"==typeof e?this.#u.nbf=validateInput("setNotBefore",e):e instanceof Date?this.#u.nbf=validateInput("setNotBefore",epoch(e)):this.#u.nbf=epoch(new Date)+secs(e)}set exp(e){"number"==typeof e?this.#u.exp=validateInput("setExpirationTime",e):e instanceof Date?this.#u.exp=validateInput("setExpirationTime",epoch(e)):this.#u.exp=epoch(new Date)+secs(e)}set iat(e){void 0===e?this.#u.iat=epoch(new Date):e instanceof Date?this.#u.iat=validateInput("setIssuedAt",epoch(e)):"string"==typeof e?this.#u.iat=validateInput("setIssuedAt",epoch(new Date)+secs(e)):this.#u.iat=validateInput("setIssuedAt",e)}}class EncryptJWT{#a;#o;#s;#t;#l;#d;#p;#h;constructor(e={}){this.#h=new JWTClaimsBuilder(e)}setIssuer(e){return this.#h.iss=e,this}setSubject(e){return this.#h.sub=e,this}setAudience(e){return this.#h.aud=e,this}setJti(e){return this.#h.jti=e,this}setNotBefore(e){return this.#h.nbf=e,this}setExpirationTime(e){return this.#h.exp=e,this}setIssuedAt(e){return this.#h.iat=e,this}setProtectedHeader(e){if(this.#t)throw TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setKeyManagementParameters(e){if(this.#s)throw TypeError("setKeyManagementParameters can only be called once");return this.#s=e,this}setContentEncryptionKey(e){if(this.#a)throw TypeError("setContentEncryptionKey can only be called once");return this.#a=e,this}setInitializationVector(e){if(this.#o)throw TypeError("setInitializationVector can only be called once");return this.#o=e,this}replicateIssuerAsHeader(){return this.#l=!0,this}replicateSubjectAsHeader(){return this.#d=!0,this}replicateAudienceAsHeader(){return this.#p=!0,this}async encrypt(e,t){let r=new CompactEncrypt(this.#h.data());return this.#t&&(this.#l||this.#d||this.#p)&&(this.#t={...this.#t,iss:this.#l?this.#h.iss:void 0,sub:this.#d?this.#h.sub:void 0,aud:this.#p?this.#h.aud:void 0}),r.setProtectedHeader(this.#t),this.#o&&r.setInitializationVector(this.#o),this.#a&&r.setContentEncryptionKey(this.#a),this.#s&&r.setKeyManagementParameters(this.#s),r.encrypt(e,t)}}var __TURBOPACK__imported__module__86769__=__turbopack_context__.i(86769),__TURBOPACK__imported__module__86769__=__TURBOPACK__imported__module__86769__;let check=(e,t)=>{if("string"!=typeof e||!e)throw new JWKInvalid(`${t} missing or invalid`)};async function calculateJwkThumbprint(e,t){let r,n;if(isJWK(e))r=e;else if(isKeyLike(e))r=await exportJWK(e);else throw TypeError(invalidKeyInput(e,"CryptoKey","KeyObject","JSON Web Key"));if("sha256"!==(t??="sha256")&&"sha384"!==t&&"sha512"!==t)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(r.kty){case"AKP":check(r.alg,'"alg" (Algorithm) Parameter'),check(r.pub,'"pub" (Public key) Parameter'),n={alg:r.alg,kty:r.kty,pub:r.pub};break;case"EC":check(r.crv,'"crv" (Curve) Parameter'),check(r.x,'"x" (X Coordinate) Parameter'),check(r.y,'"y" (Y Coordinate) Parameter'),n={crv:r.crv,kty:r.kty,x:r.x,y:r.y};break;case"OKP":check(r.crv,'"crv" (Subtype of Key Pair) Parameter'),check(r.x,'"x" (Public Key) Parameter'),n={crv:r.crv,kty:r.kty,x:r.x};break;case"RSA":check(r.e,'"e" (Exponent) Parameter'),check(r.n,'"n" (Modulus) Parameter'),n={e:r.e,kty:r.kty,n:r.n};break;case"oct":check(r.k,'"k" (Key Value) Parameter'),n={k:r.k,kty:r.kty};break;default:throw new JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}let i=encode(JSON.stringify(n));return encode1(await digest(t,i))}async function calculateJwkThumbprintUri(e,t){t??="sha256";let r=await calculateJwkThumbprint(e,t);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${t.slice(-3)}:${r}`}async function importSPKI(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PUBLIC KEY-----"))throw TypeError('"spki" must be SPKI formatted string');return(0,__TURBOPACK__imported__module__99589__.fromSPKI)(e,t,r)}async function importX509(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN CERTIFICATE-----"))throw TypeError('"x509" must be X.509 formatted string');return(0,__TURBOPACK__imported__module__99589__.fromX509)(e,t,r)}async function importPKCS8(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PRIVATE KEY-----"))throw TypeError('"pkcs8" must be PKCS#8 formatted string');return(0,__TURBOPACK__imported__module__99589__.fromPKCS8)(e,t,r)}async function importJWK(e,t,r){let n;if(!isObject(e))throw TypeError("JWK must be an object");switch(t??=e.alg,n??=r?.extractable??e.ext,e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return decode(e.k);case"RSA":if("oth"in e&&void 0!==e.oth)throw new JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return jwkToKey({...e,alg:t,ext:n});case"AKP":if("string"!=typeof e.alg||!e.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(void 0!==t&&t!==e.alg)throw TypeError("JWK alg and alg option value mismatch");return jwkToKey({...e,ext:n});case"EC":case"OKP":return jwkToKey({...e,alg:t,ext:n});default:throw new JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}async function decryptKeyManagement(e,t,r,n,i){switch(e){case"dir":if(void 0!==r)throw new JWEInvalid("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==r)throw new JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let i,a;if(!isObject(n.epk))throw new JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(assertCryptoKey(t),!allowed(t))throw new JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let o=await importJWK(n.epk,e);if(assertCryptoKey(o),void 0!==n.apu){if("string"!=typeof n.apu)throw new JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{i=decode(n.apu)}catch{throw new JWEInvalid("Failed to base64url decode the apu")}}if(void 0!==n.apv){if("string"!=typeof n.apv)throw new JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{a=decode(n.apv)}catch{throw new JWEInvalid("Failed to base64url decode the apv")}}let s=await deriveKey(o,t,"ECDH-ES"===e?n.enc:e,"ECDH-ES"===e?cekLength(n.enc):parseInt(e.slice(-5,-2),10),i,a);if("ECDH-ES"===e)return s;if(void 0===r)throw new JWEInvalid("JWE Encrypted Key missing");return unwrap(e.slice(-6),s,r)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new JWEInvalid("JWE Encrypted Key missing");return assertCryptoKey(t),decrypt(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let a;if(void 0===r)throw new JWEInvalid("JWE Encrypted Key missing");if("number"!=typeof n.p2c)throw new JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');let o=i?.maxPBES2Count||1e4;if(n.p2c>o)throw new JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof n.p2s)throw new JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{a=decode(n.p2s)}catch{throw new JWEInvalid("Failed to base64url decode the p2s")}return unwrap1(e,t,r,n.p2c,a)}case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new JWEInvalid("JWE Encrypted Key missing");return unwrap(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let i,a;if(void 0===r)throw new JWEInvalid("JWE Encrypted Key missing");if("string"!=typeof n.iv)throw new JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof n.tag)throw new JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');try{i=decode(n.iv)}catch{throw new JWEInvalid("Failed to base64url decode the iv")}try{a=decode(n.tag)}catch{throw new JWEInvalid("Failed to base64url decode the tag")}return unwrap2(e,t,r,i,a)}default:throw new JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function validateAlgorithms(e,t){if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)}async function flattenedDecrypt(e,t,r){let n,i,a,o,s,c,u;if(!isObject(e))throw new JWEInvalid("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new JWEInvalid("JOSE Header missing");if(void 0!==e.iv&&"string"!=typeof e.iv)throw new JWEInvalid("JWE Initialization Vector incorrect type");if("string"!=typeof e.ciphertext)throw new JWEInvalid("JWE Ciphertext missing or incorrect type");if(void 0!==e.tag&&"string"!=typeof e.tag)throw new JWEInvalid("JWE Authentication Tag incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new JWEInvalid("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new JWEInvalid("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new JWEInvalid("JWE AAD incorrect type");if(void 0!==e.header&&!isObject(e.header))throw new JWEInvalid("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!isObject(e.unprotected))throw new JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");if(e.protected)try{let t=decode(e.protected);n=JSON.parse(decoder.decode(t))}catch{throw new JWEInvalid("JWE Protected Header is invalid")}if(!isDisjoint(n,e.header,e.unprotected))throw new JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let l={...n,...e.header,...e.unprotected};if(validateCrit(JWEInvalid,new Map,r?.crit,n,l),void 0!==l.zip)throw new JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:d,enc:p}=l;if("string"!=typeof d||!d)throw new JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof p||!p)throw new JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");let h=r&&validateAlgorithms("keyManagementAlgorithms",r.keyManagementAlgorithms),f=r&&validateAlgorithms("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(h&&!h.has(d)||!h&&d.startsWith("PBES2"))throw new JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter value not allowed');if(f&&!f.has(p))throw new JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==e.encrypted_key)try{i=decode(e.encrypted_key)}catch{throw new JWEInvalid("Failed to base64url decode the encrypted_key")}let m=!1;"function"==typeof t&&(t=await t(n,e),m=!0),checkKeyType("dir"===d?p:d,t,"decrypt");let g=await normalizeKey(t,d);try{a=await decryptKeyManagement(d,g,i,l,r)}catch(e){if(e instanceof TypeError||e instanceof JWEInvalid||e instanceof JOSENotSupported)throw e;a=generateCek(p)}if(void 0!==e.iv)try{o=decode(e.iv)}catch{throw new JWEInvalid("Failed to base64url decode the iv")}if(void 0!==e.tag)try{s=decode(e.tag)}catch{throw new JWEInvalid("Failed to base64url decode the tag")}let y=void 0!==e.protected?encode(e.protected):new Uint8Array;c=void 0!==e.aad?concat(y,encode("."),encode(e.aad)):y;try{u=decode(e.ciphertext)}catch{throw new JWEInvalid("Failed to base64url decode the ciphertext")}let b={plaintext:await decrypt1(p,a,u,o,s,c)};if(void 0!==e.protected&&(b.protectedHeader=n),void 0!==e.aad)try{b.additionalAuthenticatedData=decode(e.aad)}catch{throw new JWEInvalid("Failed to base64url decode the aad")}return(void 0!==e.unprotected&&(b.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(b.unprotectedHeader=e.header),m)?{...b,key:g}:b}async function compactDecrypt(e,t,r){if(e instanceof Uint8Array&&(e=decoder.decode(e)),"string"!=typeof e)throw new JWEInvalid("Compact JWE must be a string or Uint8Array");let{0:n,1:i,2:a,3:o,4:s,length:c}=e.split(".");if(5!==c)throw new JWEInvalid("Invalid Compact JWE");let u=await flattenedDecrypt({ciphertext:o,iv:a||void 0,protected:n,tag:s||void 0,encrypted_key:i||void 0},t,r),l={plaintext:u.plaintext,protectedHeader:u.protectedHeader};return"function"==typeof t?{...l,key:u.key}:l}async function jwtDecrypt(e,t,r){let n=await compactDecrypt(e,t,r),i=validateClaimsSet(n.protectedHeader,n.plaintext,r),{protectedHeader:a}=n;if(void 0!==a.iss&&a.iss!==i.iss)throw new JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',i,"iss","mismatch");if(void 0!==a.sub&&a.sub!==i.sub)throw new JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',i,"sub","mismatch");if(void 0!==a.aud&&JSON.stringify(a.aud)!==JSON.stringify(i.aud))throw new JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',i,"aud","mismatch");let o={payload:i,protectedHeader:a};return"function"==typeof t?{...o,key:n.key}:o}let cookieNameRegExp=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,cookieValueRegExp=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,domainValueRegExp=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,pathValueRegExp=/^[\u0020-\u003A\u003D-\u007E]*$/,__toString=Object.prototype.toString,NullObject=(()=>{let e=function(){};return e.prototype=Object.create(null),e})();function parse(e,t){let r=new NullObject,n=e.length;if(n<2)return r;let i=t?.decode||decode1,a=0;do{let t=e.indexOf("=",a);if(-1===t)break;let o=e.indexOf(";",a),s=-1===o?n:o;if(t>s){a=e.lastIndexOf(";",t-1)+1;continue}let c=startIndex(e,a,t),u=endIndex(e,t,c),l=e.slice(c,u);if(void 0===r[l]){let n=startIndex(e,t+1,s),a=endIndex(e,s,n),o=i(e.slice(n,a));r[l]=o}a=s+1}while(a<n)return r}function startIndex(e,t,r){do{let r=e.charCodeAt(t);if(32!==r&&9!==r)return t}while(++t<r)return r}function endIndex(e,t,r){for(;t>r;){let r=e.charCodeAt(--t);if(32!==r&&9!==r)return t+1}return r}function serialize(e,t,r){let n=r?.encode||encodeURIComponent;if(!cookieNameRegExp.test(e))throw TypeError(`argument name is invalid: ${e}`);let i=n(t);if(!cookieValueRegExp.test(i))throw TypeError(`argument val is invalid: ${t}`);let a=e+"="+i;if(!r)return a;if(void 0!==r.maxAge){if(!Number.isInteger(r.maxAge))throw TypeError(`option maxAge is invalid: ${r.maxAge}`);a+="; Max-Age="+r.maxAge}if(r.domain){if(!domainValueRegExp.test(r.domain))throw TypeError(`option domain is invalid: ${r.domain}`);a+="; Domain="+r.domain}if(r.path){if(!pathValueRegExp.test(r.path))throw TypeError(`option path is invalid: ${r.path}`);a+="; Path="+r.path}if(r.expires){if(!isDate(r.expires)||!Number.isFinite(r.expires.valueOf()))throw TypeError(`option expires is invalid: ${r.expires}`);a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.partitioned&&(a+="; Partitioned"),r.priority)switch("string"==typeof r.priority?r.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${r.sameSite}`)}return a}function decode1(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}function isDate(e){return"[object Date]"===__toString.call(e)}__turbopack_context__.s(["parse",()=>parse,"serialize",()=>serialize],57816);var __TURBOPACK__imported__module__57816__=__turbopack_context__.i(57816);let{parse:parseCookie}=__TURBOPACK__imported__module__57816__,DEFAULT_MAX_AGE=2592e3,now=()=>Date.now()/1e3|0,alg="dir",enc="A256CBC-HS512";async function encode2(e){let{token:t={},secret:r,maxAge:n=DEFAULT_MAX_AGE,salt:i}=e,a=Array.isArray(r)?r:[r],o=await getDerivedEncryptionKey(enc,a[0],i),s=await calculateJwkThumbprint({kty:"oct",k:__TURBOPACK__imported__module__86769__.encode(o)},`sha${o.byteLength<<3}`);return await new EncryptJWT(t).setProtectedHeader({alg,enc,kid:s}).setIssuedAt().setExpirationTime(now()+n).setJti(crypto.randomUUID()).encrypt(o)}async function decode2(e){let{token:t,secret:r,salt:n}=e,i=Array.isArray(r)?r:[r];if(!t)return null;let{payload:a}=await jwtDecrypt(t,async({kid:e,enc:t})=>{for(let r of i){let i=await getDerivedEncryptionKey(t,r,n);if(void 0===e||e===await calculateJwkThumbprint({kty:"oct",k:__TURBOPACK__imported__module__86769__.encode(i)},`sha${i.byteLength<<3}`))return i}throw Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:[alg],contentEncryptionAlgorithms:[enc,"A256GCM"]});return a}async function getToken(e){let{secureCookie:t,cookieName:r=defaultCookies(t??!1).sessionToken.name,decode:n=decode2,salt:i=r,secret:a,logger:o=console,raw:s,req:c}=e;if(!c)throw Error("Must pass `req` to JWT getToken()");let u=c.headers instanceof Headers?c.headers:new Headers(c.headers),l=new SessionStore({name:r,options:{secure:t}},parseCookie(u.get("cookie")??""),o).value,d=u.get("authorization");if(l||d?.split(" ")[0]!=="Bearer"||(l=decodeURIComponent(d.split(" ")[1])),!l)return null;if(s)return l;if(!a)throw new MissingSecret("Must pass `secret` if not set to JWT getToken()");try{return await n({token:l,secret:a,salt:i})}catch{return null}}async function getDerivedEncryptionKey(e,t,r){let n;switch(e){case"A256CBC-HS512":n=64;break;case"A256GCM":n=32;break;default:throw Error("Unsupported JWT Content Encryption Algorithm")}return await hkdf1("sha256",t,r,`Auth.js Generated Encryption Key (${r})`,n)}async function createCallbackUrl({options:e,paramValue:t,cookieValue:r}){let{url:n,callbacks:i}=e,a=n.origin;return t?a=await i.redirect({url:t,baseUrl:n.origin}):r&&(a=await i.redirect({url:r,baseUrl:n.origin})),{callbackUrl:a,callbackUrlCookie:a!==r?a:void 0}}var __TURBOPACK__imported__module__57816__1=__TURBOPACK__imported__module__57816__;let red="\x1b[31m",yellow="\x1b[33m",grey="\x1b[90m",reset="\x1b[0m",defaultLogger={error(e){let t=e instanceof AuthError?e.type:e.name;if(console.error(`${red}[auth][error]${reset} ${t}: ${e.message}`),e.cause&&"object"==typeof e.cause&&"err"in e.cause&&e.cause.err instanceof Error){let{err:t,...r}=e.cause;console.error(`${red}[auth][cause]${reset}:`,t.stack),r&&console.error(`${red}[auth][details]${reset}:`,JSON.stringify(r,null,2))}else e.stack&&console.error(e.stack.replace(/.*/,"").substring(1))},warn(e){let t="https://warnings.authjs.dev";console.warn(`${yellow}[auth][warn][${e}]${reset}`,`Read more: ${t}`)},debug(e,t){console.log(`${grey}[auth][debug]:${reset} ${e}`,JSON.stringify(t,null,2))}};function setLogger(e){let t={...defaultLogger};return e.debug||(t.debug=()=>{}),e.logger?.error&&(t.error=e.logger.error),e.logger?.warn&&(t.warn=e.logger.warn),e.logger?.debug&&(t.debug=e.logger.debug),e.logger??(e.logger=t),t}let actions=["providers","session","csrf","signin","signout","callback","verify-request","error","webauthn-options"];function isAuthAction(e){return actions.includes(e)}let{parse:parseCookie1,serialize:serializeCookie}=__TURBOPACK__imported__module__57816__1;async function getBody(e){if(!("body"in e)||!e.body||"POST"!==e.method)return;let t=e.headers.get("content-type");return t?.includes("application/json")?await e.json():t?.includes("application/x-www-form-urlencoded")?Object.fromEntries(new URLSearchParams(await e.text())):void 0}async function toInternalRequest(e,t){try{if("GET"!==e.method&&"POST"!==e.method)throw new UnknownAction("Only GET and POST requests are supported");t.basePath??(t.basePath="/auth");let r=new URL(e.url),{action:n,providerId:i}=parseActionAndProviderId(r.pathname,t.basePath);return{url:r,action:n,providerId:i,method:e.method,headers:Object.fromEntries(e.headers),body:e.body?await getBody(e):void 0,cookies:parseCookie1(e.headers.get("cookie")??"")??{},error:r.searchParams.get("error")??void 0,query:Object.fromEntries(r.searchParams)}}catch(n){let r=setLogger(t);r.error(n),r.debug("request",e)}}function toRequest(e){return new Request(e.url,{headers:e.headers,method:e.method,body:"POST"===e.method?JSON.stringify(e.body??{}):void 0})}function toResponse(e){let t=new Headers(e.headers);e.cookies?.forEach(e=>{let{name:r,value:n,options:i}=e,a=serializeCookie(r,n,i);t.has("Set-Cookie")?t.append("Set-Cookie",a):t.set("Set-Cookie",a)});let r=e.body;"application/json"===t.get("content-type")?r=JSON.stringify(e.body):"application/x-www-form-urlencoded"===t.get("content-type")&&(r=new URLSearchParams(e.body).toString());let n=new Response(r,{headers:t,status:e.redirect?302:e.status??200});return e.redirect&&n.headers.set("Location",e.redirect),n}async function createHash(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("").toString()}function randomString(e){let t=e=>("0"+e.toString(16)).slice(-2),r=(e,r)=>e+t(r);return Array.from(crypto.getRandomValues(new Uint8Array(e))).reduce(r,"")}function parseActionAndProviderId(e,t){let r=e.match(RegExp(`^${t}(.+)`));if(null===r)throw new UnknownAction(`Cannot parse action at ${e}`);let n=r.at(-1).replace(/^\//,"").split("/").filter(Boolean);if(1!==n.length&&2!==n.length)throw new UnknownAction(`Cannot parse action at ${e}`);let[i,a]=n;if(!isAuthAction(i)||a&&!["signin","callback","webauthn-options"].includes(i))throw new UnknownAction(`Cannot parse action at ${e}`);return{action:i,providerId:"undefined"==a?void 0:a}}async function createCSRFToken({options:e,cookieValue:t,isPost:r,bodyValue:n}){if(t){let[i,a]=t.split("|");if(a===await createHash(`${i}${e.secret}`))return{csrfTokenVerified:r&&i===n,csrfToken:i}}let i=randomString(32),a=await createHash(`${i}${e.secret}`);return{cookie:`${i}|${a}`,csrfToken:i}}function validateCSRF(e,t){if(!t)throw new MissingCSRF(`CSRF token was missing during an action ${e}`)}function isObject1(e){return null!==e&&"object"==typeof e}function merge(e,...t){if(!t.length)return e;let r=t.shift();if(isObject1(e)&&isObject1(r))for(let t in r)isObject1(r[t])?(isObject1(e[t])||(e[t]=Array.isArray(r[t])?[]:{}),merge(e[t],r[t])):void 0!==r[t]&&(e[t]=r[t]);return merge(e,...t)}let skipCSRFCheck=Symbol("skip-csrf-check"),raw=Symbol("return-type-raw"),customFetch=Symbol("custom-fetch"),conformInternal=Symbol("conform-internal");function parseProviders(e){let{providerId:t,config:r}=e,n=new URL(r.basePath??"/auth",e.url.origin),i=r.providers.map(e=>{let t="function"==typeof e?e():e,{options:i,...a}=t,o=i?.id??a.id,s=merge(a,i,{signinUrl:`${n}/signin/${o}`,callbackUrl:`${n}/callback/${o}`});if("oauth"===t.type||"oidc"===t.type){s.redirectProxyUrl??(s.redirectProxyUrl=i?.redirectProxyUrl??r.redirectProxyUrl);let e=normalizeOAuth(s);return e.authorization?.url.searchParams.get("response_mode")==="form_post"&&delete e.redirectProxyUrl,e[customFetch]??(e[customFetch]=i?.[customFetch]),e}return s}),a=i.find(({id:e})=>e===t);if(t&&!a){let e=i.map(e=>e.id).join(", ");throw Error(`Provider with id "${t}" not found. Available providers: [${e}].`)}return{providers:i,provider:a}}function normalizeOAuth(e){e.issuer&&(e.wellKnown??(e.wellKnown=`${e.issuer}/.well-known/openid-configuration`));let t=normalizeEndpoint(e.authorization,e.issuer);t&&!t.url?.searchParams.has("scope")&&t.url.searchParams.set("scope","openid profile email");let r=normalizeEndpoint(e.token,e.issuer),n=normalizeEndpoint(e.userinfo,e.issuer),i=e.checks??["pkce"];return e.redirectProxyUrl&&(i.includes("state")||i.push("state"),e.redirectProxyUrl=`${e.redirectProxyUrl}/callback/${e.id}`),{...e,authorization:t,token:r,checks:i,userinfo:n,profile:e.profile??defaultProfile,account:e.account??defaultAccount}}let defaultProfile=e=>stripUndefined1({id:e.sub??e.id??crypto.randomUUID(),name:e.name??e.nickname??e.preferred_username,email:e.email,image:e.picture}),defaultAccount=e=>stripUndefined1({access_token:e.access_token,id_token:e.id_token,refresh_token:e.refresh_token,expires_at:e.expires_at,scope:e.scope,token_type:e.token_type,session_state:e.session_state});function stripUndefined1(e){let t={};for(let[r,n]of Object.entries(e))void 0!==n&&(t[r]=n);return t}function normalizeEndpoint(e,t){if(!e&&t)return;if("string"==typeof e)return{url:new URL(e)};let r=new URL(e?.url??"https://authjs.dev");if(e?.params!=null)for(let[t,n]of Object.entries(e.params))"claims"===t&&(n=JSON.stringify(n)),r.searchParams.set(t,String(n));return{url:r,request:e?.request,conform:e?.conform,...e?.clientPrivateKey?{clientPrivateKey:e?.clientPrivateKey}:null}}function isOIDCProvider(e){return"oidc"===e.type}function isOAuth2Provider(e){return"oauth"===e.type}function isOAuthProvider(e){return"oauth"===e.type||"oidc"===e.type}let defaultCallbacks={signIn:()=>!0,redirect:({url:e,baseUrl:t})=>e.startsWith("/")?`${t}${e}`:new URL(e).origin===t?e:t,session:({session:e})=>({user:{name:e.user?.name,email:e.user?.email,image:e.user?.image},expires:e.expires?.toISOString?.()??e.expires}),jwt:({token:e})=>e};async function init({authOptions:e,providerId:t,action:r,url:n,cookies:i,callbackUrl:a,csrfToken:o,csrfDisabled:s,isPost:c}){let u=setLogger(e),{providers:l,provider:d}=parseProviders({url:n,providerId:t,config:e}),p=2592e3,h=!1;if((d?.type==="oauth"||d?.type==="oidc")&&d.redirectProxyUrl)try{h=new URL(d.redirectProxyUrl).origin===n.origin}catch{throw TypeError(`redirectProxyUrl must be a valid URL. Received: ${d.redirectProxyUrl}`)}let f={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...e,url:n,action:r,provider:d,cookies:merge(defaultCookies(e.useSecureCookies??"https:"===n.protocol),e.cookies),providers:l,session:{strategy:e.adapter?"database":"jwt",maxAge:p,updateAge:86400,generateSessionToken:()=>crypto.randomUUID(),...e.session},jwt:{secret:e.secret,maxAge:e.session?.maxAge??p,encode:encode2,decode:decode2,...e.jwt},events:eventsErrorHandler(e.events??{},u),adapter:adapterErrorHandler(e.adapter,u),callbacks:{...defaultCallbacks,...e.callbacks},logger:u,callbackUrl:n.origin,isOnRedirectProxy:h,experimental:{...e.experimental}},m=[];if(s)f.csrfTokenVerified=!0;else{let{csrfToken:e,cookie:t,csrfTokenVerified:r}=await createCSRFToken({options:f,cookieValue:i?.[f.cookies.csrfToken.name],isPost:c,bodyValue:o});f.csrfToken=e,f.csrfTokenVerified=r,t&&m.push({name:f.cookies.csrfToken.name,value:t,options:f.cookies.csrfToken.options})}let{callbackUrl:g,callbackUrlCookie:y}=await createCallbackUrl({options:f,cookieValue:i?.[f.cookies.callbackUrl.name],paramValue:a});return f.callbackUrl=g,y&&m.push({name:f.cookies.callbackUrl.name,value:y,options:f.cookies.callbackUrl.options}),{options:f,cookies:m}}function eventsErrorHandler(e,t){return Object.keys(e).reduce((r,n)=>(r[n]=async(...r)=>{try{let t=e[n];return await t(...r)}catch(e){t.error(new EventError(e))}},r),{})}function adapterErrorHandler(e,t){if(e)return Object.keys(e).reduce((r,n)=>(r[n]=async(...r)=>{try{t.debug(`adapter_${n}`,{args:r});let i=e[n];return await i(...r)}catch(r){let e=new AdapterError(r);throw t.error(e),e}},r),{})}var _SessionStore_instances,_SessionStore_chunks,_SessionStore_option,_SessionStore_logger,_SessionStore_chunk,_SessionStore_clean,n1,l,u,t,i,o,r,f,e,c,s,a,h={},v=[],p=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,y=Array.isArray;function d(e,t){for(var r in t)e[r]=t[r];return e}function w(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function _(e,t,r){var n,i,a,o={};for(a in t)"key"==a?n=t[a]:"ref"==a?i=t[a]:o[a]=t[a];if(arguments.length>2&&(o.children=arguments.length>3?n1.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===o[a]&&(o[a]=e.defaultProps[a]);return g(e,o,n,i,null)}function g(e,t,r,n,i){var a={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==i?++u:i,__i:-1,__u:0};return null==i&&null!=l.vnode&&l.vnode(a),a}function m(){return{current:null}}function b(e){return e.children}function k(e,t){this.props=e,this.context=t}function x(e,t){if(null==t)return e.__?x(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?x(e):null}function C(e){var t,r;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e){e.__e=e.__c.base=r.__e;break}return C(e)}}function S(e){(!e.__d&&(e.__d=!0)&&i.push(e)&&!M.__r++||o!==l.debounceRendering)&&((o=l.debounceRendering)||r)(M)}function M(){var e,t,r,n,a,o,s,c;for(i.sort(f);e=i.shift();)e.__d&&(t=i.length,n=void 0,o=(a=(r=e).__v).__e,s=[],c=[],r.__P&&((n=d({},a)).__v=a.__v+1,l.vnode&&l.vnode(n),O(r.__P,n,a,r.__n,r.__P.namespaceURI,32&a.__u?[o]:null,s,null==o?x(a):o,!!(32&a.__u),c),n.__v=a.__v,n.__.__k[n.__i]=n,j(s,n,c),n.__e!=o&&C(n)),i.length>t&&i.sort(f));M.__r=0}function P(e,t,r,n,i,a,o,s,c,u,l){var d,p,f,m,g,y=n&&n.__k||v,b=t.length;for(r.__d=c,$(r,t,y),c=r.__d,d=0;d<b;d++)null!=(f=r.__k[d])&&(p=-1===f.__i?h:y[f.__i]||h,f.__i=d,O(e,f,p,i,a,o,s,c,u,l),m=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&N(p.ref,null,f),l.push(f.ref,f.__c||m,f)),null==g&&null!=m&&(g=m),65536&f.__u||p.__k===f.__k?c=I(f,c,e):"function"==typeof f.type&&void 0!==f.__d?c=f.__d:m&&(c=m.nextSibling),f.__d=void 0,f.__u&=-196609);r.__d=c,r.__e=g}function $(e,t,r){var n,i,a,o,s,c=t.length,u=r.length,l=u,d=0;for(e.__k=[],n=0;n<c;n++)null!=(i=t[n])&&"boolean"!=typeof i&&"function"!=typeof i?(o=n+d,(i=e.__k[n]="string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?g(null,i,null,null,null):y(i)?g(b,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?g(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=e,i.__b=e.__b+1,a=null,-1!==(s=i.__i=L(i,r,o,l))&&(l--,(a=r[s])&&(a.__u|=131072)),null==a||null===a.__v?(-1==s&&d--,"function"!=typeof i.type&&(i.__u|=65536)):s!==o&&(s==o-1?d--:s==o+1?d++:(s>o?d--:d++,i.__u|=65536))):i=e.__k[n]=null;if(l)for(n=0;n<u;n++)null!=(a=r[n])&&0==(131072&a.__u)&&(a.__e==e.__d&&(e.__d=x(a)),V(a,a))}function I(e,t,r){var n,i;if("function"==typeof e.type){for(n=e.__k,i=0;n&&i<n.length;i++)n[i]&&(n[i].__=e,t=I(n[i],t,r));return t}e.__e!=t&&(t&&e.type&&!r.contains(t)&&(t=x(e)),r.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(null!=t&&8===t.nodeType)return t}function H(e,t){return t=t||[],null==e||"boolean"==typeof e||(y(e)?e.some(function(e){H(e,t)}):t.push(e)),t}function L(e,t,r,n){var i=e.key,a=e.type,o=r-1,s=r+1,c=t[r];if(null===c||c&&i==c.key&&a===c.type&&0==(131072&c.__u))return r;if(n>+(null!=c&&0==(131072&c.__u)))for(;o>=0||s<t.length;){if(o>=0){if((c=t[o])&&0==(131072&c.__u)&&i==c.key&&a===c.type)return o;o--}if(s<t.length){if((c=t[s])&&0==(131072&c.__u)&&i==c.key&&a===c.type)return s;s++}}return -1}function T(e,t,r){"-"===t[0]?e.setProperty(t,null==r?"":r):e[t]=null==r?"":"number"!=typeof r||p.test(t)?r:r+"px"}function A(t,r,n,i,a){var o;e:if("style"===r)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof i&&(t.style.cssText=i=""),i)for(r in i)n&&r in n||T(t.style,r,"");if(n)for(r in n)i&&n[r]===i[r]||T(t.style,r,n[r])}else if("o"===r[0]&&"n"===r[1])o=r!==(r=r.replace(/(PointerCapture)$|Capture$/i,"$1")),r=r.toLowerCase()in t||"onFocusOut"===r||"onFocusIn"===r?r.toLowerCase().slice(2):r.slice(2),t.l||(t.l={}),t.l[r+o]=n,n?i?n.u=i.u:(n.u=e,t.addEventListener(r,o?s:c,o)):t.removeEventListener(r,o?s:c,o);else{if("http://www.w3.org/2000/svg"==a)r=r.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=r&&"height"!=r&&"href"!=r&&"list"!=r&&"form"!=r&&"tabIndex"!=r&&"download"!=r&&"rowSpan"!=r&&"colSpan"!=r&&"role"!=r&&"popover"!=r&&r in t)try{t[r]=null==n?"":n;break e}catch(t){}"function"==typeof n||(null==n||!1===n&&"-"!==r[4]?t.removeAttribute(r):t.setAttribute(r,"popover"==r&&1==n?"":n))}}function F(t){return function(r){if(this.l){var n=this.l[r.type+t];if(null==r.t)r.t=e++;else if(r.t<n.u)return;return n(l.event?l.event(r):r)}}}function O(e,t,r,n,i,a,o,s,c,u){var p,h,f,m,g,w,_,v,E,S,R,x,A,T,C,I,j=t.type;if(void 0!==t.constructor)return null;128&r.__u&&(c=!!(32&r.__u),a=[s=t.__e=r.__e]),(p=l.__b)&&p(t);e:if("function"==typeof j)try{if(v=t.props,E="prototype"in j&&j.prototype.render,S=(p=j.contextType)&&n[p.__c],R=p?S?S.props.value:p.__:n,r.__c?_=(h=t.__c=r.__c).__=h.__E:(E?t.__c=h=new j(v,R):(t.__c=h=new k(v,R),h.constructor=j,h.render=q),S&&S.sub(h),h.props=v,h.state||(h.state={}),h.context=R,h.__n=n,f=h.__d=!0,h.__h=[],h._sb=[]),E&&null==h.__s&&(h.__s=h.state),E&&null!=j.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=d({},h.__s)),d(h.__s,j.getDerivedStateFromProps(v,h.__s))),m=h.props,g=h.state,h.__v=t,f)E&&null==j.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),E&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(E&&null==j.getDerivedStateFromProps&&v!==m&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(v,R),!h.__e&&(null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(v,h.__s,R)||t.__v===r.__v)){for(t.__v!==r.__v&&(h.props=v,h.state=h.__s,h.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(e){e&&(e.__=t)}),x=0;x<h._sb.length;x++)h.__h.push(h._sb[x]);h._sb=[],h.__h.length&&o.push(h);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(v,h.__s,R),E&&null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(m,g,w)})}if(h.context=R,h.props=v,h.__P=e,h.__e=!1,A=l.__r,T=0,E){for(h.state=h.__s,h.__d=!1,A&&A(t),p=h.render(h.props,h.state,h.context),C=0;C<h._sb.length;C++)h.__h.push(h._sb[C]);h._sb=[]}else do h.__d=!1,A&&A(t),p=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++T<25)h.state=h.__s,null!=h.getChildContext&&(n=d(d({},n),h.getChildContext())),E&&!f&&null!=h.getSnapshotBeforeUpdate&&(w=h.getSnapshotBeforeUpdate(m,g)),P(e,y(I=null!=p&&p.type===b&&null==p.key?p.props.children:p)?I:[I],t,r,n,i,a,o,s,c,u),h.base=t.__e,t.__u&=-161,h.__h.length&&o.push(h),_&&(h.__E=h.__=null)}catch(e){if(t.__v=null,c||null!=a){for(t.__u|=c?160:128;s&&8===s.nodeType&&s.nextSibling;)s=s.nextSibling;a[a.indexOf(s)]=null,t.__e=s}else t.__e=r.__e,t.__k=r.__k;l.__e(e,t,r)}else null==a&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=z(r.__e,t,r,n,i,a,o,c,u);(p=l.diffed)&&p(t)}function j(e,t,r){t.__d=void 0;for(var n=0;n<r.length;n++)N(r[n],r[++n],r[++n]);l.__c&&l.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){l.__e(e,t.__v)}})}function z(e,t,r,n,i,a,o,s,c){var u,d,p,f,m,g,b,_=r.props,v=t.props,E=t.type;if("svg"===E?i="http://www.w3.org/2000/svg":"math"===E?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),null!=a){for(u=0;u<a.length;u++)if((m=a[u])&&"setAttribute"in m==!!E&&(E?m.localName===E:3===m.nodeType)){e=m,a[u]=null;break}}if(null==e){if(null===E)return document.createTextNode(v);e=document.createElementNS(i,E,v.is&&v),s&&(l.__m&&l.__m(t,a),s=!1),a=null}if(null===E)_===v||s&&e.data===v||(e.data=v);else{if(a=a&&n1.call(e.childNodes),_=r.props||h,!s&&null!=a)for(_={},u=0;u<e.attributes.length;u++)_[(m=e.attributes[u]).name]=m.value;for(u in _)if(m=_[u],"children"==u);else if("dangerouslySetInnerHTML"==u)p=m;else if(!(u in v)){if("value"==u&&"defaultValue"in v||"checked"==u&&"defaultChecked"in v)continue;A(e,u,null,m,i)}for(u in v)m=v[u],"children"==u?f=m:"dangerouslySetInnerHTML"==u?d=m:"value"==u?g=m:"checked"==u?b=m:s&&"function"!=typeof m||_[u]===m||A(e,u,m,_[u],i);if(d)s||p&&(d.__html===p.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(p&&(e.innerHTML=""),P(e,y(f)?f:[f],t,r,n,"foreignObject"===E?"http://www.w3.org/1999/xhtml":i,a,o,a?a[0]:r.__k&&x(r,0),s,c),null!=a)for(u=a.length;u--;)w(a[u]);s||(u="value","progress"===E&&null==g?e.removeAttribute("value"):void 0===g||g===e[u]&&("progress"!==E||g)&&("option"!==E||g===_[u])||A(e,u,g,_[u],i),u="checked",void 0!==b&&b!==e[u]&&A(e,u,b,_[u],i))}return e}function N(e,t,r){try{if("function"==typeof e){var n="function"==typeof e.__u;n&&e.__u(),n&&null==t||(e.__u=e(t))}else e.current=t}catch(e){l.__e(e,r)}}function V(e,t,r){var n,i;if(l.unmount&&l.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||N(n,null,t)),null!=(n=e.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(e){l.__e(e,t)}n.base=n.__P=null}if(n=e.__k)for(i=0;i<n.length;i++)n[i]&&V(n[i],t,r||"function"!=typeof e.type);r||w(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function q(e,t,r){return this.constructor(e,r)}function B(e,t,r){var n,i,a,o;l.__&&l.__(e,t),i=(n="function"==typeof r)?null:r&&r.__k||t.__k,a=[],o=[],O(t,e=(!n&&r||t).__k=_(b,null,[e]),i||h,h,t.namespaceURI,!n&&r?[r]:i?null:t.firstChild?n1.call(t.childNodes):null,a,!n&&r?r:i?i.__e:t.firstChild,n,o),j(a,e,o)}function D(e,t){B(e,t,D)}function E(e,t,r){var n,i,a,o,s=d({},e.props);for(a in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),t)"key"==a?n=t[a]:"ref"==a?i=t[a]:s[a]=void 0===t[a]&&void 0!==o?o[a]:t[a];return arguments.length>2&&(s.children=arguments.length>3?n1.call(arguments,2):r),g(e.type,s,n||e.key,i||e.ref,null)}function G(e,t){var r={__c:t="__cC"+a++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var r,n;return this.getChildContext||(r=new Set,(n={})[t]=this,this.getChildContext=function(){return n},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&r.forEach(function(e){e.__e=!0,S(e)})},this.sub=function(e){r.add(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){r&&r.delete(e),t&&t.call(e)}}),e.children}};return r.Provider.__=r.Consumer.contextType=r}n1=v.slice,l={__e:function(e,t,r,n){for(var i,a,o;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&null!=a.getDerivedStateFromError&&(i.setState(a.getDerivedStateFromError(e)),o=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,n||{}),o=i.__d),o)return i.__E=i}catch(t){e=t}throw e}},u=0,t=function(e){return null!=e&&null==e.constructor},k.prototype.setState=function(e,t){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=d({},this.state),"function"==typeof e&&(e=e(d({},r),this.props)),e&&d(r,e),null!=e&&this.__v&&(t&&this._sb.push(t),S(this))},k.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),S(this))},k.prototype.render=b,i=[],r="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,f=function(e,t){return e.__v.__b-t.__v.__b},M.__r=0,e=0,c=F(!1),s=F(!0),a=0;var r1=/[\s\n\\/='"\0<>]/,o1=/^(xlink|xmlns|xml)([A-Z])/,i1=/^accessK|^auto[A-Z]|^cell|^ch|^col|cont|cross|dateT|encT|form[A-Z]|frame|hrefL|inputM|maxL|minL|noV|playsI|popoverT|readO|rowS|src[A-Z]|tabI|useM|item[A-Z]/,a1=/^ac|^ali|arabic|basel|cap|clipPath$|clipRule$|color|dominant|enable|fill|flood|font|glyph[^R]|horiz|image|letter|lighting|marker[^WUH]|overline|panose|pointe|paint|rendering|shape|stop|strikethrough|stroke|text[^L]|transform|underline|unicode|units|^v[^i]|^w|^xH/,c1=new Set(["draggable","spellcheck"]),s1=/["&<]/;function l1(e){if(0===e.length||!1===s1.test(e))return e;for(var t=0,r=0,n="",i="";r<e.length;r++){switch(e.charCodeAt(r)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;default:continue}r!==t&&(n+=e.slice(t,r)),n+=i,t=r+1}return r!==t&&(n+=e.slice(t,r)),n}var u1={},f1=new Set(["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","fill-opacity","flex","flex-grow","flex-negative","flex-order","flex-positive","flex-shrink","flood-opacity","font-weight","grid-column","grid-row","line-clamp","line-height","opacity","order","orphans","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","widows","z-index","zoom"]),p1=/[A-Z]/g;function h1(e){var t="";for(var r in e){var n=e[r];if(null!=n&&""!==n){var i="-"==r[0]?r:u1[r]||(u1[r]=r.replace(p1,"-$&").toLowerCase()),a=";";"number"!=typeof n||i.startsWith("--")||f1.has(i)||(a="px;"),t=t+i+":"+n+a}}return t||void 0}function d1(){this.__d=!0}function _1(e,t){return{__v:e,context:t,props:e.props,setState:d1,forceUpdate:d1,__d:!0,__h:[]}}function v1(e,t,r){if(!e.s){if(r instanceof m1){if(!r.s)return void(r.o=v1.bind(null,e,t));1&t&&(t=r.s),r=r.v}if(r&&r.then)return void r.then(v1.bind(null,e,t),v1.bind(null,e,2));e.s=t,e.v=r;let n=e.o;n&&n(e)}}var m1=function(){function e(){}return e.prototype.then=function(t,r){var n=new e,i=this.s;if(i){var a=1&i?t:r;if(a){try{v1(n,1,a(this.v))}catch(e){v1(n,2,e)}return n}return this}return this.o=function(e){try{var i=e.v;1&e.s?v1(n,1,t?t(i):i):r?v1(n,1,r(i)):v1(n,2,i)}catch(e){v1(n,2,e)}},n},e}();function y1(e){return e instanceof m1&&1&e.s}function g1(e,t,r){for(var n;;){var i=e();if(y1(i)&&(i=i.v),!i)return a;if(i.then){n=0;break}var a=r();if(a&&a.then){if(!y1(a)){n=1;break}a=a.s}if(t){var o=t();if(o&&o.then&&!y1(o)){n=2;break}}}var s=new m1,c=v1.bind(null,s,2);return(0===n?i.then(l):1===n?a.then(u):o.then(d)).then(void 0,c),s;function u(n){a=n;do{if(t&&(o=t())&&o.then&&!y1(o))return void o.then(d).then(void 0,c);if(!(i=e())||y1(i)&&!i.v)return void v1(s,1,a);if(i.then)return void i.then(l).then(void 0,c);y1(a=r())&&(a=a.v)}while(!a||!a.then)a.then(u).then(void 0,c)}function l(e){e?(a=r())&&a.then?a.then(u).then(void 0,c):u(a):v1(s,1,a)}function d(){(i=e())?i.then?i.then(l).then(void 0,c):l(i):v1(s,1,a)}}function b1(e,t){try{var r=e()}catch(e){return t(!0,e)}return r&&r.then?r.then(t.bind(null,!1),t.bind(null,!0)):t(!1,r)}var k1,w1,x1,C1,S1=function(e,t){try{var r=l.__s;l.__s=!0,k1=l.__b,w1=l.diffed,x1=l.__r,C1=l.unmount;var n=_(b,null);return n.__k=[e],Promise.resolve(b1(function(){return Promise.resolve(U(e,t||A1,!1,void 0,n,!0,void 0)).then(function(e){var t,r=function(){if(E1(e)){var r=function(){var e=i.join(j1);return t=1,e},n=0,i=e,a=g1(function(){return!!i.some(function(e){return e&&"function"==typeof e.then})&&n++<25},void 0,function(){return Promise.resolve(Promise.all(i)).then(function(e){i=e.flat()})});return a&&a.then?a.then(r):r()}}();return r&&r.then?r.then(function(r){return t?r:e}):t?r:e})},function(t,n){if(l.__c&&l.__c(e,L1),l.__s=r,L1.length=0,t)throw n;return n}))}catch(e){return Promise.reject(e)}},A1={},L1=[],E1=Array.isArray,T1=Object.assign,j1="";function D1(e,t,r){var n=l.__s;l.__s=!0,k1=l.__b,w1=l.diffed,x1=l.__r,C1=l.unmount;var i=_(b,null);i.__k=[e];try{var a=U(e,t||A1,!1,void 0,i,!1,r);return E1(a)?a.join(j1):a}catch(e){if(e.then)throw Error('Use "renderToStringAsync" for suspenseful rendering.');throw e}finally{l.__c&&l.__c(e,L1),l.__s=n,L1.length=0}}function P1(e,t){var r,n=e.type,i=!0;return e.__c?(i=!1,(r=e.__c).state=r.__s):r=new n(e.props,t),e.__c=r,r.__v=e,r.props=e.props,r.context=t,r.__d=!0,null==r.state&&(r.state=A1),null==r.__s&&(r.__s=r.state),n.getDerivedStateFromProps?r.state=T1({},r.state,n.getDerivedStateFromProps(r.props,r.state)):i&&r.componentWillMount?(r.componentWillMount(),r.state=r.__s!==r.state?r.__s:r.state):!i&&r.componentWillUpdate&&r.componentWillUpdate(),x1&&x1(e),r.render(r.props,r.state,t)}function U(e,t,r,n,i,a,o){if(null==e||!0===e||!1===e||e===j1)return j1;var s=typeof e;if("object"!=s)return"function"==s?j1:"string"==s?l1(e):e+j1;if(E1(e)){var c,u=j1;i.__k=e;for(var d=0;d<e.length;d++){var p=e[d];if(null!=p&&"boolean"!=typeof p){var h,f=U(p,t,r,n,i,a,o);"string"==typeof f?u+=f:(c||(c=[]),u&&c.push(u),u=j1,E1(f)?(h=c).push.apply(h,f):c.push(f))}}return c?(u&&c.push(u),c):u}if(void 0!==e.constructor)return j1;e.__=i,k1&&k1(e);var m=e.type,g=e.props;if("function"==typeof m){var y,w,_,v=t;if(m===b){if("tpl"in g){for(var E=j1,S=0;S<g.tpl.length;S++)if(E+=g.tpl[S],g.exprs&&S<g.exprs.length){var R=g.exprs[S];if(null==R)continue;"object"==typeof R&&(void 0===R.constructor||E1(R))?E+=U(R,t,r,n,e,a,o):E+=R}return E}if("UNSTABLE_comment"in g)return"<!--"+l1(g.UNSTABLE_comment)+"-->";w=g.children}else{if(null!=(y=m.contextType)){var x=t[y.__c];v=x?x.props.value:y.__}var P=m.prototype&&"function"==typeof m.prototype.render;if(P)w=P1(e,v),_=e.__c;else{e.__c=_=_1(e,v);for(var A=0;_.__d&&A++<25;)_.__d=!1,x1&&x1(e),w=m.call(_,g,v);_.__d=!0}if(null!=_.getChildContext&&(t=T1({},t,_.getChildContext())),P&&l.errorBoundaries&&(m.getDerivedStateFromError||_.componentDidCatch)){w=null!=w&&w.type===b&&null==w.key&&null==w.props.tpl?w.props.children:w;try{return U(w,t,r,n,e,a,o)}catch(i){return m.getDerivedStateFromError&&(_.__s=m.getDerivedStateFromError(i)),_.componentDidCatch&&_.componentDidCatch(i,A1),_.__d?(w=P1(e,t),null!=(_=e.__c).getChildContext&&(t=T1({},t,_.getChildContext())),U(w=null!=w&&w.type===b&&null==w.key&&null==w.props.tpl?w.props.children:w,t,r,n,e,a,o)):j1}finally{w1&&w1(e),e.__=null,C1&&C1(e)}}}w=null!=w&&w.type===b&&null==w.key&&null==w.props.tpl?w.props.children:w;try{var k=U(w,t,r,n,e,a,o);return w1&&w1(e),e.__=null,l.unmount&&l.unmount(e),k}catch(i){if(!a&&o&&o.onError){var T=o.onError(i,e,function(i){return U(i,t,r,n,e,a,o)});if(void 0!==T)return T;var O=l.__e;return O&&O(i,e),j1}if(!a||!i||"function"!=typeof i.then)throw i;return i.then(function i(){try{return U(w,t,r,n,e,a,o)}catch(s){if(!s||"function"!=typeof s.then)throw s;return s.then(function(){return U(w,t,r,n,e,a,o)},i)}})}}var C,I="<"+m,j=j1;for(var N in g){var D=g[N];if("function"!=typeof D||"class"===N||"className"===N){switch(N){case"children":C=D;continue;case"key":case"ref":case"__self":case"__source":continue;case"htmlFor":if("for"in g)continue;N="for";break;case"className":if("class"in g)continue;N="class";break;case"defaultChecked":N="checked";break;case"defaultSelected":N="selected";break;case"defaultValue":case"value":switch(N="value",m){case"textarea":C=D;continue;case"select":n=D;continue;case"option":n!=D||"selected"in g||(I+=" selected")}break;case"dangerouslySetInnerHTML":j=D&&D.__html;continue;case"style":"object"==typeof D&&(D=h1(D));break;case"acceptCharset":N="accept-charset";break;case"httpEquiv":N="http-equiv";break;default:if(o1.test(N))N=N.replace(o1,"$1:$2").toLowerCase();else{if(r1.test(N))continue;("-"===N[4]||c1.has(N))&&null!=D?D+=j1:r?a1.test(N)&&(N="panose1"===N?"panose-1":N.replace(/([A-Z])/g,"-$1").toLowerCase()):i1.test(N)&&(N=N.toLowerCase())}}null!=D&&!1!==D&&(I=!0===D||D===j1?I+" "+N:I+" "+N+'="'+("string"==typeof D?l1(D):D+j1)+'"')}}if(r1.test(m))throw Error(m+" is not a valid HTML tag name in "+I+">");if(j||("string"==typeof C?j=l1(C):null!=C&&!1!==C&&!0!==C&&(j=U(C,t,"svg"===m||"foreignObject"!==m&&r,n,e,a,o))),w1&&w1(e),e.__=null,C1&&C1(e),!j&&Z.has(m))return I+"/>";var L="</"+m+">",M=I+">";return E1(j)?[M].concat(j,[L]):"string"!=typeof j?[M,j,L]:M+j+L}var Z=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),F1=D1,M1=D1;let __TURBOPACK__default__export__2=D1;var t1=/["&<]/;function n2(e){if(0===e.length||!1===t1.test(e))return e;for(var t=0,r=0,n="",i="";r<e.length;r++){switch(e.charCodeAt(r)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;default:continue}r!==t&&(n+=e.slice(t,r)),n+=i,t=r+1}return r!==t&&(n+=e.slice(t,r)),n}var o2=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,f2=0,i2=Array.isArray;function u2(e,t,r,n,i,a){t||(t={});var o,s,c=t;"ref"in t&&(o=t.ref,delete t.ref);var u={type:e,props:c,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--f2,__i:-1,__u:0,__source:i,__self:a};if("function"==typeof e&&(o=e.defaultProps))for(s in o)void 0===c[s]&&(c[s]=o[s]);return l.vnode&&l.vnode(u),u}function a2(e){var t=u2(b,{tpl:e,exprs:[].slice.call(arguments,1)});return t.key=t.__v,t}var c2={},l2=/[A-Z]/g;function p2(e,t){if(l.attr){var r=l.attr(e,t);if("string"==typeof r)return r}if("ref"===e||"key"===e)return"";if("style"===e&&"object"==typeof t){var n="";for(var i in t){var a=t[i];if(null!=a&&""!==a){var o="-"==i[0]?i:c2[i]||(c2[i]=i.replace(l2,"-$&").toLowerCase()),s=";";"number"!=typeof a||o.startsWith("--")||o2.test(o)||(s="px;"),n=n+o+":"+a+s}}return e+'="'+n+'"'}return null==t||!1===t||"function"==typeof t||"object"==typeof t?"":!0===t?e:e+'="'+n2(t)+'"'}function _2(e){if(null==e||"boolean"==typeof e||"function"==typeof e)return null;if("object"==typeof e){if(void 0===e.constructor)return e;if(i2(e)){for(var t=0;t<e.length;t++)e[t]=_2(e[t]);return e}}return n2(""+e)}function ErrorPage(e){let{url:t,error:r="default",theme:n}=e,i=`${t}/signin`,a={default:{status:200,heading:"Error",message:u2("p",{children:u2("a",{className:"site",href:t?.origin,children:t?.host})})},Configuration:{status:500,heading:"Server error",message:u2("div",{children:[u2("p",{children:"There is a problem with the server configuration."}),u2("p",{children:"Check the server logs for more information."})]})},AccessDenied:{status:403,heading:"Access Denied",message:u2("div",{children:[u2("p",{children:"You do not have permission to sign in."}),u2("p",{children:u2("a",{className:"button",href:i,children:"Sign in"})})]})},Verification:{status:403,heading:"Unable to sign in",message:u2("div",{children:[u2("p",{children:"The sign in link is no longer valid."}),u2("p",{children:"It may have been used already or it may have expired."})]}),signin:u2("a",{className:"button",href:i,children:"Sign in"})}},{status:o,heading:s,message:c,signin:u}=a[r]??a.default;return{status:o,html:u2("div",{className:"error",children:[n?.brandColor&&u2("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${n?.brandColor}
        }
      `}}),u2("div",{className:"card",children:[n?.logo&&u2("img",{src:n?.logo,alt:"Logo",className:"logo"}),u2("h1",{children:s}),u2("div",{className:"message",children:c}),u]})]})}}async function webauthnScript(e,t){let r=window.SimpleWebAuthnBrowser;async function n(r){let n=new URL(`${e}/webauthn-options/${t}`);r&&n.searchParams.append("action",r),a().forEach(e=>{n.searchParams.append(e.name,e.value)});let i=await fetch(n);return i.ok?i.json():void console.error("Failed to fetch options",i)}function i(){let e=`#${t}-form`,r=document.querySelector(e);if(!r)throw Error(`Form '${e}' not found`);return r}function a(){return Array.from(i().querySelectorAll("input[data-form-field]"))}async function o(e,t){let r=i();if(e){let t=document.createElement("input");t.type="hidden",t.name="action",t.value=e,r.appendChild(t)}if(t){let e=document.createElement("input");e.type="hidden",e.name="data",e.value=JSON.stringify(t),r.appendChild(e)}return r.submit()}async function s(e,t){let n=await r.startAuthentication(e,t);return await o("authenticate",n)}async function c(e){a().forEach(e=>{if(e.required&&!e.value)throw Error(`Missing required field: ${e.name}`)});let t=await r.startRegistration(e);return await o("register",t)}async function u(){if(!r.browserSupportsWebAuthnAutofill())return;let e=await n("authenticate");if(!e)return void console.error("Failed to fetch option for autofill authentication");try{await s(e.options,!0)}catch(e){console.error(e)}}(async function(){let e=i();if(!r.browserSupportsWebAuthn()){e.style.display="none";return}e&&e.addEventListener("submit",async e=>{e.preventDefault();let t=await n(void 0);if(!t)return void console.error("Failed to fetch options for form submission");if("authenticate"===t.action)try{await s(t.options,!1)}catch(e){console.error(e)}else if("register"===t.action)try{await c(t.options)}catch(e){console.error(e)}})})(),u()}let signinErrors={default:"Unable to sign in.",Signin:"Try signing in with a different account.",OAuthSignin:"Try signing in with a different account.",OAuthCallbackError:"Try signing in with a different account.",OAuthCreateAccount:"Try signing in with a different account.",EmailCreateAccount:"Try signing in with a different account.",Callback:"Try signing in with a different account.",OAuthAccountNotLinked:"To confirm your identity, sign in with the same account you used originally.",EmailSignin:"The e-mail could not be sent.",CredentialsSignin:"Sign in failed. Check the details you provided are correct.",SessionRequired:"Please sign in to access this page."};function ConditionalUIScript(e){return u2(b,{children:u2("script",{dangerouslySetInnerHTML:{__html:`
const currentURL = window.location.href;
const authURL = currentURL.substring(0, currentURL.lastIndexOf('/'));
(${webauthnScript})(authURL, "${e}");
`}})})}function SigninPage(e){let{csrfToken:t,providers:r=[],callbackUrl:n,theme:i,email:a,error:o}=e;"u">typeof document&&i?.brandColor&&document.documentElement.style.setProperty("--brand-color",i.brandColor),"u">typeof document&&i?.buttonText&&document.documentElement.style.setProperty("--button-text-color",i.buttonText);let s=o&&(signinErrors[o]??signinErrors.default),c="https://authjs.dev/img/providers",u=r.find(e=>"webauthn"===e.type&&e.enableConditionalUI)?.id;return u2("div",{className:"signin",children:[i?.brandColor&&u2("style",{dangerouslySetInnerHTML:{__html:`:root {--brand-color: ${i.brandColor}}`}}),i?.buttonText&&u2("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${i.buttonText}
        }
      `}}),u2("div",{className:"card",children:[s&&u2("div",{className:"error",children:u2("p",{children:s})}),i?.logo&&u2("img",{src:i.logo,alt:"Logo",className:"logo"}),r.map((e,i)=>{let o,s,u;("oauth"===e.type||"oidc"===e.type)&&({bg:o="#fff",brandColor:s,logo:u=`${c}/${e.id}.svg`}=e.style??{});let l=s??o??"#fff";return u2("div",{className:"provider",children:["oauth"===e.type||"oidc"===e.type?u2("form",{action:e.signinUrl,method:"POST",children:[u2("input",{type:"hidden",name:"csrfToken",value:t}),n&&u2("input",{type:"hidden",name:"callbackUrl",value:n}),u2("button",{type:"submit",className:"button",style:{"--provider-brand-color":l},tabIndex:0,children:[u2("span",{style:{filter:"invert(1) grayscale(1) brightness(1.3) contrast(9000)","mix-blend-mode":"luminosity",opacity:.95},children:["Sign in with ",e.name]}),u&&u2("img",{loading:"lazy",height:24,src:u})]})]}):null,("email"===e.type||"credentials"===e.type||"webauthn"===e.type)&&i>0&&"email"!==r[i-1].type&&"credentials"!==r[i-1].type&&"webauthn"!==r[i-1].type&&u2("hr",{}),"email"===e.type&&u2("form",{action:e.signinUrl,method:"POST",children:[u2("input",{type:"hidden",name:"csrfToken",value:t}),u2("label",{className:"section-header",htmlFor:`input-email-for-${e.id}-provider`,children:"Email"}),u2("input",{id:`input-email-for-${e.id}-provider`,autoFocus:!0,type:"email",name:"email",value:a,placeholder:"email@example.com",required:!0}),u2("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),"credentials"===e.type&&u2("form",{action:e.callbackUrl,method:"POST",children:[u2("input",{type:"hidden",name:"csrfToken",value:t}),Object.keys(e.credentials).map(t=>u2("div",{children:[u2("label",{className:"section-header",htmlFor:`input-${t}-for-${e.id}-provider`,children:e.credentials[t].label??t}),u2("input",{name:t,id:`input-${t}-for-${e.id}-provider`,type:e.credentials[t].type??"text",placeholder:e.credentials[t].placeholder??"",...e.credentials[t]})]},`input-group-${e.id}`)),u2("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),"webauthn"===e.type&&u2("form",{action:e.callbackUrl,method:"POST",id:`${e.id}-form`,children:[u2("input",{type:"hidden",name:"csrfToken",value:t}),Object.keys(e.formFields).map(t=>u2("div",{children:[u2("label",{className:"section-header",htmlFor:`input-${t}-for-${e.id}-provider`,children:e.formFields[t].label??t}),u2("input",{name:t,"data-form-field":!0,id:`input-${t}-for-${e.id}-provider`,type:e.formFields[t].type??"text",placeholder:e.formFields[t].placeholder??"",...e.formFields[t]})]},`input-group-${e.id}`)),u2("button",{id:`submitButton-${e.id}`,type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),("email"===e.type||"credentials"===e.type||"webauthn"===e.type)&&i+1<r.length&&u2("hr",{})]},e.id)})]}),u&&ConditionalUIScript(u)]})}function SignoutPage(e){let{url:t,csrfToken:r,theme:n}=e;return u2("div",{className:"signout",children:[n?.brandColor&&u2("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${n.brandColor}
        }
      `}}),n?.buttonText&&u2("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${n.buttonText}
        }
      `}}),u2("div",{className:"card",children:[n?.logo&&u2("img",{src:n.logo,alt:"Logo",className:"logo"}),u2("h1",{children:"Signout"}),u2("p",{children:"Are you sure you want to sign out?"}),u2("form",{action:t?.toString(),method:"POST",children:[u2("input",{type:"hidden",name:"csrfToken",value:r}),u2("button",{id:"submitButton",type:"submit",children:"Sign out"})]})]})]})}let __TURBOPACK__default__export__3=`:root {
  --border-width: 1px;
  --border-radius: 0.5rem;
  --color-error: #c94b4b;
  --color-info: #157efb;
  --color-info-hover: #0f6ddb;
  --color-info-text: #fff;
}

.__next-auth-theme-auto,
.__next-auth-theme-light {
  --color-background: #ececec;
  --color-background-hover: rgba(236, 236, 236, 0.8);
  --color-background-card: #fff;
  --color-text: #000;
  --color-primary: #444;
  --color-control-border: #bbb;
  --color-button-active-background: #f9f9f9;
  --color-button-active-border: #aaa;
  --color-separator: #ccc;
  --provider-bg: #fff;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #fff
  );
}

.__next-auth-theme-dark {
  --color-background: #161b22;
  --color-background-hover: rgba(22, 27, 34, 0.8);
  --color-background-card: #0d1117;
  --color-text: #fff;
  --color-primary: #ccc;
  --color-control-border: #555;
  --color-button-active-background: #060606;
  --color-button-active-border: #666;
  --color-separator: #444;
  --provider-bg: #161b22;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #000
  );
}

.__next-auth-theme-dark img[src$="42-school.svg"],
  .__next-auth-theme-dark img[src$="apple.svg"],
  .__next-auth-theme-dark img[src$="boxyhq-saml.svg"],
  .__next-auth-theme-dark img[src$="eveonline.svg"],
  .__next-auth-theme-dark img[src$="github.svg"],
  .__next-auth-theme-dark img[src$="mailchimp.svg"],
  .__next-auth-theme-dark img[src$="medium.svg"],
  .__next-auth-theme-dark img[src$="okta.svg"],
  .__next-auth-theme-dark img[src$="patreon.svg"],
  .__next-auth-theme-dark img[src$="ping-id.svg"],
  .__next-auth-theme-dark img[src$="roblox.svg"],
  .__next-auth-theme-dark img[src$="threads.svg"],
  .__next-auth-theme-dark img[src$="wikimedia.svg"] {
    filter: invert(1);
  }

.__next-auth-theme-dark #submitButton {
    background-color: var(--provider-bg, var(--color-info));
  }

@media (prefers-color-scheme: dark) {
  .__next-auth-theme-auto {
    --color-background: #161b22;
    --color-background-hover: rgba(22, 27, 34, 0.8);
    --color-background-card: #0d1117;
    --color-text: #fff;
    --color-primary: #ccc;
    --color-control-border: #555;
    --color-button-active-background: #060606;
    --color-button-active-border: #666;
    --color-separator: #444;
    --provider-bg: #161b22;
    --provider-bg-hover: color-mix(
      in srgb,
      var(--provider-brand-color) 30%,
      #000
    );
  }
    .__next-auth-theme-auto img[src$="42-school.svg"],
    .__next-auth-theme-auto img[src$="apple.svg"],
    .__next-auth-theme-auto img[src$="boxyhq-saml.svg"],
    .__next-auth-theme-auto img[src$="eveonline.svg"],
    .__next-auth-theme-auto img[src$="github.svg"],
    .__next-auth-theme-auto img[src$="mailchimp.svg"],
    .__next-auth-theme-auto img[src$="medium.svg"],
    .__next-auth-theme-auto img[src$="okta.svg"],
    .__next-auth-theme-auto img[src$="patreon.svg"],
    .__next-auth-theme-auto img[src$="ping-id.svg"],
    .__next-auth-theme-auto img[src$="roblox.svg"],
    .__next-auth-theme-auto img[src$="threads.svg"],
    .__next-auth-theme-auto img[src$="wikimedia.svg"] {
      filter: invert(1);
    }
    .__next-auth-theme-auto #submitButton {
      background-color: var(--provider-bg, var(--color-info));
    }
}

html {
  box-sizing: border-box;
}

*,
*:before,
*:after {
  box-sizing: inherit;
  margin: 0;
  padding: 0;
}

body {
  background-color: var(--color-background);
  margin: 0;
  padding: 0;
  font-family:
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    "Helvetica Neue",
    Arial,
    "Noto Sans",
    sans-serif,
    "Apple Color Emoji",
    "Segoe UI Emoji",
    "Segoe UI Symbol",
    "Noto Color Emoji";
}

h1 {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  font-weight: 400;
  color: var(--color-text);
}

p {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  color: var(--color-text);
}

form {
  margin: 0;
  padding: 0;
}

label {
  font-weight: 500;
  text-align: left;
  margin-bottom: 0.25rem;
  display: block;
  color: var(--color-text);
}

input[type] {
  box-sizing: border-box;
  display: block;
  width: 100%;
  padding: 0.5rem 1rem;
  border: var(--border-width) solid var(--color-control-border);
  background: var(--color-background-card);
  font-size: 1rem;
  border-radius: var(--border-radius);
  color: var(--color-text);
}

p {
  font-size: 1.1rem;
  line-height: 2rem;
}

a.button {
  text-decoration: none;
  line-height: 1rem;
}

a.button:link,
  a.button:visited {
    background-color: var(--color-background);
    color: var(--color-primary);
  }

button,
a.button {
  padding: 0.75rem 1rem;
  color: var(--provider-color, var(--color-primary));
  background-color: var(--provider-bg, var(--color-background));
  border: 1px solid #00000031;
  font-size: 0.9rem;
  height: 50px;
  border-radius: var(--border-radius);
  transition: background-color 250ms ease-in-out;
  font-weight: 300;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

:is(button,a.button):hover {
    background-color: var(--provider-bg-hover, var(--color-background-hover));
    cursor: pointer;
  }

:is(button,a.button):active {
    cursor: pointer;
  }

:is(button,a.button) span {
    color: var(--provider-bg);
  }

#submitButton {
  color: var(--button-text-color, var(--color-info-text));
  background-color: var(--brand-color, var(--color-info));
  width: 100%;
}

#submitButton:hover {
    background-color: var(
      --button-hover-bg,
      var(--color-info-hover)
    ) !important;
  }

a.site {
  color: var(--color-primary);
  text-decoration: none;
  font-size: 1rem;
  line-height: 2rem;
}

a.site:hover {
    text-decoration: underline;
  }

.page {
  position: absolute;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.page > div {
    text-align: center;
  }

.error a.button {
    padding-left: 2rem;
    padding-right: 2rem;
    margin-top: 0.5rem;
  }

.error .message {
    margin-bottom: 1.5rem;
  }

.signin input[type="text"] {
    margin-left: auto;
    margin-right: auto;
    display: block;
  }

.signin hr {
    display: block;
    border: 0;
    border-top: 1px solid var(--color-separator);
    margin: 2rem auto 1rem auto;
    overflow: visible;
  }

.signin hr::before {
      content: "or";
      background: var(--color-background-card);
      color: #888;
      padding: 0 0.4rem;
      position: relative;
      top: -0.7rem;
    }

.signin .error {
    background: #f5f5f5;
    font-weight: 500;
    border-radius: 0.3rem;
    background: var(--color-error);
  }

.signin .error p {
      text-align: left;
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
      line-height: 1.2rem;
      color: var(--color-info-text);
    }

.signin > div,
  .signin form {
    display: block;
  }

.signin > div input[type], .signin form input[type] {
      margin-bottom: 0.5rem;
    }

.signin > div button, .signin form button {
      width: 100%;
    }

.signin .provider + .provider {
    margin-top: 1rem;
  }

.logo {
  display: inline-block;
  max-width: 150px;
  margin: 1.25rem 0;
  max-height: 70px;
}

.card {
  background-color: var(--color-background-card);
  border-radius: 1rem;
  padding: 1.25rem 2rem;
}

.card .header {
    color: var(--color-primary);
  }

.card input[type]::-moz-placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type]::placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type] {
    background: color-mix(in srgb, var(--color-background-card) 95%, black);
  }

.section-header {
  color: var(--color-text);
}

@media screen and (min-width: 450px) {
  .card {
    margin: 2rem 0;
    width: 368px;
  }
}

@media screen and (max-width: 450px) {
  .card {
    margin: 1rem 0;
    width: 343px;
  }
}
`;function VerifyRequestPage(e){let{url:t,theme:r}=e;return u2("div",{className:"verify-request",children:[r.brandColor&&u2("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${r.brandColor}
        }
      `}}),u2("div",{className:"card",children:[r.logo&&u2("img",{src:r.logo,alt:"Logo",className:"logo"}),u2("h1",{children:"Check your email"}),u2("p",{children:"A sign in link has been sent to your email address."}),u2("p",{children:u2("a",{className:"site",href:t.origin,children:t.host})})]})]})}function send({html:e,title:t,status:r,cookies:n,theme:i,headTags:a}){return{cookies:n,status:r,headers:{"Content-Type":"text/html"},body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${__TURBOPACK__default__export__3}</style><title>${t}</title>${a??""}</head><body class="__next-auth-theme-${i?.colorScheme??"auto"}"><div class="page">${D1(e)}</div></body></html>`}}function renderPage(e){let{url:t,theme:r,query:n,cookies:i,pages:a,providers:o}=e;return{csrf:(e,t,r)=>e?(t.logger.warn("csrf-disabled"),r.push({name:t.cookies.csrfToken.name,value:"",options:{...t.cookies.csrfToken.options,maxAge:0}}),{status:404,cookies:r}):{headers:{"Content-Type":"application/json","Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"},body:{csrfToken:t.csrfToken},cookies:r},providers:e=>({headers:{"Content-Type":"application/json"},body:e.reduce((e,{id:t,name:r,type:n,signinUrl:i,callbackUrl:a})=>(e[t]={id:t,name:r,type:n,signinUrl:i,callbackUrl:a},e),{})}),signin(t,s){if(t)throw new UnknownAction("Unsupported action");if(a?.signIn){let t=`${a.signIn}${a.signIn.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:e.callbackUrl??"/"})}`;return s&&(t=`${t}&${new URLSearchParams({error:s})}`),{redirect:t,cookies:i}}let c=o?.find(e=>"webauthn"===e.type&&e.enableConditionalUI&&!!e.simpleWebAuthnBrowserVersion),u="";if(c){let{simpleWebAuthnBrowserVersion:e}=c;u=`<script src="https://unpkg.com/@simplewebauthn/browser@${e}/dist/bundle/index.umd.min.js" crossorigin="anonymous"></script>`}return send({cookies:i,theme:r,html:SigninPage({csrfToken:e.csrfToken,providers:e.providers?.filter(e=>["email","oauth","oidc"].includes(e.type)||"credentials"===e.type&&e.credentials||"webauthn"===e.type&&e.formFields||!1),callbackUrl:e.callbackUrl,theme:e.theme,error:s,...n}),title:"Sign In",headTags:u})},signout:()=>a?.signOut?{redirect:a.signOut,cookies:i}:send({cookies:i,theme:r,html:SignoutPage({csrfToken:e.csrfToken,url:t,theme:r}),title:"Sign Out"}),verifyRequest:e=>a?.verifyRequest?{redirect:`${a.verifyRequest}${t?.search??""}`,cookies:i}:send({cookies:i,theme:r,html:VerifyRequestPage({url:t,theme:r,...e}),title:"Verify Request"}),error:e=>a?.error?{redirect:`${a.error}${a.error.includes("?")?"&":"?"}error=${e}`,cookies:i}:send({cookies:i,theme:r,...ErrorPage({url:t,theme:r,error:e}),title:"Error"})}}function fromDate(e,t=Date.now()){return new Date(t+1e3*e)}async function handleLoginOrRegister(e,t,r,n){if(!r?.providerAccountId||!r.type)throw Error("Missing or invalid provider account");if(!["email","oauth","oidc","webauthn"].includes(r.type))throw Error("Provider not supported");let{adapter:i,jwt:a,events:o,session:{strategy:s,generateSessionToken:c}}=n;if(!i)return{user:t,account:r};let u=t,l=r,{createUser:d,updateUser:p,getUser:h,getUserByAccount:f,getUserByEmail:m,linkAccount:g,createSession:y,getSessionAndUser:b,deleteSession:w}=i,_=null,v=null,E=!1,S="jwt"===s;if(e)if(S)try{let t=n.cookies.sessionToken.name;(_=await a.decode({...a,token:e,salt:t}))&&"sub"in _&&_.sub&&(v=await h(_.sub))}catch{}else{let t=await b(e);t&&(_=t.session,v=t.user)}if("email"===l.type){let t=await m(u.email);return t?(v?.id!==t.id&&!S&&e&&await w(e),v=await p({id:t.id,emailVerified:new Date}),await o.updateUser?.({user:v})):(v=await d({...u,emailVerified:new Date}),await o.createUser?.({user:v}),E=!0),{session:_=S?{}:await y({sessionToken:c(),userId:v.id,expires:fromDate(n.session.maxAge)}),user:v,isNewUser:E}}if("webauthn"===l.type){let e=await f({providerAccountId:l.providerAccountId,provider:l.provider});if(e){if(v){if(e.id===v.id){let e={...l,userId:v.id};return{session:_,user:v,isNewUser:E,account:e}}throw new AccountNotLinked("The account is already associated with another user",{provider:l.provider})}_=S?{}:await y({sessionToken:c(),userId:e.id,expires:fromDate(n.session.maxAge)});let t={...l,userId:e.id};return{session:_,user:e,isNewUser:E,account:t}}{if(v){await g({...l,userId:v.id}),await o.linkAccount?.({user:v,account:l,profile:u});let e={...l,userId:v.id};return{session:_,user:v,isNewUser:E,account:e}}if(u.email?await m(u.email):null)throw new AccountNotLinked("Another account already exists with the same e-mail address",{provider:l.provider});v=await d({...u}),await o.createUser?.({user:v}),await g({...l,userId:v.id}),await o.linkAccount?.({user:v,account:l,profile:u}),_=S?{}:await y({sessionToken:c(),userId:v.id,expires:fromDate(n.session.maxAge)});let e={...l,userId:v.id};return{session:_,user:v,isNewUser:!0,account:e}}}let R=await f({providerAccountId:l.providerAccountId,provider:l.provider});if(R){if(v){if(R.id===v.id)return{session:_,user:v,isNewUser:E};throw new OAuthAccountNotLinked("The account is already associated with another user",{provider:l.provider})}return{session:_=S?{}:await y({sessionToken:c(),userId:R.id,expires:fromDate(n.session.maxAge)}),user:R,isNewUser:E}}{let{provider:e}=n,{type:t,provider:r,providerAccountId:i,userId:a,...s}=l,p={providerAccountId:i,provider:r,type:t,userId:a};if(l=Object.assign(e.account(s)??{},p),v)return await g({...l,userId:v.id}),await o.linkAccount?.({user:v,account:l,profile:u}),{session:_,user:v,isNewUser:E};let h=u.email?await m(u.email):null;if(h){let e=n.provider;if(e?.allowDangerousEmailAccountLinking)v=h,E=!1;else throw new OAuthAccountNotLinked("Another account already exists with the same e-mail address",{provider:l.provider})}else v=await d({...u,emailVerified:null}),E=!0;return await o.createUser?.({user:v}),await g({...l,userId:v.id}),await o.linkAccount?.({user:v,account:l,profile:u}),{session:_=S?{}:await y({sessionToken:c(),userId:v.id,expires:fromDate(n.session.maxAge)}),user:v,isNewUser:E}}}if("u"<typeof navigator||!navigator.userAgent?.startsWith?.("Mozilla/5.0 ")){let NAME="oauth4webapi",VERSION="v3.8.5";USER_AGENT=`${NAME}/${VERSION}`}function looseInstanceOf(e,t){if(null==e)return!1;try{return e instanceof t||Object.getPrototypeOf(e)[Symbol.toStringTag]===t.prototype[Symbol.toStringTag]}catch{return!1}}let ERR_INVALID_ARG_VALUE="ERR_INVALID_ARG_VALUE",ERR_INVALID_ARG_TYPE="ERR_INVALID_ARG_TYPE";function CodedTypeError(e,t,r){let n=TypeError(e,{cause:r});return Object.assign(n,{code:t}),n}let allowInsecureRequests=Symbol(),clockSkew=Symbol(),clockTolerance=Symbol(),customFetch1=Symbol(),modifyAssertion=Symbol(),jweDecrypt=Symbol(),jwksCache=Symbol(),encoder1=new TextEncoder,decoder1=new TextDecoder;function buf(e){return"string"==typeof e?encoder1.encode(e):decoder1.decode(e)}if(Uint8Array.prototype.toBase64)encodeBase64Url=e=>(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e.toBase64({alphabet:"base64url",omitPadding:!0}));else{let CHUNK_SIZE=32768;encodeBase64Url=e=>{e instanceof ArrayBuffer&&(e=new Uint8Array(e));let t=[];for(let r=0;r<e.byteLength;r+=CHUNK_SIZE)t.push(String.fromCharCode.apply(null,e.subarray(r,r+CHUNK_SIZE)));return btoa(t.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}}function b64u(e){return"string"==typeof e?decodeBase64Url(e):encodeBase64Url(e)}decodeBase64Url=Uint8Array.fromBase64?e=>{try{return Uint8Array.fromBase64(e,{alphabet:"base64url"})}catch(e){throw CodedTypeError("The input to be decoded is not correctly encoded.",ERR_INVALID_ARG_VALUE,e)}}:e=>{try{let t=atob(e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}catch(e){throw CodedTypeError("The input to be decoded is not correctly encoded.",ERR_INVALID_ARG_VALUE,e)}};class UnsupportedOperationError extends Error{code;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=UNSUPPORTED_OPERATION,Error.captureStackTrace?.(this,this.constructor)}}class OperationProcessingError extends Error{code;constructor(e,t){super(e,t),this.name=this.constructor.name,t?.code&&(this.code=t?.code),Error.captureStackTrace?.(this,this.constructor)}}function OPE(e,t,r){return new OperationProcessingError(e,{code:t,cause:r})}async function calculateJwkThumbprint1(e){let t;switch(e.kty){case"EC":t={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":t={crv:e.crv,kty:e.kty,x:e.x};break;case"AKP":t={alg:e.alg,kty:e.kty,pub:e.pub};break;case"RSA":t={e:e.e,kty:e.kty,n:e.n};break;default:throw new UnsupportedOperationError("unsupported JWK key type",{cause:e})}return b64u(await crypto.subtle.digest("SHA-256",buf(JSON.stringify(t))))}function assertCryptoKey1(e,t){if(!(e instanceof CryptoKey))throw CodedTypeError(`${t} must be a CryptoKey`,ERR_INVALID_ARG_TYPE)}function assertPrivateKey(e,t){if(assertCryptoKey1(e,t),"private"!==e.type)throw CodedTypeError(`${t} must be a private CryptoKey`,ERR_INVALID_ARG_VALUE)}function assertPublicKey(e,t){if(assertCryptoKey1(e,t),"public"!==e.type)throw CodedTypeError(`${t} must be a public CryptoKey`,ERR_INVALID_ARG_VALUE)}function normalizeTyp1(e){return e.toLowerCase().replace(/^application\//,"")}function isJsonObject(e){return!(null===e||"object"!=typeof e||Array.isArray(e))}function prepareHeaders(e){looseInstanceOf(e,Headers)&&(e=Object.fromEntries(e.entries()));let t=new Headers(e??{});if(USER_AGENT&&!t.has("user-agent")&&t.set("user-agent",USER_AGENT),t.has("authorization"))throw CodedTypeError('"options.headers" must not include the "authorization" header name',ERR_INVALID_ARG_VALUE);return t}function signal(e,t){if(void 0!==t){if("function"==typeof t&&(t=t(e.href)),!(t instanceof AbortSignal))throw CodedTypeError('"options.signal" must return or be an instance of AbortSignal',ERR_INVALID_ARG_TYPE);return t}}function replaceDoubleSlash(e){return e.includes("//")?e.replace("//","/"):e}function prependWellKnown(e,t,r=!1){return"/"===e.pathname?e.pathname=t:e.pathname=replaceDoubleSlash(`${t}/${r?e.pathname:e.pathname.replace(/(\/)$/,"")}`),e}function appendWellKnown(e,t){return e.pathname=replaceDoubleSlash(`${e.pathname}/${t}`),e}async function performDiscovery(e,t,r,n){if(!(e instanceof URL))throw CodedTypeError(`"${t}" must be an instance of URL`,ERR_INVALID_ARG_TYPE);checkProtocol(e,n?.[allowInsecureRequests]!==!0);let i=r(new URL(e.href)),a=prepareHeaders(n?.headers);return a.set("accept","application/json"),(n?.[customFetch1]||fetch)(i.href,{body:void 0,headers:Object.fromEntries(a.entries()),method:"GET",redirect:"manual",signal:signal(i,n?.signal)})}async function discoveryRequest(e,t){return performDiscovery(e,"issuerIdentifier",e=>{switch(t?.algorithm){case void 0:case"oidc":appendWellKnown(e,".well-known/openid-configuration");break;case"oauth2":prependWellKnown(e,".well-known/oauth-authorization-server");break;default:throw CodedTypeError('"options.algorithm" must be "oidc" (default), or "oauth2"',ERR_INVALID_ARG_VALUE)}return e},t)}function assertNumber(e,t,r,n,i){try{if("number"!=typeof e||!Number.isFinite(e))throw CodedTypeError(`${r} must be a number`,ERR_INVALID_ARG_TYPE,i);if(e>0)return;if(t){if(0!==e)throw CodedTypeError(`${r} must be a non-negative number`,ERR_INVALID_ARG_VALUE,i);return}throw CodedTypeError(`${r} must be a positive number`,ERR_INVALID_ARG_VALUE,i)}catch(e){if(n)throw OPE(e.message,n,i);throw e}}function assertString(e,t,r,n){try{if("string"!=typeof e)throw CodedTypeError(`${t} must be a string`,ERR_INVALID_ARG_TYPE,n);if(0===e.length)throw CodedTypeError(`${t} must not be empty`,ERR_INVALID_ARG_VALUE,n)}catch(e){if(r)throw OPE(e.message,r,n);throw e}}async function processDiscoveryResponse(e,t){let r=e;if(!(r instanceof URL)&&r!==_nodiscoverycheck)throw CodedTypeError('"expectedIssuerIdentifier" must be an instance of URL',ERR_INVALID_ARG_TYPE);if(!looseInstanceOf(t,Response))throw CodedTypeError('"response" must be an instance of Response',ERR_INVALID_ARG_TYPE);if(200!==t.status)throw OPE('"response" is not a conform Authorization Server Metadata response (unexpected HTTP status code)',RESPONSE_IS_NOT_CONFORM,t);assertReadableResponse(t);let n=await getResponseJsonBody(t);if(assertString(n.issuer,'"response" body "issuer" property',INVALID_RESPONSE,{body:n}),r!==_nodiscoverycheck&&new URL(n.issuer).href!==r.href)throw OPE('"response" body "issuer" property does not match the expected value',JSON_ATTRIBUTE_COMPARISON,{expected:r.href,body:n,attribute:"issuer"});return n}function assertApplicationJson(e){assertContentType(e,"application/json")}function notJson(e,...t){let r='"response" content-type must be ';if(t.length>2){let e=t.pop();r+=`${t.join(", ")}, or ${e}`}else 2===t.length?r+=`${t[0]} or ${t[1]}`:r+=t[0];return OPE(r,RESPONSE_IS_NOT_JSON,e)}function assertContentTypes(e,...t){if(!t.includes(getContentType(e)))throw notJson(e,...t)}function assertContentType(e,t){if(getContentType(e)!==t)throw notJson(e,t)}function randomBytes(){return b64u(crypto.getRandomValues(new Uint8Array(32)))}function generateRandomCodeVerifier(){return randomBytes()}function generateRandomState(){return randomBytes()}function generateRandomNonce(){return randomBytes()}async function calculatePKCECodeChallenge(e){return assertString(e,"codeVerifier"),b64u(await crypto.subtle.digest("SHA-256",buf(e)))}function getKeyAndKid(e){return e instanceof CryptoKey?{key:e}:e?.key instanceof CryptoKey?(void 0!==e.kid&&assertString(e.kid,'"kid"'),{key:e.key,kid:e.kid}):{}}function psAlg(e){switch(e.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new UnsupportedOperationError("unsupported RsaHashedKeyAlgorithm hash name",{cause:e})}}function rsAlg(e){switch(e.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new UnsupportedOperationError("unsupported RsaHashedKeyAlgorithm hash name",{cause:e})}}function esAlg(e){switch(e.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new UnsupportedOperationError("unsupported EcKeyAlgorithm namedCurve",{cause:e})}}function keyToJws(e){switch(e.algorithm.name){case"RSA-PSS":return psAlg(e);case"RSASSA-PKCS1-v1_5":return rsAlg(e);case"ECDSA":return esAlg(e);case"Ed25519":case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return e.algorithm.name;case"EdDSA":return"Ed25519";default:throw new UnsupportedOperationError("unsupported CryptoKey algorithm name",{cause:e})}}function getClockSkew(e){let t=e?.[clockSkew];return"number"==typeof t&&Number.isFinite(t)?t:0}function getClockTolerance(e){let t=e?.[clockTolerance];return"number"==typeof t&&Number.isFinite(t)&&-1!==Math.sign(t)?t:30}function epochTime(){return Math.floor(Date.now()/1e3)}function assertAs(e){if("object"!=typeof e||null===e)throw CodedTypeError('"as" must be an object',ERR_INVALID_ARG_TYPE);assertString(e.issuer,'"as.issuer"')}function assertClient(e){if("object"!=typeof e||null===e)throw CodedTypeError('"client" must be an object',ERR_INVALID_ARG_TYPE);assertString(e.client_id,'"client.client_id"')}function formUrlEncode(e){return encodeURIComponent(e).replace(/(?:[-_.!~*'()]|%20)/g,e=>{switch(e){case"-":case"_":case".":case"!":case"~":case"*":case"'":case"(":case")":return`%${e.charCodeAt(0).toString(16).toUpperCase()}`;case"%20":return"+";default:throw Error()}})}function ClientSecretPost(e){return assertString(e,'"clientSecret"'),(t,r,n,i)=>{n.set("client_id",r.client_id),n.set("client_secret",e)}}function ClientSecretBasic(e){return assertString(e,'"clientSecret"'),(t,r,n,i)=>{let a=formUrlEncode(r.client_id),o=formUrlEncode(e),s=btoa(`${a}:${o}`);i.set("authorization",`Basic ${s}`)}}function clientAssertionPayload(e,t){let r=epochTime()+getClockSkew(t);return{jti:randomBytes(),aud:e.issuer,exp:r+60,iat:r,nbf:r,iss:t.client_id,sub:t.client_id}}function PrivateKeyJwt(e,t){let{key:r,kid:n}=getKeyAndKid(e);return assertPrivateKey(r,'"clientPrivateKey.key"'),async(e,i,a,o)=>{let s={alg:keyToJws(r),kid:n},c=clientAssertionPayload(e,i);t?.[modifyAssertion]?.(s,c),a.set("client_id",i.client_id),a.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),a.set("client_assertion",await signJwt(s,c,r))}}function ClientSecretJwt(e,t){let r;assertString(e,'"clientSecret"');let n=t?.[modifyAssertion];return async(t,i,a,o)=>{r||=await crypto.subtle.importKey("raw",buf(e),{hash:"SHA-256",name:"HMAC"},!1,["sign"]);let s={alg:"HS256"},c=clientAssertionPayload(t,i);n?.(s,c);let u=`${b64u(buf(JSON.stringify(s)))}.${b64u(buf(JSON.stringify(c)))}`,l=await crypto.subtle.sign(r.algorithm,r,buf(u));a.set("client_id",i.client_id),a.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),a.set("client_assertion",`${u}.${b64u(new Uint8Array(l))}`)}}function None(){return(e,t,r,n)=>{r.set("client_id",t.client_id)}}function TlsClientAuth(){return None()}async function signJwt(e,t,r){if(!r.usages.includes("sign"))throw CodedTypeError('CryptoKey instances used for signing assertions must include "sign" in their "usages"',ERR_INVALID_ARG_VALUE);let n=`${b64u(buf(JSON.stringify(e)))}.${b64u(buf(JSON.stringify(t)))}`,i=b64u(await crypto.subtle.sign(keyToSubtle(r),r,buf(n)));return`${n}.${i}`}async function issueRequestObject(e,t,r,n,i){let a;assertAs(e),assertClient(t),r=new URLSearchParams(r);let{key:o,kid:s}=getKeyAndKid(n);assertPrivateKey(o,'"privateKey.key"'),r.set("client_id",t.client_id);let c=epochTime()+getClockSkew(t),u={...Object.fromEntries(r.entries()),jti:randomBytes(),aud:e.issuer,exp:c+60,iat:c,nbf:c,iss:t.client_id};r.has("resource")&&(a=r.getAll("resource"))&&a.length>1&&(u.resource=a);{let e=r.get("max_age");null!==e&&(u.max_age=parseInt(e,10),assertNumber(u.max_age,!0,'"max_age" parameter'))}{let e=r.get("claims");if(null!==e){try{u.claims=JSON.parse(e)}catch(e){throw OPE('failed to parse the "claims" parameter as JSON',PARSE_ERROR,e)}if(!isJsonObject(u.claims))throw CodedTypeError('"claims" parameter must be a JSON with a top level object',ERR_INVALID_ARG_VALUE)}}{let e=r.get("authorization_details");if(null!==e){try{u.authorization_details=JSON.parse(e)}catch(e){throw OPE('failed to parse the "authorization_details" parameter as JSON',PARSE_ERROR,e)}if(!Array.isArray(u.authorization_details))throw CodedTypeError('"authorization_details" parameter must be a JSON with a top level array',ERR_INVALID_ARG_VALUE)}}let l={alg:keyToJws(o),typ:"oauth-authz-req+jwt",kid:s};return i?.[modifyAssertion]?.(l,u),signJwt(l,u,o)}async function getSetPublicJwkCache(e,t){let{kty:r,e:n,n:i,x:a,y:o,crv:s,pub:c}=await crypto.subtle.exportKey("jwk",e),u={kty:r,e:n,n:i,x:a,y:o,crv:s,pub:c};return"AKP"===r&&(u.alg=t),jwkCache.set(e,u),u}async function publicJwk(e,t){return(jwkCache||=new WeakMap).get(e)||getSetPublicJwkCache(e,t)}let URLParse=URL.parse?(e,t)=>URL.parse(e,t):(e,t)=>{try{return new URL(e,t)}catch{return null}};function checkProtocol(e,t){if(t&&"https:"!==e.protocol)throw OPE("only requests to HTTPS are allowed",HTTP_REQUEST_FORBIDDEN,e);if("https:"!==e.protocol&&"http:"!==e.protocol)throw OPE("only HTTP and HTTPS requests are allowed",REQUEST_PROTOCOL_FORBIDDEN,e)}function validateEndpoint(e,t,r,n){let i;if("string"!=typeof e||!(i=URLParse(e)))throw OPE(`authorization server metadata does not contain a valid ${r?`"as.mtls_endpoint_aliases.${t}"`:`"as.${t}"`}`,void 0===e?MISSING_SERVER_METADATA:INVALID_SERVER_METADATA,{attribute:r?`mtls_endpoint_aliases.${t}`:t});return checkProtocol(i,n),i}function resolveEndpoint(e,t,r,n){return r&&e.mtls_endpoint_aliases&&t in e.mtls_endpoint_aliases?validateEndpoint(e.mtls_endpoint_aliases[t],t,r,n):validateEndpoint(e[t],t,r,n)}async function pushedAuthorizationRequest(e,t,r,n,i){assertAs(e),assertClient(t);let a=resolveEndpoint(e,"pushed_authorization_request_endpoint",t.use_mtls_endpoint_aliases,i?.[allowInsecureRequests]!==!0),o=new URLSearchParams(n);o.set("client_id",t.client_id);let s=prepareHeaders(i?.headers);s.set("accept","application/json"),i?.DPoP!==void 0&&(assertDPoP(i.DPoP),await i.DPoP.addProof(a,s,"POST"));let c=await authenticatedRequest(e,t,r,a,o,s,i);return i?.DPoP?.cacheNonce(c,a),c}class DPoPHandler{#f;#m;#g;#y;#b;#w;#_;constructor(e,t,r){if(assertPrivateKey(t?.privateKey,'"DPoP.privateKey"'),assertPublicKey(t?.publicKey,'"DPoP.publicKey"'),!t.publicKey.extractable)throw CodedTypeError('"DPoP.publicKey.extractable" must be true',ERR_INVALID_ARG_VALUE);this.#b=r?.[modifyAssertion],this.#y=getClockSkew(e),this.#m=t.privateKey,this.#g=t.publicKey,branded.add(this)}#v(e){this.#w||=new Map;let t=this.#w.get(e);return t&&(this.#w.delete(e),this.#w.set(e,t)),t}#E(e,t){this.#w||=new Map,this.#w.delete(e),100===this.#w.size&&this.#w.delete(this.#w.keys().next().value),this.#w.set(e,t)}async calculateThumbprint(){if(!this.#_){let e=await crypto.subtle.exportKey("jwk",this.#g);this.#_||=await calculateJwkThumbprint1(e)}return this.#_}async addProof(e,t,r,n){let i=keyToJws(this.#m);this.#f||={alg:i,typ:"dpop+jwt",jwk:await publicJwk(this.#g,i)};let a=this.#v(e.origin),o={iat:epochTime()+this.#y,jti:randomBytes(),htm:r,nonce:a,htu:`${e.origin}${e.pathname}`,ath:n?b64u(await crypto.subtle.digest("SHA-256",buf(n))):void 0};this.#b?.(this.#f,o),t.set("dpop",await signJwt(this.#f,o,this.#m))}cacheNonce(e,t){try{let r=e.headers.get("dpop-nonce");r&&this.#E(t.origin,r)}catch{}}}function isDPoPNonceError(e){if(e instanceof WWWAuthenticateChallengeError){let{0:t,length:r}=e.cause;return 1===r&&"dpop"===t.scheme&&"use_dpop_nonce"===t.parameters.error}return e instanceof ResponseBodyError&&"use_dpop_nonce"===e.error}function DPoP(e,t,r){return new DPoPHandler(e,t,r)}class ResponseBodyError extends Error{cause;code;error;status;error_description;response;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=RESPONSE_BODY_ERROR,this.cause=t.cause,this.error=t.cause.error,this.status=t.response.status,this.error_description=t.cause.error_description,Object.defineProperty(this,"response",{enumerable:!1,value:t.response}),Error.captureStackTrace?.(this,this.constructor)}}class AuthorizationResponseError extends Error{cause;code;error;error_description;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=AUTHORIZATION_RESPONSE_ERROR,this.cause=t.cause,this.error=t.cause.get("error"),this.error_description=t.cause.get("error_description")??void 0,Error.captureStackTrace?.(this,this.constructor)}}class WWWAuthenticateChallengeError extends Error{cause;code;response;status;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=WWW_AUTHENTICATE_CHALLENGE,this.cause=t.cause,this.status=t.response.status,this.response=t.response,Object.defineProperty(this,"response",{enumerable:!1}),Error.captureStackTrace?.(this,this.constructor)}}let tokenMatch="[a-zA-Z0-9!#$%&\\'\\*\\+\\-\\.\\^_`\\|~]+",token68Match="[a-zA-Z0-9\\-\\._\\~\\+\\/]+={0,2}",quotedMatch='"((?:[^"\\\\]|\\\\[\\s\\S])*)"',quotedParamMatcher="("+tokenMatch+")\\s*=\\s*"+quotedMatch,paramMatcher="("+tokenMatch+")\\s*=\\s*("+tokenMatch+")",schemeRE=RegExp("^[,\\s]*("+tokenMatch+")"),quotedParamRE=RegExp("^[,\\s]*"+quotedParamMatcher+"[,\\s]*(.*)"),unquotedParamRE=RegExp("^[,\\s]*"+paramMatcher+"[,\\s]*(.*)"),token68ParamRE=RegExp("^("+token68Match+")(?:$|[,\\s])(.*)");function parseWwwAuthenticateChallenges(e){if(!looseInstanceOf(e,Response))throw CodedTypeError('"response" must be an instance of Response',ERR_INVALID_ARG_TYPE);let t=e.headers.get("www-authenticate");if(null===t)return;let r=[],n=t;for(;n;){let e,t=n.match(schemeRE),i=t?.["1"].toLowerCase();if(!i)return;let a=n.substring(t[0].length);if(a&&!a.match(/^[\s,]/))return;let o=a.match(/^\s+(.*)$/),s=!!o;n=o?o[1]:void 0;let c={};if(s)for(;n;){let r,i;if(t=n.match(quotedParamRE)){if([,r,i,n]=t,i.includes("\\"))try{i=JSON.parse(`"${i}"`)}catch{}c[r.toLowerCase()]=i;continue}if(t=n.match(unquotedParamRE)){[,r,i,n]=t,c[r.toLowerCase()]=i;continue}if(t=n.match(token68ParamRE)){if(Object.keys(c).length)break;[,e,n]=t;break}return}else n=a||void 0;let u={scheme:i,parameters:c};e&&(u.token68=e),r.push(u)}if(r.length)return r}async function processPushedAuthorizationResponse(e,t,r){if(assertAs(e),assertClient(t),!looseInstanceOf(r,Response))throw CodedTypeError('"response" must be an instance of Response',ERR_INVALID_ARG_TYPE);await checkOAuthBodyError(r,201,"Pushed Authorization Request Endpoint"),assertReadableResponse(r);let n=await getResponseJsonBody(r);assertString(n.request_uri,'"response" body "request_uri" property',INVALID_RESPONSE,{body:n});let i="number"!=typeof n.expires_in?parseFloat(n.expires_in):n.expires_in;return assertNumber(i,!0,'"response" body "expires_in" property',INVALID_RESPONSE,{body:n}),n.expires_in=i,n}async function parseOAuthResponseErrorBody(e){if(e.status>399&&e.status<500){assertReadableResponse(e),assertApplicationJson(e);try{let t=await e.clone().json();if(isJsonObject(t)&&"string"==typeof t.error&&t.error.length)return t}catch{}}}async function checkOAuthBodyError(e,t,r){if(e.status!==t){let t;if(checkAuthenticationChallenges(e),t=await parseOAuthResponseErrorBody(e))throw await e.body?.cancel(),new ResponseBodyError("server responded with an error in the response body",{cause:t,response:e});throw OPE(`"response" is not a conform ${r} response (unexpected HTTP status code)`,RESPONSE_IS_NOT_CONFORM,e)}}function assertDPoP(e){if(!branded.has(e))throw CodedTypeError('"options.DPoP" is not a valid DPoPHandle',ERR_INVALID_ARG_VALUE)}async function resourceRequest(e,t,r,n,i,a){if(assertString(e,'"accessToken"'),!(r instanceof URL))throw CodedTypeError('"url" must be an instance of URL',ERR_INVALID_ARG_TYPE);checkProtocol(r,a?.[allowInsecureRequests]!==!0),n=prepareHeaders(n),a?.DPoP&&(assertDPoP(a.DPoP),await a.DPoP.addProof(r,n,t.toUpperCase(),e)),n.set("authorization",`${n.has("dpop")?"DPoP":"Bearer"} ${e}`);let o=await (a?.[customFetch1]||fetch)(r.href,{duplex:looseInstanceOf(i,ReadableStream)?"half":void 0,body:i,headers:Object.fromEntries(n.entries()),method:t,redirect:"manual",signal:signal(r,a?.signal)});return a?.DPoP?.cacheNonce(o,r),o}async function protectedResourceRequest(e,t,r,n,i,a){let o=await resourceRequest(e,t,r,n,i,a);return checkAuthenticationChallenges(o),o}async function userInfoRequest(e,t,r,n){assertAs(e),assertClient(t);let i=resolveEndpoint(e,"userinfo_endpoint",t.use_mtls_endpoint_aliases,n?.[allowInsecureRequests]!==!0),a=prepareHeaders(n?.headers);return t.userinfo_signed_response_alg?a.set("accept","application/jwt"):(a.set("accept","application/json"),a.append("accept","application/jwt")),resourceRequest(r,"GET",i,a,null,{...n,[clockSkew]:getClockSkew(t)})}function setJwksCache(e,t,r,n){(jwksMap||=new WeakMap).set(e,{jwks:t,uat:r,get age(){return epochTime()-this.uat}}),n&&Object.assign(n,{jwks:structuredClone(t),uat:r})}function isFreshJwksCache(e){return!("object"!=typeof e||null===e||!("uat"in e)||"number"!=typeof e.uat||epochTime()-e.uat>=300)&&"jwks"in e&&!!isJsonObject(e.jwks)&&!!Array.isArray(e.jwks.keys)&&!!Array.prototype.every.call(e.jwks.keys,isJsonObject)}function clearJwksCache(e,t){jwksMap?.delete(e),delete t?.jwks,delete t?.uat}async function getPublicSigKeyFromIssuerJwksUri(e,t,r){let n,i,a,{alg:o,kid:s}=r;if(checkSupportedJwsAlg(r),!jwksMap?.has(e)&&isFreshJwksCache(t?.[jwksCache])&&setJwksCache(e,t?.[jwksCache].jwks,t?.[jwksCache].uat),jwksMap?.has(e)){if({jwks:n,age:i}=jwksMap.get(e),i>=300)return clearJwksCache(e,t?.[jwksCache]),getPublicSigKeyFromIssuerJwksUri(e,t,r)}else n=await jwksRequest(e,t).then(processJwksResponse),i=0,setJwksCache(e,n,epochTime(),t?.[jwksCache]);switch(o.slice(0,2)){case"RS":case"PS":a="RSA";break;case"ES":a="EC";break;case"Ed":a="OKP";break;case"ML":a="AKP";break;default:throw new UnsupportedOperationError("unsupported JWS algorithm",{cause:{alg:o}})}let c=n.keys.filter(e=>{if(e.kty!==a||void 0!==s&&s!==e.kid||void 0!==e.alg&&o!==e.alg||void 0!==e.use&&"sig"!==e.use||e.key_ops?.includes("verify")===!1)return!1;switch(!0){case"ES256"===o&&"P-256"!==e.crv:case"ES384"===o&&"P-384"!==e.crv:case"ES512"===o&&"P-521"!==e.crv:case"Ed25519"===o&&"Ed25519"!==e.crv:case"EdDSA"===o&&"Ed25519"!==e.crv:return!1}return!0}),{0:u,length:l}=c;if(!l){if(i>=60)return clearJwksCache(e,t?.[jwksCache]),getPublicSigKeyFromIssuerJwksUri(e,t,r);throw OPE("error when selecting a JWT verification key, no applicable keys found",KEY_SELECTION,{header:r,candidates:c,jwks_uri:new URL(e.jwks_uri)})}if(1!==l)throw OPE('error when selecting a JWT verification key, multiple applicable keys found, a "kid" JWT Header Parameter is required',KEY_SELECTION,{header:r,candidates:c,jwks_uri:new URL(e.jwks_uri)});return importJwk(o,u)}let skipSubjectCheck=Symbol();function getContentType(e){return e.headers.get("content-type")?.split(";")[0]}async function processUserInfoResponse(e,t,r,n,i){let a;if(assertAs(e),assertClient(t),!looseInstanceOf(n,Response))throw CodedTypeError('"response" must be an instance of Response',ERR_INVALID_ARG_TYPE);if(checkAuthenticationChallenges(n),200!==n.status)throw OPE('"response" is not a conform UserInfo Endpoint response (unexpected HTTP status code)',RESPONSE_IS_NOT_CONFORM,n);if(assertReadableResponse(n),"application/jwt"===getContentType(n)){let{claims:r,jwt:o}=await validateJwt(await n.text(),checkSigningAlgorithm.bind(void 0,t.userinfo_signed_response_alg,e.userinfo_signing_alg_values_supported,void 0),getClockSkew(t),getClockTolerance(t),i?.[jweDecrypt]).then(validateOptionalAudience.bind(void 0,t.client_id)).then(validateOptionalIssuer.bind(void 0,e));jwtRefs.set(n,o),a=r}else{if(t.userinfo_signed_response_alg)throw OPE("JWT UserInfo Response expected",JWT_USERINFO_EXPECTED,n);a=await getResponseJsonBody(n)}if(assertString(a.sub,'"response" body "sub" property',INVALID_RESPONSE,{body:a}),r===skipSubjectCheck);else if(assertString(r,'"expectedSubject"'),a.sub!==r)throw OPE('unexpected "response" body "sub" property value',JSON_ATTRIBUTE_COMPARISON,{expected:r,body:a,attribute:"sub"});return a}async function authenticatedRequest(e,t,r,n,i,a,o){return await r(e,t,i,a),a.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),(o?.[customFetch1]||fetch)(n.href,{body:i,headers:Object.fromEntries(a.entries()),method:"POST",redirect:"manual",signal:signal(n,o?.signal)})}async function tokenEndpointRequest(e,t,r,n,i,a){let o=resolveEndpoint(e,"token_endpoint",t.use_mtls_endpoint_aliases,a?.[allowInsecureRequests]!==!0);i.set("grant_type",n);let s=prepareHeaders(a?.headers);s.set("accept","application/json"),a?.DPoP!==void 0&&(assertDPoP(a.DPoP),await a.DPoP.addProof(o,s,"POST"));let c=await authenticatedRequest(e,t,r,o,i,s,a);return a?.DPoP?.cacheNonce(c,o),c}async function refreshTokenGrantRequest(e,t,r,n,i){assertAs(e),assertClient(t),assertString(n,'"refreshToken"');let a=new URLSearchParams(i?.additionalParameters);return a.set("refresh_token",n),tokenEndpointRequest(e,t,r,"refresh_token",a,i)}let idTokenClaims=new WeakMap,jwtRefs=new WeakMap;function getValidatedIdTokenClaims(e){if(!e.id_token)return;let t=idTokenClaims.get(e);if(!t)throw CodedTypeError('"ref" was already garbage collected or did not resolve from the proper sources',ERR_INVALID_ARG_VALUE);return t}async function validateApplicationLevelSignature(e,t,r){let n;if(assertAs(e),!jwtRefs.has(t))throw CodedTypeError('"ref" does not contain a processed JWT Response to verify the signature of',ERR_INVALID_ARG_VALUE);let{0:i,1:a,2:o}=jwtRefs.get(t).split("."),s=JSON.parse(buf(b64u(i)));if(s.alg.startsWith("HS"))throw new UnsupportedOperationError("unsupported JWS algorithm",{cause:{alg:s.alg}});n=await getPublicSigKeyFromIssuerJwksUri(e,r,s),await validateJwsSignature(i,a,n,b64u(o))}async function processGenericAccessTokenResponse(e,t,r,n,i,a){if(assertAs(e),assertClient(t),!looseInstanceOf(r,Response))throw CodedTypeError('"response" must be an instance of Response',ERR_INVALID_ARG_TYPE);await checkOAuthBodyError(r,200,"Token Endpoint"),assertReadableResponse(r);let o=await getResponseJsonBody(r);if(assertString(o.access_token,'"response" body "access_token" property',INVALID_RESPONSE,{body:o}),assertString(o.token_type,'"response" body "token_type" property',INVALID_RESPONSE,{body:o}),o.token_type=o.token_type.toLowerCase(),void 0!==o.expires_in){let e="number"!=typeof o.expires_in?parseFloat(o.expires_in):o.expires_in;assertNumber(e,!0,'"response" body "expires_in" property',INVALID_RESPONSE,{body:o}),o.expires_in=e}if(void 0!==o.refresh_token&&assertString(o.refresh_token,'"response" body "refresh_token" property',INVALID_RESPONSE,{body:o}),void 0!==o.scope&&"string"!=typeof o.scope)throw OPE('"response" body "scope" property must be a string',INVALID_RESPONSE,{body:o});if(void 0!==o.id_token){assertString(o.id_token,'"response" body "id_token" property',INVALID_RESPONSE,{body:o});let a=["aud","exp","iat","iss","sub"];!0===t.require_auth_time&&a.push("auth_time"),void 0!==t.default_max_age&&(assertNumber(t.default_max_age,!0,'"client.default_max_age"'),a.push("auth_time")),n?.length&&a.push(...n);let{claims:s,jwt:c}=await validateJwt(o.id_token,checkSigningAlgorithm.bind(void 0,t.id_token_signed_response_alg,e.id_token_signing_alg_values_supported,"RS256"),getClockSkew(t),getClockTolerance(t),i).then(validatePresence.bind(void 0,a)).then(validateIssuer.bind(void 0,e)).then(validateAudience.bind(void 0,t.client_id));if(Array.isArray(s.aud)&&1!==s.aud.length){if(void 0===s.azp)throw OPE('ID Token "aud" (audience) claim includes additional untrusted audiences',JWT_CLAIM_COMPARISON,{claims:s,claim:"aud"});if(s.azp!==t.client_id)throw OPE('unexpected ID Token "azp" (authorized party) claim value',JWT_CLAIM_COMPARISON,{expected:t.client_id,claims:s,claim:"azp"})}void 0!==s.auth_time&&assertNumber(s.auth_time,!0,'ID Token "auth_time" (authentication time)',INVALID_RESPONSE,{claims:s}),jwtRefs.set(r,c),idTokenClaims.set(o,s)}if(a?.[o.token_type]!==void 0)a[o.token_type](r,o);else if("dpop"!==o.token_type&&"bearer"!==o.token_type)throw new UnsupportedOperationError("unsupported `token_type` value",{cause:{body:o}});return o}function checkAuthenticationChallenges(e){let t;if(t=parseWwwAuthenticateChallenges(e))throw new WWWAuthenticateChallengeError("server responded with a challenge in the WWW-Authenticate HTTP Header",{cause:t,response:e})}async function processRefreshTokenResponse(e,t,r,n){return processGenericAccessTokenResponse(e,t,r,void 0,n?.[jweDecrypt],n?.recognizedTokenTypes)}function validateOptionalAudience(e,t){return void 0!==t.claims.aud?validateAudience(e,t):t}function validateAudience(e,t){if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e))throw OPE('unexpected JWT "aud" (audience) claim value',JWT_CLAIM_COMPARISON,{expected:e,claims:t.claims,claim:"aud"})}else if(t.claims.aud!==e)throw OPE('unexpected JWT "aud" (audience) claim value',JWT_CLAIM_COMPARISON,{expected:e,claims:t.claims,claim:"aud"});return t}function validateOptionalIssuer(e,t){return void 0!==t.claims.iss?validateIssuer(e,t):t}function validateIssuer(e,t){let r=e[_expectedIssuer]?.(t)??e.issuer;if(t.claims.iss!==r)throw OPE('unexpected JWT "iss" (issuer) claim value',JWT_CLAIM_COMPARISON,{expected:r,claims:t.claims,claim:"iss"});return t}let branded=new WeakSet;function brand(e){return branded.add(e),e}let nopkce=Symbol();async function authorizationCodeGrantRequest(e,t,r,n,i,a,o){if(assertAs(e),assertClient(t),!branded.has(n))throw CodedTypeError('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()',ERR_INVALID_ARG_VALUE);assertString(i,'"redirectUri"');let s=getURLSearchParameter(n,"code");if(!s)throw OPE('no authorization code in "callbackParameters"',INVALID_RESPONSE);let c=new URLSearchParams(o?.additionalParameters);return c.set("redirect_uri",i),c.set("code",s),a!==nopkce&&(assertString(a,'"codeVerifier"'),c.set("code_verifier",a)),tokenEndpointRequest(e,t,r,"authorization_code",c,o)}let jwtClaimNames={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation",auth_time:"authentication time"};function validatePresence(e,t){for(let r of e)if(void 0===t.claims[r])throw OPE(`JWT "${r}" (${jwtClaimNames[r]}) claim missing`,INVALID_RESPONSE,{claims:t.claims});return t}let expectNoNonce=Symbol(),skipAuthTimeCheck=Symbol();async function processAuthorizationCodeResponse(e,t,r,n){return"string"==typeof n?.expectedNonce||"number"==typeof n?.maxAge||n?.requireIdToken?processAuthorizationCodeOpenIDResponse(e,t,r,n.expectedNonce,n.maxAge,n[jweDecrypt],n.recognizedTokenTypes):processAuthorizationCodeOAuth2Response(e,t,r,n?.[jweDecrypt],n?.recognizedTokenTypes)}async function processAuthorizationCodeOpenIDResponse(e,t,r,n,i,a,o){let s=[];switch(n){case void 0:n=expectNoNonce;break;case expectNoNonce:break;default:assertString(n,'"expectedNonce" argument'),s.push("nonce")}switch(i??=t.default_max_age){case void 0:i=skipAuthTimeCheck;break;case skipAuthTimeCheck:break;default:assertNumber(i,!0,'"maxAge" argument'),s.push("auth_time")}let c=await processGenericAccessTokenResponse(e,t,r,s,a,o);assertString(c.id_token,'"response" body "id_token" property',INVALID_RESPONSE,{body:c});let u=getValidatedIdTokenClaims(c);if(i!==skipAuthTimeCheck){let e=epochTime()+getClockSkew(t),r=getClockTolerance(t);if(u.auth_time+i<e-r)throw OPE("too much time has elapsed since the last End-User authentication",JWT_TIMESTAMP_CHECK,{claims:u,now:e,tolerance:r,claim:"auth_time"})}if(n===expectNoNonce){if(void 0!==u.nonce)throw OPE('unexpected ID Token "nonce" claim value',JWT_CLAIM_COMPARISON,{expected:void 0,claims:u,claim:"nonce"})}else if(u.nonce!==n)throw OPE('unexpected ID Token "nonce" claim value',JWT_CLAIM_COMPARISON,{expected:n,claims:u,claim:"nonce"});return c}async function processAuthorizationCodeOAuth2Response(e,t,r,n,i){let a=await processGenericAccessTokenResponse(e,t,r,void 0,n,i),o=getValidatedIdTokenClaims(a);if(o){if(void 0!==t.default_max_age){assertNumber(t.default_max_age,!0,'"client.default_max_age"');let e=epochTime()+getClockSkew(t),r=getClockTolerance(t);if(o.auth_time+t.default_max_age<e-r)throw OPE("too much time has elapsed since the last End-User authentication",JWT_TIMESTAMP_CHECK,{claims:o,now:e,tolerance:r,claim:"auth_time"})}if(void 0!==o.nonce)throw OPE('unexpected ID Token "nonce" claim value',JWT_CLAIM_COMPARISON,{expected:void 0,claims:o,claim:"nonce"})}return a}let WWW_AUTHENTICATE_CHALLENGE="OAUTH_WWW_AUTHENTICATE_CHALLENGE",RESPONSE_BODY_ERROR="OAUTH_RESPONSE_BODY_ERROR",UNSUPPORTED_OPERATION="OAUTH_UNSUPPORTED_OPERATION",AUTHORIZATION_RESPONSE_ERROR="OAUTH_AUTHORIZATION_RESPONSE_ERROR",JWT_USERINFO_EXPECTED="OAUTH_JWT_USERINFO_EXPECTED",PARSE_ERROR="OAUTH_PARSE_ERROR",INVALID_RESPONSE="OAUTH_INVALID_RESPONSE",INVALID_REQUEST="OAUTH_INVALID_REQUEST",RESPONSE_IS_NOT_JSON="OAUTH_RESPONSE_IS_NOT_JSON",RESPONSE_IS_NOT_CONFORM="OAUTH_RESPONSE_IS_NOT_CONFORM",HTTP_REQUEST_FORBIDDEN="OAUTH_HTTP_REQUEST_FORBIDDEN",REQUEST_PROTOCOL_FORBIDDEN="OAUTH_REQUEST_PROTOCOL_FORBIDDEN",JWT_TIMESTAMP_CHECK="OAUTH_JWT_TIMESTAMP_CHECK_FAILED",JWT_CLAIM_COMPARISON="OAUTH_JWT_CLAIM_COMPARISON_FAILED",JSON_ATTRIBUTE_COMPARISON="OAUTH_JSON_ATTRIBUTE_COMPARISON_FAILED",KEY_SELECTION="OAUTH_KEY_SELECTION_FAILED",MISSING_SERVER_METADATA="OAUTH_MISSING_SERVER_METADATA",INVALID_SERVER_METADATA="OAUTH_INVALID_SERVER_METADATA";function checkJwtType(e,t){if("string"!=typeof t.header.typ||normalizeTyp1(t.header.typ)!==e)throw OPE('unexpected JWT "typ" header parameter value',INVALID_RESPONSE,{header:t.header});return t}async function clientCredentialsGrantRequest(e,t,r,n,i){return assertAs(e),assertClient(t),tokenEndpointRequest(e,t,r,"client_credentials",new URLSearchParams(n),i)}async function genericTokenEndpointRequest(e,t,r,n,i,a){return assertAs(e),assertClient(t),assertString(n,'"grantType"'),tokenEndpointRequest(e,t,r,n,new URLSearchParams(i),a)}async function processGenericTokenEndpointResponse(e,t,r,n){return processGenericAccessTokenResponse(e,t,r,void 0,n?.[jweDecrypt],n?.recognizedTokenTypes)}async function processClientCredentialsResponse(e,t,r,n){return processGenericAccessTokenResponse(e,t,r,void 0,n?.[jweDecrypt],n?.recognizedTokenTypes)}async function revocationRequest(e,t,r,n,i){assertAs(e),assertClient(t),assertString(n,'"token"');let a=resolveEndpoint(e,"revocation_endpoint",t.use_mtls_endpoint_aliases,i?.[allowInsecureRequests]!==!0),o=new URLSearchParams(i?.additionalParameters);o.set("token",n);let s=prepareHeaders(i?.headers);return s.delete("accept"),authenticatedRequest(e,t,r,a,o,s,i)}async function processRevocationResponse(e){if(!looseInstanceOf(e,Response))throw CodedTypeError('"response" must be an instance of Response',ERR_INVALID_ARG_TYPE);await checkOAuthBodyError(e,200,"Revocation Endpoint")}function assertReadableResponse(e){if(e.bodyUsed)throw CodedTypeError('"response" body has been used already',ERR_INVALID_ARG_VALUE)}async function introspectionRequest(e,t,r,n,i){assertAs(e),assertClient(t),assertString(n,'"token"');let a=resolveEndpoint(e,"introspection_endpoint",t.use_mtls_endpoint_aliases,i?.[allowInsecureRequests]!==!0),o=new URLSearchParams(i?.additionalParameters);o.set("token",n);let s=prepareHeaders(i?.headers);return i?.requestJwtResponse??t.introspection_signed_response_alg?s.set("accept","application/token-introspection+jwt"):s.set("accept","application/json"),authenticatedRequest(e,t,r,a,o,s,i)}async function processIntrospectionResponse(e,t,r,n){let i;if(assertAs(e),assertClient(t),!looseInstanceOf(r,Response))throw CodedTypeError('"response" must be an instance of Response',ERR_INVALID_ARG_TYPE);if(await checkOAuthBodyError(r,200,"Introspection Endpoint"),"application/token-introspection+jwt"===getContentType(r)){assertReadableResponse(r);let{claims:a,jwt:o}=await validateJwt(await r.text(),checkSigningAlgorithm.bind(void 0,t.introspection_signed_response_alg,e.introspection_signing_alg_values_supported,"RS256"),getClockSkew(t),getClockTolerance(t),n?.[jweDecrypt]).then(checkJwtType.bind(void 0,"token-introspection+jwt")).then(validatePresence.bind(void 0,["aud","iat","iss"])).then(validateIssuer.bind(void 0,e)).then(validateAudience.bind(void 0,t.client_id));if(jwtRefs.set(r,o),!isJsonObject(a.token_introspection))throw OPE('JWT "token_introspection" claim must be a JSON object',INVALID_RESPONSE,{claims:a});i=a.token_introspection}else assertReadableResponse(r),i=await getResponseJsonBody(r);if("boolean"!=typeof i.active)throw OPE('"response" body "active" property must be a boolean',INVALID_RESPONSE,{body:i});return i}async function jwksRequest(e,t){assertAs(e);let r=resolveEndpoint(e,"jwks_uri",!1,t?.[allowInsecureRequests]!==!0),n=prepareHeaders(t?.headers);return n.set("accept","application/json"),n.append("accept","application/jwk-set+json"),(t?.[customFetch1]||fetch)(r.href,{body:void 0,headers:Object.fromEntries(n.entries()),method:"GET",redirect:"manual",signal:signal(r,t?.signal)})}async function processJwksResponse(e){if(!looseInstanceOf(e,Response))throw CodedTypeError('"response" must be an instance of Response',ERR_INVALID_ARG_TYPE);if(200!==e.status)throw OPE('"response" is not a conform JSON Web Key Set response (unexpected HTTP status code)',RESPONSE_IS_NOT_CONFORM,e);assertReadableResponse(e);let t=await getResponseJsonBody(e,e=>assertContentTypes(e,"application/json","application/jwk-set+json"));if(!Array.isArray(t.keys))throw OPE('"response" body "keys" property must be an array',INVALID_RESPONSE,{body:t});if(!Array.prototype.every.call(t.keys,isJsonObject))throw OPE('"response" body "keys" property members must be JWK formatted objects',INVALID_RESPONSE,{body:t});return t}function supported(e){switch(e){case"PS256":case"ES256":case"RS256":case"PS384":case"ES384":case"RS384":case"PS512":case"ES512":case"RS512":case"Ed25519":case"EdDSA":case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return!0;default:return!1}}function checkSupportedJwsAlg(e){if(!supported(e.alg))throw new UnsupportedOperationError('unsupported JWS "alg" identifier',{cause:{alg:e.alg}})}function checkRsaKeyAlgorithm(e){let{algorithm:t}=e;if("number"!=typeof t.modulusLength||t.modulusLength<2048)throw new UnsupportedOperationError(`unsupported ${t.name} modulusLength`,{cause:e})}function ecdsaHashName(e){let{algorithm:t}=e;switch(t.namedCurve){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new UnsupportedOperationError("unsupported ECDSA namedCurve",{cause:e})}}function keyToSubtle(e){switch(e.algorithm.name){case"ECDSA":return{name:e.algorithm.name,hash:ecdsaHashName(e)};case"RSA-PSS":switch(checkRsaKeyAlgorithm(e),e.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:e.algorithm.name,saltLength:parseInt(e.algorithm.hash.name.slice(-3),10)>>3};default:throw new UnsupportedOperationError("unsupported RSA-PSS hash name",{cause:e})}case"RSASSA-PKCS1-v1_5":return checkRsaKeyAlgorithm(e),e.algorithm.name;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":case"Ed25519":return e.algorithm.name}throw new UnsupportedOperationError("unsupported CryptoKey algorithm name",{cause:e})}async function validateJwsSignature(e,t,r,n){let i=buf(`${e}.${t}`),a=keyToSubtle(r);if(!await crypto.subtle.verify(a,r,n,i))throw OPE("JWT signature verification failed",INVALID_RESPONSE,{key:r,data:i,signature:n,algorithm:a})}async function validateJwt(e,t,r,n,i){let a,o,{0:s,1:c,length:u}=e.split(".");if(5===u)if(void 0!==i)e=await i(e),{0:s,1:c,length:u}=e.split(".");else throw new UnsupportedOperationError("JWE decryption is not configured",{cause:e});if(3!==u)throw OPE("Invalid JWT",INVALID_RESPONSE,e);try{a=JSON.parse(buf(b64u(s)))}catch(e){throw OPE("failed to parse JWT Header body as base64url encoded JSON",PARSE_ERROR,e)}if(!isJsonObject(a))throw OPE("JWT Header must be a top level object",INVALID_RESPONSE,e);if(t(a),void 0!==a.crit)throw new UnsupportedOperationError('no JWT "crit" header parameter extensions are supported',{cause:{header:a}});try{o=JSON.parse(buf(b64u(c)))}catch(e){throw OPE("failed to parse JWT Payload body as base64url encoded JSON",PARSE_ERROR,e)}if(!isJsonObject(o))throw OPE("JWT Payload must be a top level object",INVALID_RESPONSE,e);let l=epochTime()+r;if(void 0!==o.exp){if("number"!=typeof o.exp)throw OPE('unexpected JWT "exp" (expiration time) claim type',INVALID_RESPONSE,{claims:o});if(o.exp<=l-n)throw OPE('unexpected JWT "exp" (expiration time) claim value, expiration is past current timestamp',JWT_TIMESTAMP_CHECK,{claims:o,now:l,tolerance:n,claim:"exp"})}if(void 0!==o.iat&&"number"!=typeof o.iat)throw OPE('unexpected JWT "iat" (issued at) claim type',INVALID_RESPONSE,{claims:o});if(void 0!==o.iss&&"string"!=typeof o.iss)throw OPE('unexpected JWT "iss" (issuer) claim type',INVALID_RESPONSE,{claims:o});if(void 0!==o.nbf){if("number"!=typeof o.nbf)throw OPE('unexpected JWT "nbf" (not before) claim type',INVALID_RESPONSE,{claims:o});if(o.nbf>l+n)throw OPE('unexpected JWT "nbf" (not before) claim value',JWT_TIMESTAMP_CHECK,{claims:o,now:l,tolerance:n,claim:"nbf"})}if(void 0!==o.aud&&"string"!=typeof o.aud&&!Array.isArray(o.aud))throw OPE('unexpected JWT "aud" (audience) claim type',INVALID_RESPONSE,{claims:o});return{header:a,claims:o,jwt:e}}async function validateJwtAuthResponse(e,t,r,n,i){if(assertAs(e),assertClient(t),r instanceof URL&&(r=r.searchParams),!(r instanceof URLSearchParams))throw CodedTypeError('"parameters" must be an instance of URLSearchParams, or URL',ERR_INVALID_ARG_TYPE);let a=getURLSearchParameter(r,"response");if(!a)throw OPE('"parameters" does not contain a JARM response',INVALID_RESPONSE);let{claims:o,header:s,jwt:c}=await validateJwt(a,checkSigningAlgorithm.bind(void 0,t.authorization_signed_response_alg,e.authorization_signing_alg_values_supported,"RS256"),getClockSkew(t),getClockTolerance(t),i?.[jweDecrypt]).then(validatePresence.bind(void 0,["aud","exp","iss"])).then(validateIssuer.bind(void 0,e)).then(validateAudience.bind(void 0,t.client_id)),{0:u,1:l,2:d}=c.split("."),p=b64u(d),h=await getPublicSigKeyFromIssuerJwksUri(e,i,s);await validateJwsSignature(u,l,h,p);let f=new URLSearchParams;for(let[e,t]of Object.entries(o))"string"==typeof t&&"aud"!==e&&f.set(e,t);return validateAuthResponse(e,t,f,n)}async function idTokenHash(e,t,r){let n;switch(t.alg){case"RS256":case"PS256":case"ES256":n="SHA-256";break;case"RS384":case"PS384":case"ES384":n="SHA-384";break;case"RS512":case"PS512":case"ES512":case"Ed25519":case"EdDSA":n="SHA-512";break;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":n={name:"cSHAKE256",length:512,outputLength:512};break;default:throw new UnsupportedOperationError(`unsupported JWS algorithm for ${r} calculation`,{cause:{alg:t.alg}})}let i=await crypto.subtle.digest(n,buf(e));return b64u(i.slice(0,i.byteLength/2))}async function idTokenHashMatches(e,t,r,n){return t===await idTokenHash(e,r,n)}async function validateDetachedSignatureResponse(e,t,r,n,i,a,o){return validateHybridResponse(e,t,r,n,i,a,o,!0)}async function validateCodeIdTokenResponse(e,t,r,n,i,a,o){return validateHybridResponse(e,t,r,n,i,a,o,!1)}async function consumeStream(e){if(e.bodyUsed)throw CodedTypeError("form_post Request instances must contain a readable body",ERR_INVALID_ARG_VALUE,{cause:e});return e.text()}async function formPostResponse(e){if("POST"!==e.method)throw CodedTypeError("form_post responses are expected to use the POST method",ERR_INVALID_ARG_VALUE,{cause:e});if("application/x-www-form-urlencoded"!==getContentType(e))throw CodedTypeError("form_post responses are expected to use the application/x-www-form-urlencoded content-type",ERR_INVALID_ARG_VALUE,{cause:e});return consumeStream(e)}async function validateHybridResponse(e,t,r,n,i,a,o,s){if(assertAs(e),assertClient(t),r instanceof URL){if(!r.hash.length)throw CodedTypeError('"parameters" as an instance of URL must contain a hash (fragment) with the Authorization Response parameters',ERR_INVALID_ARG_VALUE);r=new URLSearchParams(r.hash.slice(1))}else if(looseInstanceOf(r,Request))r=new URLSearchParams(await formPostResponse(r));else if(r instanceof URLSearchParams)r=new URLSearchParams(r);else throw CodedTypeError('"parameters" must be an instance of URLSearchParams, URL, or Response',ERR_INVALID_ARG_TYPE);let c=getURLSearchParameter(r,"id_token");switch(r.delete("id_token"),i){case void 0:case expectNoState:break;default:assertString(i,'"expectedState" argument')}let u=validateAuthResponse({...e,authorization_response_iss_parameter_supported:!1},t,r,i);if(!c)throw OPE('"parameters" does not contain an ID Token',INVALID_RESPONSE);let l=getURLSearchParameter(r,"code");if(!l)throw OPE('"parameters" does not contain an Authorization Code',INVALID_RESPONSE);let d=["aud","exp","iat","iss","sub","nonce","c_hash"],p=r.get("state");s&&("string"==typeof i||null!==p)&&d.push("s_hash"),void 0!==a?assertNumber(a,!0,'"maxAge" argument'):void 0!==t.default_max_age&&assertNumber(t.default_max_age,!0,'"client.default_max_age"'),a??=t.default_max_age??skipAuthTimeCheck,(t.require_auth_time||a!==skipAuthTimeCheck)&&d.push("auth_time");let{claims:h,header:f,jwt:m}=await validateJwt(c,checkSigningAlgorithm.bind(void 0,t.id_token_signed_response_alg,e.id_token_signing_alg_values_supported,"RS256"),getClockSkew(t),getClockTolerance(t),o?.[jweDecrypt]).then(validatePresence.bind(void 0,d)).then(validateIssuer.bind(void 0,e)).then(validateAudience.bind(void 0,t.client_id)),g=getClockSkew(t),y=epochTime()+g;if(h.iat<y-3600)throw OPE('unexpected JWT "iat" (issued at) claim value, it is too far in the past',JWT_TIMESTAMP_CHECK,{now:y,claims:h,claim:"iat"});if(assertString(h.c_hash,'ID Token "c_hash" (code hash) claim value',INVALID_RESPONSE,{claims:h}),void 0!==h.auth_time&&assertNumber(h.auth_time,!0,'ID Token "auth_time" (authentication time)',INVALID_RESPONSE,{claims:h}),a!==skipAuthTimeCheck){let e=epochTime()+getClockSkew(t),r=getClockTolerance(t);if(h.auth_time+a<e-r)throw OPE("too much time has elapsed since the last End-User authentication",JWT_TIMESTAMP_CHECK,{claims:h,now:e,tolerance:r,claim:"auth_time"})}if(assertString(n,'"expectedNonce" argument'),h.nonce!==n)throw OPE('unexpected ID Token "nonce" claim value',JWT_CLAIM_COMPARISON,{expected:n,claims:h,claim:"nonce"});if(Array.isArray(h.aud)&&1!==h.aud.length){if(void 0===h.azp)throw OPE('ID Token "aud" (audience) claim includes additional untrusted audiences',JWT_CLAIM_COMPARISON,{claims:h,claim:"aud"});if(h.azp!==t.client_id)throw OPE('unexpected ID Token "azp" (authorized party) claim value',JWT_CLAIM_COMPARISON,{expected:t.client_id,claims:h,claim:"azp"})}let{0:b,1:w,2:_}=m.split("."),v=b64u(_),E=await getPublicSigKeyFromIssuerJwksUri(e,o,f);if(await validateJwsSignature(b,w,E,v),await idTokenHashMatches(l,h.c_hash,f,"c_hash")!==!0)throw OPE('invalid ID Token "c_hash" (code hash) claim value',JWT_CLAIM_COMPARISON,{code:l,alg:f.alg,claim:"c_hash",claims:h});if((s&&null!==p||void 0!==h.s_hash)&&(assertString(h.s_hash,'ID Token "s_hash" (state hash) claim value',INVALID_RESPONSE,{claims:h}),assertString(p,'"state" response parameter',INVALID_RESPONSE,{parameters:r}),await idTokenHashMatches(p,h.s_hash,f,"s_hash")!==!0))throw OPE('invalid ID Token "s_hash" (state hash) claim value',JWT_CLAIM_COMPARISON,{state:p,alg:f.alg,claim:"s_hash",claims:h});return u}function checkSigningAlgorithm(e,t,r,n){if(void 0!==e){if("string"==typeof e?n.alg!==e:!e.includes(n.alg))throw OPE('unexpected JWT "alg" header parameter',INVALID_RESPONSE,{header:n,expected:e,reason:"client configuration"});return}if(Array.isArray(t)){if(!t.includes(n.alg))throw OPE('unexpected JWT "alg" header parameter',INVALID_RESPONSE,{header:n,expected:t,reason:"authorization server metadata"});return}if(void 0!==r){if("string"==typeof r?n.alg!==r:"function"==typeof r?!r(n.alg):!r.includes(n.alg))throw OPE('unexpected JWT "alg" header parameter',INVALID_RESPONSE,{header:n,expected:r,reason:"default value"});return}throw OPE('missing client or server configuration to verify used JWT "alg" header parameter',void 0,{client:e,issuer:t,fallback:r})}function getURLSearchParameter(e,t){let{0:r,length:n}=e.getAll(t);if(n>1)throw OPE(`"${t}" parameter must be provided only once`,INVALID_RESPONSE);return r}let skipStateCheck=Symbol(),expectNoState=Symbol();function validateAuthResponse(e,t,r,n){if(assertAs(e),assertClient(t),r instanceof URL&&(r=r.searchParams),!(r instanceof URLSearchParams))throw CodedTypeError('"parameters" must be an instance of URLSearchParams, or URL',ERR_INVALID_ARG_TYPE);if(getURLSearchParameter(r,"response"))throw OPE('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()',INVALID_RESPONSE,{parameters:r});let i=getURLSearchParameter(r,"iss"),a=getURLSearchParameter(r,"state");if(!i&&e.authorization_response_iss_parameter_supported)throw OPE('response parameter "iss" (issuer) missing',INVALID_RESPONSE,{parameters:r});if(i&&i!==e.issuer)throw OPE('unexpected "iss" (issuer) response parameter value',INVALID_RESPONSE,{expected:e.issuer,parameters:r});switch(n){case void 0:case expectNoState:if(void 0!==a)throw OPE('unexpected "state" response parameter encountered',INVALID_RESPONSE,{expected:void 0,parameters:r});break;case skipStateCheck:break;default:if(assertString(n,'"expectedState" argument'),a!==n)throw OPE(void 0===a?'response parameter "state" missing':'unexpected "state" response parameter value',INVALID_RESPONSE,{expected:n,parameters:r})}if(getURLSearchParameter(r,"error"))throw new AuthorizationResponseError("authorization response from the server is an error",{cause:r});let o=getURLSearchParameter(r,"id_token"),s=getURLSearchParameter(r,"token");if(void 0!==o||void 0!==s)throw new UnsupportedOperationError("implicit and hybrid flows are not supported");return brand(new URLSearchParams(r))}function algToSubtle(e){switch(e){case"PS256":case"PS384":case"PS512":return{name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`};case"RS256":case"RS384":case"RS512":return{name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`};case"ES256":case"ES384":return{name:"ECDSA",namedCurve:`P-${e.slice(-3)}`};case"ES512":return{name:"ECDSA",namedCurve:"P-521"};case"EdDSA":return"Ed25519";case"Ed25519":case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return e;default:throw new UnsupportedOperationError("unsupported JWS algorithm",{cause:{alg:e}})}}async function importJwk(e,t){let{ext:r,key_ops:n,use:i,...a}=t;return crypto.subtle.importKey("jwk",a,algToSubtle(e),!0,["verify"])}async function deviceAuthorizationRequest(e,t,r,n,i){assertAs(e),assertClient(t);let a=resolveEndpoint(e,"device_authorization_endpoint",t.use_mtls_endpoint_aliases,i?.[allowInsecureRequests]!==!0),o=new URLSearchParams(n);o.set("client_id",t.client_id);let s=prepareHeaders(i?.headers);return s.set("accept","application/json"),authenticatedRequest(e,t,r,a,o,s,i)}async function processDeviceAuthorizationResponse(e,t,r){if(assertAs(e),assertClient(t),!looseInstanceOf(r,Response))throw CodedTypeError('"response" must be an instance of Response',ERR_INVALID_ARG_TYPE);await checkOAuthBodyError(r,200,"Device Authorization Endpoint"),assertReadableResponse(r);let n=await getResponseJsonBody(r);assertString(n.device_code,'"response" body "device_code" property',INVALID_RESPONSE,{body:n}),assertString(n.user_code,'"response" body "user_code" property',INVALID_RESPONSE,{body:n}),assertString(n.verification_uri,'"response" body "verification_uri" property',INVALID_RESPONSE,{body:n});let i="number"!=typeof n.expires_in?parseFloat(n.expires_in):n.expires_in;return assertNumber(i,!0,'"response" body "expires_in" property',INVALID_RESPONSE,{body:n}),n.expires_in=i,void 0!==n.verification_uri_complete&&assertString(n.verification_uri_complete,'"response" body "verification_uri_complete" property',INVALID_RESPONSE,{body:n}),void 0!==n.interval&&assertNumber(n.interval,!1,'"response" body "interval" property',INVALID_RESPONSE,{body:n}),n}async function deviceCodeGrantRequest(e,t,r,n,i){assertAs(e),assertClient(t),assertString(n,'"deviceCode"');let a=new URLSearchParams(i?.additionalParameters);return a.set("device_code",n),tokenEndpointRequest(e,t,r,"urn:ietf:params:oauth:grant-type:device_code",a,i)}async function processDeviceCodeResponse(e,t,r,n){return processGenericAccessTokenResponse(e,t,r,void 0,n?.[jweDecrypt],n?.recognizedTokenTypes)}async function generateKeyPair(e,t){assertString(e,'"alg"');let r=algToSubtle(e);return(e.startsWith("PS")||e.startsWith("RS"))&&Object.assign(r,{modulusLength:t?.modulusLength??2048,publicExponent:new Uint8Array([1,0,1])}),crypto.subtle.generateKey(r,t?.extractable??!1,["sign","verify"])}function normalizeHtu(e){let t=new URL(e);return t.search="",t.hash="",t.href}async function validateDPoP(e,t,r,n){let i=e.headers.get("dpop");if(null===i)throw OPE("operation indicated DPoP use but the request has no DPoP HTTP Header",INVALID_REQUEST,{headers:e.headers});if(e.headers.get("authorization")?.toLowerCase().startsWith("dpop ")===!1)throw OPE("operation indicated DPoP use but the request's Authorization HTTP Header scheme is not DPoP",INVALID_REQUEST,{headers:e.headers});if("string"!=typeof r.cnf?.jkt)throw OPE("operation indicated DPoP use but the JWT Access Token has no jkt confirmation claim",INVALID_REQUEST,{claims:r});let a=getClockSkew(n),o=await validateJwt(i,checkSigningAlgorithm.bind(void 0,n?.signingAlgorithms,void 0,supported),a,getClockTolerance(n),void 0).then(checkJwtType.bind(void 0,"dpop+jwt")).then(validatePresence.bind(void 0,["iat","jti","ath","htm","htu"])),s=epochTime()+a;if(Math.abs(s-o.claims.iat)>300)throw OPE("DPoP Proof iat is not recent enough",JWT_TIMESTAMP_CHECK,{now:s,claims:o.claims,claim:"iat"});if(o.claims.htm!==e.method)throw OPE("DPoP Proof htm mismatch",JWT_CLAIM_COMPARISON,{expected:e.method,claims:o.claims,claim:"htm"});if("string"!=typeof o.claims.htu||normalizeHtu(o.claims.htu)!==normalizeHtu(e.url))throw OPE("DPoP Proof htu mismatch",JWT_CLAIM_COMPARISON,{expected:normalizeHtu(e.url),claims:o.claims,claim:"htu"});{let e=b64u(await crypto.subtle.digest("SHA-256",buf(t)));if(o.claims.ath!==e)throw OPE("DPoP Proof ath mismatch",JWT_CLAIM_COMPARISON,{expected:e,claims:o.claims,claim:"ath"})}{let e=await calculateJwkThumbprint1(o.header.jwk);if(r.cnf.jkt!==e)throw OPE("JWT Access Token confirmation mismatch",JWT_CLAIM_COMPARISON,{expected:e,claims:r,claim:"cnf.jkt"})}let{0:c,1:u,2:l}=i.split("."),d=b64u(l),{jwk:p,alg:h}=o.header;if(!p)throw OPE("DPoP Proof is missing the jwk header parameter",INVALID_REQUEST,{header:o.header});let f=await importJwk(h,p);if("public"!==f.type)throw OPE("DPoP Proof jwk header parameter must contain a public key",INVALID_REQUEST,{header:o.header});await validateJwsSignature(c,u,f,d)}async function validateJwtAccessToken(e,t,r,n){if(assertAs(e),!looseInstanceOf(t,Request))throw CodedTypeError('"request" must be an instance of Request',ERR_INVALID_ARG_TYPE);assertString(r,'"expectedAudience"');let i=t.headers.get("authorization");if(null===i)throw OPE('"request" is missing an Authorization HTTP Header',INVALID_REQUEST,{headers:t.headers});let{0:a,1:o,length:s}=i.split(" ");switch(a=a.toLowerCase()){case"dpop":case"bearer":break;default:throw new UnsupportedOperationError("unsupported Authorization HTTP Header scheme",{cause:{headers:t.headers}})}if(2!==s)throw OPE("invalid Authorization HTTP Header format",INVALID_REQUEST,{headers:t.headers});let c=["iss","exp","aud","sub","iat","jti","client_id"];(n?.requireDPoP||"dpop"===a||t.headers.has("dpop"))&&c.push("cnf");let{claims:u,header:l}=await validateJwt(o,checkSigningAlgorithm.bind(void 0,n?.signingAlgorithms,void 0,supported),getClockSkew(n),getClockTolerance(n),void 0).then(checkJwtType.bind(void 0,"at+jwt")).then(validatePresence.bind(void 0,c)).then(validateIssuer.bind(void 0,e)).then(validateAudience.bind(void 0,r)).catch(reassignRSCode);for(let e of["client_id","jti","sub"])if("string"!=typeof u[e])throw OPE(`unexpected JWT "${e}" claim type`,INVALID_REQUEST,{claims:u});if("cnf"in u){if(!isJsonObject(u.cnf))throw OPE('unexpected JWT "cnf" (confirmation) claim value',INVALID_REQUEST,{claims:u});let{0:e,length:t}=Object.keys(u.cnf);if(t){if(1!==t)throw new UnsupportedOperationError("multiple confirmation claims are not supported",{cause:{claims:u}});if("jkt"!==e)throw new UnsupportedOperationError("unsupported JWT Confirmation method",{cause:{claims:u}})}}let{0:d,1:p,2:h}=o.split("."),f=b64u(h),m=await getPublicSigKeyFromIssuerJwksUri(e,n,l);return await validateJwsSignature(d,p,m,f),(n?.requireDPoP||"dpop"===a||u.cnf?.jkt!==void 0||t.headers.has("dpop"))&&await validateDPoP(t,o,u,n).catch(reassignRSCode),u}function reassignRSCode(e){throw e instanceof OperationProcessingError&&e?.code===INVALID_REQUEST&&(e.code=INVALID_RESPONSE),e}async function backchannelAuthenticationRequest(e,t,r,n,i){assertAs(e),assertClient(t);let a=resolveEndpoint(e,"backchannel_authentication_endpoint",t.use_mtls_endpoint_aliases,i?.[allowInsecureRequests]!==!0),o=new URLSearchParams(n);o.set("client_id",t.client_id);let s=prepareHeaders(i?.headers);return s.set("accept","application/json"),authenticatedRequest(e,t,r,a,o,s,i)}async function processBackchannelAuthenticationResponse(e,t,r){if(assertAs(e),assertClient(t),!looseInstanceOf(r,Response))throw CodedTypeError('"response" must be an instance of Response',ERR_INVALID_ARG_TYPE);await checkOAuthBodyError(r,200,"Backchannel Authentication Endpoint"),assertReadableResponse(r);let n=await getResponseJsonBody(r);assertString(n.auth_req_id,'"response" body "auth_req_id" property',INVALID_RESPONSE,{body:n});let i="number"!=typeof n.expires_in?parseFloat(n.expires_in):n.expires_in;return assertNumber(i,!0,'"response" body "expires_in" property',INVALID_RESPONSE,{body:n}),n.expires_in=i,void 0!==n.interval&&assertNumber(n.interval,!1,'"response" body "interval" property',INVALID_RESPONSE,{body:n}),n}async function backchannelAuthenticationGrantRequest(e,t,r,n,i){assertAs(e),assertClient(t),assertString(n,'"authReqId"');let a=new URLSearchParams(i?.additionalParameters);return a.set("auth_req_id",n),tokenEndpointRequest(e,t,r,"urn:openid:params:grant-type:ciba",a,i)}async function processBackchannelAuthenticationGrantResponse(e,t,r,n){return processGenericAccessTokenResponse(e,t,r,void 0,n?.[jweDecrypt],n?.recognizedTokenTypes)}async function dynamicClientRegistrationRequest(e,t,r){assertAs(e);let n=resolveEndpoint(e,"registration_endpoint",t.use_mtls_endpoint_aliases,r?.[allowInsecureRequests]!==!0),i=prepareHeaders(r?.headers);i.set("accept","application/json"),i.set("content-type","application/json");let a="POST";r?.DPoP&&(assertDPoP(r.DPoP),await r.DPoP.addProof(n,i,a,r.initialAccessToken)),r?.initialAccessToken&&i.set("authorization",`${i.has("dpop")?"DPoP":"Bearer"} ${r.initialAccessToken}`);let o=await (r?.[customFetch1]||fetch)(n.href,{body:JSON.stringify(t),headers:Object.fromEntries(i.entries()),method:a,redirect:"manual",signal:signal(n,r?.signal)});return r?.DPoP?.cacheNonce(o,n),o}async function processDynamicClientRegistrationResponse(e){if(!looseInstanceOf(e,Response))throw CodedTypeError('"response" must be an instance of Response',ERR_INVALID_ARG_TYPE);await checkOAuthBodyError(e,201,"Dynamic Client Registration Endpoint"),assertReadableResponse(e);let t=await getResponseJsonBody(e);return assertString(t.client_id,'"response" body "client_id" property',INVALID_RESPONSE,{body:t}),void 0!==t.client_secret&&assertString(t.client_secret,'"response" body "client_secret" property',INVALID_RESPONSE,{body:t}),t.client_secret&&assertNumber(t.client_secret_expires_at,!0,'"response" body "client_secret_expires_at" property',INVALID_RESPONSE,{body:t}),t}async function resourceDiscoveryRequest(e,t){return performDiscovery(e,"resourceIdentifier",e=>(prependWellKnown(e,".well-known/oauth-protected-resource",!0),e),t)}async function processResourceDiscoveryResponse(e,t){let r=e;if(!(r instanceof URL)&&r!==_nodiscoverycheck)throw CodedTypeError('"expectedResourceIdentifier" must be an instance of URL',ERR_INVALID_ARG_TYPE);if(!looseInstanceOf(t,Response))throw CodedTypeError('"response" must be an instance of Response',ERR_INVALID_ARG_TYPE);if(200!==t.status)throw OPE('"response" is not a conform Resource Server Metadata response (unexpected HTTP status code)',RESPONSE_IS_NOT_CONFORM,t);assertReadableResponse(t);let n=await getResponseJsonBody(t);if(assertString(n.resource,'"response" body "resource" property',INVALID_RESPONSE,{body:n}),r!==_nodiscoverycheck&&new URL(n.resource).href!==r.href)throw OPE('"response" body "resource" property does not match the expected value',JSON_ATTRIBUTE_COMPARISON,{expected:r.href,body:n,attribute:"resource"});return n}async function getResponseJsonBody(e,t=assertApplicationJson){let r;try{r=await e.json()}catch(r){throw t(e),OPE('failed to parse "response" body as JSON',PARSE_ERROR,r)}if(!isJsonObject(r))throw OPE('"response" body must be a top level object',INVALID_RESPONSE,{body:r});return r}let _nopkce=nopkce,_nodiscoverycheck=Symbol(),_expectedIssuer=Symbol(),COOKIE_TTL=900;async function sealCookie(e,t,r){let{cookies:n,logger:i}=r,a=n[e],o=new Date;o.setTime(o.getTime()+1e3*COOKIE_TTL),i.debug(`CREATE_${e.toUpperCase()}`,{name:a.name,payload:t,COOKIE_TTL,expires:o});let s=await encode2({...r.jwt,maxAge:COOKIE_TTL,token:{value:t},salt:a.name}),c={...a.options,expires:o};return{name:a.name,value:s,options:c}}async function parseCookie2(e,t,r){try{let{logger:n,cookies:i,jwt:a}=r;if(n.debug(`PARSE_${e.toUpperCase()}`,{cookie:t}),!t)throw new InvalidCheck(`${e} cookie was missing`);let o=await decode2({...a,token:t,salt:i[e].name});if(o?.value)return o.value;throw Error("Invalid cookie")}catch(t){throw new InvalidCheck(`${e} value could not be parsed`,{cause:t})}}function clearCookie(e,t,r){let{logger:n,cookies:i}=t,a=i[e];n.debug(`CLEAR_${e.toUpperCase()}`,{cookie:a}),r.push({name:a.name,value:"",options:{...i[e].options,maxAge:0}})}function useCookie(e,t){return async function(r,n,i){let{provider:a,logger:o}=i;if(!a?.checks?.includes(e))return;let s=r?.[i.cookies[t].name];o.debug(`USE_${t.toUpperCase()}`,{value:s});let c=await parseCookie2(t,s,i);return clearCookie(t,i,n),c}}let pkce={async create(e){let t=generateRandomCodeVerifier(),r=await calculatePKCECodeChallenge(t);return{cookie:await sealCookie("pkceCodeVerifier",t,e),value:r}},use:useCookie("pkce","pkceCodeVerifier")},STATE_MAX_AGE=900,encodedStateSalt="encodedState",state={async create(e,t){let{provider:r}=e;if(!r.checks.includes("state")){if(t)throw new InvalidCheck("State data was provided but the provider is not configured to use state");return}let n={origin:t,random:generateRandomState()},i=await encode2({secret:e.jwt.secret,token:n,salt:encodedStateSalt,maxAge:STATE_MAX_AGE});return{cookie:await sealCookie("state",i,e),value:i}},use:useCookie("state","state"),async decode(e,t){try{t.logger.debug("DECODE_STATE",{state:e});let r=await decode2({secret:t.jwt.secret,token:e,salt:encodedStateSalt});if(r)return r;throw Error("Invalid state")}catch(e){throw new InvalidCheck("State could not be decoded",{cause:e})}}},nonce={async create(e){if(!e.provider.checks.includes("nonce"))return;let t=generateRandomNonce();return{cookie:await sealCookie("nonce",t,e),value:t}},use:useCookie("nonce","nonce")},WEBAUTHN_CHALLENGE_MAX_AGE=900,webauthnChallengeSalt="encodedWebauthnChallenge",webauthnChallenge={create:async(e,t,r)=>({cookie:await sealCookie("webauthnChallenge",await encode2({secret:e.jwt.secret,token:{challenge:t,registerData:r},salt:webauthnChallengeSalt,maxAge:WEBAUTHN_CHALLENGE_MAX_AGE}),e)}),async use(e,t,r){let n=t?.[e.cookies.webauthnChallenge.name],i=await parseCookie2("webauthnChallenge",n,e),a=await decode2({secret:e.jwt.secret,token:i,salt:webauthnChallengeSalt});if(clearCookie("webauthnChallenge",e,r),!a)throw new InvalidCheck("WebAuthn challenge was missing");return a}};function decodeJwt(e){let t,r;if("string"!=typeof e)throw new JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");let{1:n,length:i}=e.split(".");if(5===i)throw new JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(3!==i)throw new JWTInvalid("Invalid JWT");if(!n)throw new JWTInvalid("JWTs must contain a payload");try{t=decode(n)}catch{throw new JWTInvalid("Failed to base64url decode the payload")}try{r=JSON.parse(decoder.decode(t))}catch{throw new JWTInvalid("Failed to parse the decoded payload as JSON")}if(!isObject(r))throw new JWTInvalid("Invalid JWT Claims Set");return r}function formUrlEncode1(e){return encodeURIComponent(e).replace(/%20/g,"+")}function clientSecretBasic(e,t){let r=formUrlEncode1(e),n=formUrlEncode1(t),i=btoa(`${r}:${n}`);return`Basic ${i}`}async function handleOAuth(e,t,r){let n,i,a,{logger:o,provider:s}=r,{token:c,userinfo:u}=s;if(c?.url&&"authjs.dev"!==c.url.host||u?.url&&"authjs.dev"!==u.url.host)n={issuer:s.issuer??"https://authjs.dev",token_endpoint:c?.url.toString(),userinfo_endpoint:u?.url.toString()};else{let e=new URL(s.issuer),t=await discoveryRequest(e,{[allowInsecureRequests]:!0,[customFetch1]:s[customFetch]});if(!(n=await processDiscoveryResponse(e,t)).token_endpoint)throw TypeError("TODO: Authorization server did not provide a token endpoint.");if(!n.userinfo_endpoint)throw TypeError("TODO: Authorization server did not provide a userinfo endpoint.")}let l={client_id:s.clientId,...s.client};switch(l.token_endpoint_auth_method){case void 0:case"client_secret_basic":i=(e,t,r,n)=>{n.set("authorization",clientSecretBasic(s.clientId,s.clientSecret))};break;case"client_secret_post":i=ClientSecretPost(s.clientSecret);break;case"client_secret_jwt":i=ClientSecretJwt(s.clientSecret);break;case"private_key_jwt":i=PrivateKeyJwt(s.token.clientPrivateKey,{[modifyAssertion](e,t){t.aud=[n.issuer,n.token_endpoint]}});break;case"none":i=None();break;default:throw Error("unsupported client authentication method")}let d=[],p=await state.use(t,d,r);try{a=validateAuthResponse(n,l,new URLSearchParams(e),s.checks.includes("state")?p:skipStateCheck)}catch(e){if(e instanceof AuthorizationResponseError){let t={providerId:s.id,...Object.fromEntries(e.cause.entries())};throw o.debug("OAuthCallbackError",t),new OAuthCallbackError("OAuth Provider returned an error",t)}throw e}let h=await pkce.use(t,d,r),f=s.callbackUrl;!r.isOnRedirectProxy&&s.redirectProxyUrl&&(f=s.redirectProxyUrl);let m=await authorizationCodeGrantRequest(n,l,i,a,f,h??"decoy",{[allowInsecureRequests]:!0,[customFetch1]:(...e)=>(s.checks.includes("pkce")||e[1].body.delete("code_verifier"),(s[customFetch]??fetch)(...e))});s.token?.conform&&(m=await s.token.conform(m.clone())??m);let g={},y=isOIDCProvider(s);if(s[conformInternal])switch(s.id){case"microsoft-entra-id":case"azure-ad":{let e=await m.clone().json();if(e.error){let t={providerId:s.id,...e};throw new OAuthCallbackError(`OAuth Provider returned an error: ${e.error}`,t)}let{tid:t}=decodeJwt(e.id_token);if("string"==typeof t){let e=/microsoftonline\.com\/(\w+)\/v2\.0/,r=n.issuer?.match(e)?.[1]??"common",i=new URL(n.issuer.replace(r,t)),a=await discoveryRequest(i,{[customFetch1]:s[customFetch]});n=await processDiscoveryResponse(i,a)}}}let b=await processAuthorizationCodeResponse(n,l,m,{expectedNonce:await nonce.use(t,d,r),requireIdToken:y}),w=b;if(y){let t=getValidatedIdTokenClaims(b);if(g=t,s[conformInternal]&&"apple"===s.id)try{g.user=JSON.parse(e?.user)}catch{}if(!1===s.idToken){let e=await userInfoRequest(n,l,b.access_token,{[customFetch1]:s[customFetch],[allowInsecureRequests]:!0});g=await processUserInfoResponse(n,l,t.sub,e)}}else if(u?.request){let e=await u.request({tokens:w,provider:s});e instanceof Object&&(g=e)}else if(u?.url){let e=await userInfoRequest(n,l,b.access_token,{[customFetch1]:s[customFetch],[allowInsecureRequests]:!0});g=await e.json()}else throw TypeError("No userinfo endpoint configured");return w.expires_in&&(w.expires_at=Math.floor(Date.now()/1e3)+Number(w.expires_in)),{...await getUserAndAccount(g,s,w,o),profile:g,cookies:d}}async function getUserAndAccount(e,t,r,n){try{let n=await t.profile(e,r);return{user:{...n,id:crypto.randomUUID(),email:n.email?.toLowerCase()},account:{...r,provider:t.id,type:t.type,providerAccountId:n.id??crypto.randomUUID()}}}catch(r){n.debug("getProfile error details",e),n.error(new OAuthProfileParseError(r,{provider:t.id}))}}function inferWebAuthnOptions(e,t,r){let{user:n,exists:i=!1}=r??{};switch(e){case"authenticate":return"authenticate";case"register":if(n&&t===i)return"register";break;case void 0:if(!t)if(!n)return"authenticate";else if(i)return"authenticate";else return"register"}return null}async function getRegistrationResponse(e,t,r,n){let i=await getRegistrationOptions(e,t,r),{cookie:a}=await webauthnChallenge.create(e,i.challenge,r);return{status:200,cookies:[...n??[],a],body:{action:"register",options:i},headers:{"Content-Type":"application/json"}}}async function getAuthenticationResponse(e,t,r,n){let i=await getAuthenticationOptions(e,t,r),{cookie:a}=await webauthnChallenge.create(e,i.challenge);return{status:200,cookies:[...n??[],a],body:{action:"authenticate",options:i},headers:{"Content-Type":"application/json"}}}async function verifyAuthenticate(e,t,r){let n,{adapter:i,provider:a}=e,o=t.body&&"string"==typeof t.body.data?JSON.parse(t.body.data):void 0;if(!o||"object"!=typeof o||!("id"in o)||"string"!=typeof o.id)throw new AuthError("Invalid WebAuthn Authentication response");let s=toBase64(fromBase64(o.id)),c=await i.getAuthenticator(s);if(!c)throw new AuthError(`WebAuthn authenticator not found in database: ${JSON.stringify({credentialID:s})}`);let{challenge:u}=await webauthnChallenge.use(e,t.cookies,r);try{let r=a.getRelayingParty(e,t);n=await a.simpleWebAuthn.verifyAuthenticationResponse({...a.verifyAuthenticationOptions,expectedChallenge:u,response:o,authenticator:fromAdapterAuthenticator(c),expectedOrigin:r.origin,expectedRPID:r.id})}catch(e){throw new WebAuthnVerificationError(e)}let{verified:l,authenticationInfo:d}=n;if(!l)throw new WebAuthnVerificationError("WebAuthn authentication response could not be verified");try{let{newCounter:e}=d;await i.updateAuthenticatorCounter(c.credentialID,e)}catch(e){throw new AdapterError(`Failed to update authenticator counter. This may cause future authentication attempts to fail. ${JSON.stringify({credentialID:s,oldCounter:c.counter,newCounter:d.newCounter})}`,e)}let p=await i.getAccount(c.providerAccountId,a.id);if(!p)throw new AuthError(`WebAuthn account not found in database: ${JSON.stringify({credentialID:s,providerAccountId:c.providerAccountId})}`);let h=await i.getUser(p.userId);if(!h)throw new AuthError(`WebAuthn user not found in database: ${JSON.stringify({credentialID:s,providerAccountId:c.providerAccountId,userID:p.userId})}`);return{account:p,user:h}}async function verifyRegister(e,t,r){let n,{provider:i}=e,a=t.body&&"string"==typeof t.body.data?JSON.parse(t.body.data):void 0;if(!a||"object"!=typeof a||!("id"in a)||"string"!=typeof a.id)throw new AuthError("Invalid WebAuthn Registration response");let{challenge:o,registerData:s}=await webauthnChallenge.use(e,t.cookies,r);if(!s)throw new AuthError("Missing user registration data in WebAuthn challenge cookie");try{let r=i.getRelayingParty(e,t);n=await i.simpleWebAuthn.verifyRegistrationResponse({...i.verifyRegistrationOptions,expectedChallenge:o,response:a,expectedOrigin:r.origin,expectedRPID:r.id})}catch(e){throw new WebAuthnVerificationError(e)}if(!n.verified||!n.registrationInfo)throw new WebAuthnVerificationError("WebAuthn registration response could not be verified");let c={providerAccountId:toBase64(n.registrationInfo.credentialID),provider:e.provider.id,type:i.type},u={providerAccountId:c.providerAccountId,counter:n.registrationInfo.counter,credentialID:toBase64(n.registrationInfo.credentialID),credentialPublicKey:toBase64(n.registrationInfo.credentialPublicKey),credentialBackedUp:n.registrationInfo.credentialBackedUp,credentialDeviceType:n.registrationInfo.credentialDeviceType,transports:transportsToString(a.response.transports)};return{user:s,account:c,authenticator:u}}async function getAuthenticationOptions(e,t,r){let{provider:n,adapter:i}=e,a=r&&r.id?await i.listAuthenticatorsByUserId(r.id):null,o=n.getRelayingParty(e,t);return await n.simpleWebAuthn.generateAuthenticationOptions({...n.authenticationOptions,rpID:o.id,allowCredentials:a?.map(e=>({id:fromBase64(e.credentialID),type:"public-key",transports:stringToTransports(e.transports)}))})}async function getRegistrationOptions(e,t,r){let{provider:n,adapter:i}=e,a=r.id?await i.listAuthenticatorsByUserId(r.id):null,o=randomString(32),s=n.getRelayingParty(e,t);return await n.simpleWebAuthn.generateRegistrationOptions({...n.registrationOptions,userID:o,userName:r.email,userDisplayName:r.name??void 0,rpID:s.id,rpName:s.name,excludeCredentials:a?.map(e=>({id:fromBase64(e.credentialID),type:"public-key",transports:stringToTransports(e.transports)}))})}function assertInternalOptionsWebAuthn(e){let{provider:t,adapter:r}=e;if(!r)throw new MissingAdapter("An adapter is required for the WebAuthn provider");if(!t||"webauthn"!==t.type)throw new InvalidProvider("Provider must be WebAuthn");return{...e,provider:t,adapter:r}}function fromAdapterAuthenticator(e){return{...e,credentialDeviceType:e.credentialDeviceType,transports:stringToTransports(e.transports),credentialID:fromBase64(e.credentialID),credentialPublicKey:fromBase64(e.credentialPublicKey)}}function fromBase64(e){return new Uint8Array(Buffer.from(e,"base64"))}function toBase64(e){return Buffer.from(e).toString("base64")}function transportsToString(e){return e?.join(",")}function stringToTransports(e){return e?e.split(","):void 0}async function callback(e,t,r,n){if(!t.provider)throw new InvalidProvider("Callback route called without provider");let{query:i,body:a,method:o,headers:s}=e,{provider:c,adapter:u,url:l,callbackUrl:d,pages:p,jwt:h,events:f,callbacks:m,session:{strategy:g,maxAge:y},logger:b}=t,w="jwt"===g;try{if("oauth"===c.type||"oidc"===c.type){let o,s=c.authorization?.url.searchParams.get("response_mode")==="form_post"?a:i;if(t.isOnRedirectProxy&&s?.state){let e=await state.decode(s.state,t);if(e?.origin&&new URL(e.origin).origin!==t.url.origin){let t=`${e.origin}?${new URLSearchParams(s)}`;return b.debug("Proxy redirecting to",t),{redirect:t,cookies:n}}}let g=await handleOAuth(s,e.cookies,t);g.cookies.length&&n.push(...g.cookies),b.debug("authorization result",g);let{user:_,account:v,profile:E}=g;if(!_||!v||!E)return{redirect:`${l}/signin`,cookies:n};if(u){let{getUserByAccount:e}=u;o=await e({providerAccountId:v.providerAccountId,provider:c.id})}let S=await handleAuthorized({user:o??_,account:v,profile:E},t);if(S)return{redirect:S,cookies:n};let{user:R,session:x,isNewUser:P}=await handleLoginOrRegister(r.value,_,v,t);if(w){let e={name:R.name,email:R.email,picture:R.image,sub:R.id?.toString()},i=await m.jwt({token:e,user:R,account:v,profile:E,isNewUser:P,trigger:P?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,a=await h.encode({...h,token:i,salt:e}),o=new Date;o.setTime(o.getTime()+1e3*y);let s=r.chunk(a,{expires:o});n.push(...s)}}else n.push({name:t.cookies.sessionToken.name,value:x.sessionToken,options:{...t.cookies.sessionToken.options,expires:x.expires}});if(await f.signIn?.({user:R,account:v,profile:E,isNewUser:P}),P&&p.newUser)return{redirect:`${p.newUser}${p.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:d})}`,cookies:n};return{redirect:d,cookies:n}}if("email"===c.type){let e=i?.token,a=i?.email;if(!e){let t=TypeError("Missing token. The sign-in URL was manually opened without token or the link was not sent correctly in the email.",{cause:{hasToken:!!e}});throw t.name="Configuration",t}let o=c.secret??t.secret,s=await u.useVerificationToken({identifier:a,token:await createHash(`${e}${o}`)}),l=!!s,g=l&&s.expires.valueOf()<Date.now();if(!l||g||a&&s.identifier!==a)throw new Verification({hasInvite:l,expired:g});let{identifier:b}=s,_=await u.getUserByEmail(b)??{id:crypto.randomUUID(),email:b,emailVerified:null},v={providerAccountId:_.email,userId:_.id,type:"email",provider:c.id},E=await handleAuthorized({user:_,account:v},t);if(E)return{redirect:E,cookies:n};let{user:S,session:R,isNewUser:x}=await handleLoginOrRegister(r.value,_,v,t);if(w){let e={name:S.name,email:S.email,picture:S.image,sub:S.id?.toString()},i=await m.jwt({token:e,user:S,account:v,isNewUser:x,trigger:x?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,a=await h.encode({...h,token:i,salt:e}),o=new Date;o.setTime(o.getTime()+1e3*y);let s=r.chunk(a,{expires:o});n.push(...s)}}else n.push({name:t.cookies.sessionToken.name,value:R.sessionToken,options:{...t.cookies.sessionToken.options,expires:R.expires}});if(await f.signIn?.({user:S,account:v,isNewUser:x}),x&&p.newUser)return{redirect:`${p.newUser}${p.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:d})}`,cookies:n};return{redirect:d,cookies:n}}if("credentials"===c.type&&"POST"===o){let e=a??{};Object.entries(i??{}).forEach(([e,t])=>l.searchParams.set(e,t));let u=await c.authorize(e,new Request(l,{headers:s,method:o,body:JSON.stringify(a)}));if(u)u.id=u.id?.toString()??crypto.randomUUID();else throw new CredentialsSignin;let p={providerAccountId:u.id,type:"credentials",provider:c.id},g=await handleAuthorized({user:u,account:p,credentials:e},t);if(g)return{redirect:g,cookies:n};let b={name:u.name,email:u.email,picture:u.image,sub:u.id},w=await m.jwt({token:b,user:u,account:p,isNewUser:!1,trigger:"signIn"});if(null===w)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,i=await h.encode({...h,token:w,salt:e}),a=new Date;a.setTime(a.getTime()+1e3*y);let o=r.chunk(i,{expires:a});n.push(...o)}return await f.signIn?.({user:u,account:p}),{redirect:d,cookies:n}}else if("webauthn"===c.type&&"POST"===o){let i,a,o,s=e.body?.action;if("string"!=typeof s||"authenticate"!==s&&"register"!==s)throw new AuthError("Invalid action parameter");let c=assertInternalOptionsWebAuthn(t);switch(s){case"authenticate":{let t=await verifyAuthenticate(c,e,n);i=t.user,a=t.account;break}case"register":{let r=await verifyRegister(t,e,n);i=r.user,a=r.account,o=r.authenticator}}await handleAuthorized({user:i,account:a},t);let{user:u,isNewUser:l,session:g,account:b}=await handleLoginOrRegister(r.value,i,a,t);if(!b)throw new AuthError("Error creating or finding account");if(o&&u.id&&await c.adapter.createAuthenticator({...o,userId:u.id}),w){let e={name:u.name,email:u.email,picture:u.image,sub:u.id?.toString()},i=await m.jwt({token:e,user:u,account:b,isNewUser:l,trigger:l?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,a=await h.encode({...h,token:i,salt:e}),o=new Date;o.setTime(o.getTime()+1e3*y);let s=r.chunk(a,{expires:o});n.push(...s)}}else n.push({name:t.cookies.sessionToken.name,value:g.sessionToken,options:{...t.cookies.sessionToken.options,expires:g.expires}});if(await f.signIn?.({user:u,account:b,isNewUser:l}),l&&p.newUser)return{redirect:`${p.newUser}${p.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:d})}`,cookies:n};return{redirect:d,cookies:n}}throw new InvalidProvider(`Callback for provider type (${c.type}) is not supported`)}catch(t){if(t instanceof AuthError)throw t;let e=new CallbackRouteError(t,{provider:c.id});throw b.debug("callback route error details",{method:o,query:i,body:a}),e}}async function handleAuthorized(e,t){let r,{signIn:n,redirect:i}=t.callbacks;try{r=await n(e)}catch(e){if(e instanceof AuthError)throw e;throw new AccessDenied(e)}if(!r)throw new AccessDenied("AccessDenied");if("string"==typeof r)return await i({url:r,baseUrl:t.url.origin})}async function session(e,t,r,n,i){let{adapter:a,jwt:o,events:s,callbacks:c,logger:u,session:{strategy:l,maxAge:d}}=e,p={body:null,headers:{"Content-Type":"application/json",...!n&&{"Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"}},cookies:r},h=t.value;if(!h)return p;if("jwt"===l){try{let r=e.cookies.sessionToken.name,a=await o.decode({...o,token:h,salt:r});if(!a)throw Error("Invalid JWT");let u=await c.jwt({token:a,...n&&{trigger:"update"},session:i}),l=fromDate(d);if(null!==u){let e={user:{name:u.name,email:u.email,image:u.picture},expires:l.toISOString()},n=await c.session({session:e,token:u});p.body=n;let i=await o.encode({...o,token:u,salt:r}),a=t.chunk(i,{expires:l});p.cookies?.push(...a),await s.session?.({session:n,token:u})}else p.cookies?.push(...t.clean())}catch(e){u.error(new JWTSessionError(e)),p.cookies?.push(...t.clean())}return p}try{let{getSessionAndUser:r,deleteSession:o,updateSession:u}=a,l=await r(h);if(l&&l.session.expires.valueOf()<Date.now()&&(await o(h),l=null),l){let{user:t,session:r}=l,a=e.session.updateAge,o=r.expires.valueOf()-1e3*d+1e3*a,f=fromDate(d);o<=Date.now()&&await u({sessionToken:h,expires:f});let m=await c.session({session:{...r,user:t},user:t,newSession:i,...n?{trigger:"update"}:{}});p.body=m,p.cookies?.push({name:e.cookies.sessionToken.name,value:h,options:{...e.cookies.sessionToken.options,expires:f}}),await s.session?.({session:m})}else h&&p.cookies?.push(...t.clean())}catch(e){u.error(new SessionTokenError(e))}return p}async function getAuthorizationUrl(e,t){let r,n,{logger:i,provider:a}=t,o=a.authorization?.url;if(!o||"authjs.dev"===o.host){let e=new URL(a.issuer),t=await discoveryRequest(e,{[customFetch1]:a[customFetch],[allowInsecureRequests]:!0}),r=await processDiscoveryResponse(e,t).catch(t=>{if(!(t instanceof TypeError)||"Invalid URL"!==t.message)throw t;throw TypeError(`Discovery request responded with an invalid issuer. expected: ${e}`)});if(!r.authorization_endpoint)throw TypeError("Authorization server did not provide an authorization endpoint.");o=new URL(r.authorization_endpoint)}let s=o.searchParams,c=a.callbackUrl;!t.isOnRedirectProxy&&a.redirectProxyUrl&&(c=a.redirectProxyUrl,n=a.callbackUrl,i.debug("using redirect proxy",{redirect_uri:c,data:n}));let u=Object.assign({response_type:"code",client_id:a.clientId,redirect_uri:c,...a.authorization?.params},Object.fromEntries(a.authorization?.url.searchParams??[]),e);for(let e in u)s.set(e,u[e]);let l=[];a.authorization?.url.searchParams.get("response_mode")==="form_post"&&(t.cookies.state.options.sameSite="none",t.cookies.state.options.secure=!0,t.cookies.nonce.options.sameSite="none",t.cookies.nonce.options.secure=!0);let d=await state.create(t,n);if(d&&(s.set("state",d.value),l.push(d.cookie)),a.checks?.includes("pkce"))if(r&&!r.code_challenge_methods_supported?.includes("S256"))"oidc"===a.type&&(a.checks=["nonce"]);else{let{value:e,cookie:r}=await pkce.create(t);s.set("code_challenge",e),s.set("code_challenge_method","S256"),l.push(r)}let p=await nonce.create(t);return p&&(s.set("nonce",p.value),l.push(p.cookie)),"oidc"!==a.type||o.searchParams.has("scope")||o.searchParams.set("scope","openid profile email"),i.debug("authorization url is ready",{url:o,cookies:l,provider:a}),{redirect:o.toString(),cookies:l}}async function sendToken(e,t){let r,{body:n}=e,{provider:i,callbacks:a,adapter:o}=t,s=(i.normalizeIdentifier??defaultNormalizer)(n?.email),c={id:crypto.randomUUID(),email:s,emailVerified:null},u=await o.getUserByEmail(s)??c,l={providerAccountId:s,userId:u.id,type:"email",provider:i.id};try{r=await a.signIn({user:u,account:l,email:{verificationRequest:!0}})}catch(e){throw new AccessDenied(e)}if(!r)throw new AccessDenied("AccessDenied");if("string"==typeof r)return{redirect:await a.redirect({url:r,baseUrl:t.url.origin})};let{callbackUrl:d,theme:p}=t,h=await i.generateVerificationToken?.()??randomString(32),f=86400,m=new Date(Date.now()+(i.maxAge??f)*1e3),g=i.secret??t.secret,y=new URL(t.basePath,t.url.origin),b=i.sendVerificationRequest({identifier:s,token:h,expires:m,url:`${y}/callback/${i.id}?${new URLSearchParams({callbackUrl:d,token:h,email:s})}`,provider:i,theme:p,request:toRequest(e)}),w=o.createVerificationToken?.({identifier:s,token:await createHash(`${h}${g}`),expires:m});return await Promise.all([b,w]),{redirect:`${y}/verify-request?${new URLSearchParams({provider:i.id,type:i.type})}`}}function defaultNormalizer(e){if(!e)throw Error("Missing email from request body.");let[t,r]=e.toLowerCase().trim().split("@");return r=r.split(",")[0],`${t}@${r}`}async function signIn(e,t,r){let n=`${r.url.origin}${r.basePath}/signin`;if(!r.provider)return{redirect:n,cookies:t};switch(r.provider.type){case"oauth":case"oidc":{let{redirect:n,cookies:i}=await getAuthorizationUrl(e.query,r);return i&&t.push(...i),{redirect:n,cookies:t}}case"email":return{...await sendToken(e,r),cookies:t};default:return{redirect:n,cookies:t}}}async function signOut(e,t,r){let{jwt:n,events:i,callbackUrl:a,logger:o,session:s}=r,c=t.value;if(!c)return{redirect:a,cookies:e};try{if("jwt"===s.strategy){let e=r.cookies.sessionToken.name,t=await n.decode({...n,token:c,salt:e});await i.signOut?.({token:t})}else{let e=await r.adapter?.deleteSession(c);await i.signOut?.({session:e})}}catch(e){o.error(new SignOutError(e))}return e.push(...t.clean()),{redirect:a,cookies:e}}async function getLoggedInUser(e,t){let{adapter:r,jwt:n,session:{strategy:i}}=e,a=t.value;if(!a)return null;if("jwt"===i){let t=e.cookies.sessionToken.name,r=await n.decode({...n,token:a,salt:t});if(r&&r.sub)return{id:r.sub,name:r.name,email:r.email,image:r.picture}}else{let e=await r?.getSessionAndUser(a);if(e)return e.user}return null}async function webAuthnOptions(e,t,r,n){let i=assertInternalOptionsWebAuthn(t),{provider:a}=i,{action:o}=e.query??{};if("register"!==o&&"authenticate"!==o&&void 0!==o)return{status:400,body:{error:"Invalid action"},cookies:n,headers:{"Content-Type":"application/json"}};let s=await getLoggedInUser(t,r),c=s?{user:s,exists:!0}:await a.getUserInfo(t,e),u=c?.user;switch(inferWebAuthnOptions(o,!!s,c)){case"authenticate":return getAuthenticationResponse(i,e,u,n);case"register":if("string"==typeof u?.email)return getRegistrationResponse(i,e,u,n);break;default:return{status:400,body:{error:"Invalid request"},cookies:n,headers:{"Content-Type":"application/json"}}}}async function AuthInternal(e,t){let{action:r,providerId:n,error:i,method:a}=e,o=t.skipCSRFCheck===skipCSRFCheck,{options:s,cookies:c}=await init({authOptions:t,action:r,providerId:n,url:e.url,callbackUrl:e.body?.callbackUrl??e.query?.callbackUrl,csrfToken:e.body?.csrfToken,cookies:e.cookies,isPost:"POST"===a,csrfDisabled:o}),u=new SessionStore(s.cookies.sessionToken,e.cookies,s.logger);if("GET"===a){let t=renderPage({...s,query:e.query,cookies:c});switch(r){case"callback":return await callback(e,s,u,c);case"csrf":return t.csrf(o,s,c);case"error":return t.error(i);case"providers":return t.providers(s.providers);case"session":return await session(s,u,c);case"signin":return t.signin(n,i);case"signout":return t.signout();case"verify-request":return t.verifyRequest();case"webauthn-options":return await webAuthnOptions(e,s,u,c)}}else{let{csrfTokenVerified:t}=s;switch(r){case"callback":return"credentials"===s.provider.type&&validateCSRF(r,t),await callback(e,s,u,c);case"session":return validateCSRF(r,t),await session(s,u,c,!0,e.body?.data);case"signin":return validateCSRF(r,t),await signIn(e,c,s);case"signout":return validateCSRF(r,t),await signOut(c,u,s)}}throw new UnknownAction(`Cannot handle action: ${r}`)}function setEnvDefaults(e,t,r=!1){try{let n=e.AUTH_URL;n&&(t.basePath?r||setLogger(t).warn("env-url-basepath-redundant"):t.basePath=new URL(n).pathname)}catch{}finally{t.basePath??(t.basePath="/auth")}if(!t.secret?.length){t.secret=[];let r=e.AUTH_SECRET;for(let n of(r&&t.secret.push(r),[1,2,3])){let r=e[`AUTH_SECRET_${n}`];r&&t.secret.unshift(r)}}t.redirectProxyUrl??(t.redirectProxyUrl=e.AUTH_REDIRECT_PROXY_URL),t.trustHost??(t.trustHost=!!(e.AUTH_URL??e.AUTH_TRUST_HOST??e.VERCEL??e.CF_PAGES??"production"!==e.NODE_ENV)),t.providers=t.providers.map(t=>{let{id:r}="function"==typeof t?t({}):t,n=r.toUpperCase().replace(/-/g,"_"),i=e[`AUTH_${n}_ID`],a=e[`AUTH_${n}_SECRET`],o=e[`AUTH_${n}_ISSUER`],s=e[`AUTH_${n}_KEY`],c="function"==typeof t?t({clientId:i,clientSecret:a,issuer:o,apiKey:s}):t;return"oauth"===c.type||"oidc"===c.type?(c.clientId??(c.clientId=i),c.clientSecret??(c.clientSecret=a),c.issuer??(c.issuer=o)):"email"===c.type&&(c.apiKey??(c.apiKey=s)),c})}function createActionURL(e,t,r,n,i){let a,o=i?.basePath,s=n.AUTH_URL??n.NEXTAUTH_URL;if(s)a=new URL(s),o&&"/"!==o&&"/"!==a.pathname&&(a.pathname!==o&&setLogger(i).warn("env-url-basepath-mismatch"),a.pathname="/");else{let e=r.get("x-forwarded-host")??r.get("host"),n=r.get("x-forwarded-proto")??t??"https",i=n.endsWith(":")?n:n+":";a=new URL(`${i}//${e}`)}let c=a.toString().replace(/\/$/,"");if(o){let t=o?.replace(/(^\/|\/$)/g,"")??"";return new URL(`${c}/${t}/${e}`)}return new URL(`${c}/${e}`)}async function Auth(e,t){let r=setLogger(t),n=await toInternalRequest(e,t);if(!n)return Response.json("Bad request.",{status:400});let i=assertConfig(n,t);if(Array.isArray(i))i.forEach(r.warn);else if(i){if(r.error(i),!new Set(["signin","signout","error","verify-request"]).has(n.action)||"GET"!==n.method){let e="There was a problem with the server configuration. Check the server logs for more information.";return Response.json({message:e},{status:500})}let{pages:e,theme:a}=t,o=e?.error&&n.url.searchParams.get("callbackUrl")?.startsWith(e.error);if(!e?.error||o)return o&&r.error(new ErrorPageLoop(`The error page ${e?.error} should not require authentication`)),toResponse(renderPage({theme:a}).error("Configuration"));let s=`${n.url.origin}${e.error}?error=Configuration`;return Response.redirect(s)}let a=e.headers?.has("X-Auth-Return-Redirect"),o=t.raw===raw;try{let e=await AuthInternal(n,t);if(o)return e;let r=toResponse(e),i=r.headers.get("Location");if(!a||!i)return r;return Response.json({url:i},{headers:r.headers})}catch(p){let i=p;r.error(i);let s=i instanceof AuthError;if(s&&o&&!a)throw i;if("POST"===e.method&&"session"===n.action)return Response.json(null,{status:400});let c=new URLSearchParams({error:isClientError(i)?i.type:"Configuration"});i instanceof CredentialsSignin&&c.set("code",i.code);let u=s&&i.kind||"error",l=t.pages?.[u]??`${t.basePath}/${u.toLowerCase()}`,d=`${n.url.origin}${l}?${c}`;if(a)return Response.json({url:d});return Response.redirect(d)}}var __TURBOPACK__imported__module__55207__1=__TURBOPACK__imported__module__55207__;function reqWithEnvURL(e){let t=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!t)return e;let{origin:r}=new URL(t),{href:n,origin:i}=e.nextUrl;return new __TURBOPACK__imported__module__55207__1.NextRequest(n.replace(i,r),e)}function setEnvDefaults1(e){try{e.secret??(e.secret=process.env.AUTH_SECRET??process.env.NEXTAUTH_SECRET);let t=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!t)return;let{pathname:r}=new URL(t);if("/"===r)return;e.basePath||(e.basePath=r)}catch{}finally{e.basePath||(e.basePath="/api/auth"),setEnvDefaults(process.env,e,!0)}}var __TURBOPACK__imported__module__27180__=__turbopack_context__.i(27180),__TURBOPACK__imported__module__55207__2=__TURBOPACK__imported__module__55207__;async function getSession(e,t){return Auth(new Request(createActionURL("session",e.get("x-forwarded-proto"),e,process.env,t),{headers:{cookie:e.get("cookie")??""}}),{...t,callbacks:{...t.callbacks,async session(...e){let r=await t.callbacks?.session?.(...e)??{...e[0].session,expires:e[0].session.expires?.toISOString?.()??e[0].session.expires};return{user:e[0].user??e[0].token,...r}}}})}function isReqWrapper(e){return"function"==typeof e}function initAuth(e,t){return"function"==typeof e?async(...r)=>{if(!r.length){let r=await (0,__TURBOPACK__imported__module__27180__.headers)(),n=await e(void 0);return t?.(n),getSession(r,n).then(e=>e.json())}if(r[0]instanceof Request){let n=r[0],i=r[1],a=await e(n);return t?.(a),handleAuth([n,i],a)}if(isReqWrapper(r[0])){let n=r[0];return async(...r)=>{let i=await e(r[0]);return t?.(i),handleAuth(r,i,n)}}let n="req"in r[0]?r[0].req:r[0],i="res"in r[0]?r[0].res:r[1],a=await e(n);return t?.(a),getSession(new Headers(n.headers),a).then(async e=>{let t=await e.json();for(let t of e.headers.getSetCookie())"headers"in i?i.headers.append("set-cookie",t):i.appendHeader("set-cookie",t);return t})}:(...t)=>{if(!t.length)return Promise.resolve((0,__TURBOPACK__imported__module__27180__.headers)()).then(t=>getSession(t,e).then(e=>e.json()));if(t[0]instanceof Request)return handleAuth([t[0],t[1]],e);if(isReqWrapper(t[0])){let r=t[0];return async(...t)=>handleAuth(t,e,r).then(e=>e)}let r="req"in t[0]?t[0].req:t[0],n="res"in t[0]?t[0].res:t[1];return getSession(new Headers(r.headers),e).then(async e=>{let t=await e.json();for(let t of e.headers.getSetCookie())"headers"in n?n.headers.append("set-cookie",t):n.appendHeader("set-cookie",t);return t})}}async function handleAuth(e,t,r){let n=reqWithEnvURL(e[0]),i=await getSession(n.headers,t),a=await i.json(),o=!0;t.callbacks?.authorized&&(o=await t.callbacks.authorized({request:n,auth:a}));let s=__TURBOPACK__imported__module__55207__2.NextResponse.next?.();if(o instanceof Response){s=o;let e=o.headers.get("Location"),{pathname:r}=n.nextUrl;e&&isSameAuthAction(r,new URL(e).pathname,t)&&(o=!0)}else if(r){let t=n;t.auth=a,s=await r(t,e[1])??__TURBOPACK__imported__module__55207__2.NextResponse.next()}else if(!o){let e=t.pages?.signIn??`${t.basePath}/signin`;if(n.nextUrl.pathname!==e){let t=n.nextUrl.clone();t.pathname=e,t.searchParams.set("callbackUrl",n.nextUrl.href),s=__TURBOPACK__imported__module__55207__2.NextResponse.redirect(t)}}let c=new Response(s?.body,s);for(let e of i.headers.getSetCookie())c.headers.append("set-cookie",e);return c}function isSameAuthAction(e,t,r){let n=t.replace(`${e}/`,""),i=Object.values(r.pages??{});return(actions1.has(n)||i.includes(t))&&t===e}let actions1=new Set(["providers","session","csrf","signin","signout","callback","verify-request","error"]);var __TURBOPACK__imported__module__27180__1=__TURBOPACK__imported__module__27180__,__TURBOPACK__imported__module__2318__=__turbopack_context__.i(2318),__TURBOPACK__imported__module__2318__1=__TURBOPACK__imported__module__2318__;async function signIn1(e,t={},r,n){let i=new Headers(await (0,__TURBOPACK__imported__module__27180__1.headers)()),{redirect:a=!0,redirectTo:o,...s}=t instanceof FormData?Object.fromEntries(t):t,c=o?.toString()??i.get("Referer")??"/",u=createActionURL("signin",i.get("x-forwarded-proto"),i,process.env,n);if(!e)return u.searchParams.append("callbackUrl",c),a&&(0,__TURBOPACK__imported__module__2318__1.redirect)(u.toString()),u.toString();let l=`${u}/${e}?${new URLSearchParams(r)}`,d={};for(let t of n.providers){let{options:r,...n}="function"==typeof t?t():t,i=r?.id??n.id;if(i===e){d={id:i,type:r?.type??n.type};break}}if(!d.id){let e=`${u}?${new URLSearchParams({callbackUrl:c})}`;return a&&(0,__TURBOPACK__imported__module__2318__1.redirect)(e),e}"credentials"===d.type&&(l=l.replace("signin","callback")),i.set("Content-Type","application/x-www-form-urlencoded");let p=new Request(l,{method:"POST",headers:i,body:new URLSearchParams({...s,callbackUrl:c})}),h=await Auth(p,{...n,raw:raw,skipCSRFCheck:skipCSRFCheck}),f=await (0,__TURBOPACK__imported__module__27180__1.cookies)();for(let e of h?.cookies??[])f.set(e.name,e.value,e.options);let m=(h instanceof Response?h.headers.get("Location"):h.redirect)??l;return a?(0,__TURBOPACK__imported__module__2318__1.redirect)(m):m}async function signOut1(e,t){let r=new Headers(await (0,__TURBOPACK__imported__module__27180__1.headers)());r.set("Content-Type","application/x-www-form-urlencoded");let n=createActionURL("signout",r.get("x-forwarded-proto"),r,process.env,t),i=new URLSearchParams({callbackUrl:e?.redirectTo??r.get("Referer")??"/"}),a=new Request(n,{method:"POST",headers:r,body:i}),o=await Auth(a,{...t,raw:raw,skipCSRFCheck:skipCSRFCheck}),s=await (0,__TURBOPACK__imported__module__27180__1.cookies)();for(let e of o?.cookies??[])s.set(e.name,e.value,e.options);return e?.redirect??!0?(0,__TURBOPACK__imported__module__2318__1.redirect)(o.redirect):o}async function update(e,t){let r=new Headers(await (0,__TURBOPACK__imported__module__27180__1.headers)());r.set("Content-Type","application/json");let n=new Request(createActionURL("session",r.get("x-forwarded-proto"),r,process.env,t),{method:"POST",headers:r,body:JSON.stringify({data:e})}),i=await Auth(n,{...t,raw:raw,skipCSRFCheck:skipCSRFCheck}),a=await (0,__TURBOPACK__imported__module__27180__1.cookies)();for(let e of i?.cookies??[])a.set(e.name,e.value,e.options);return i.body}function NextAuth(e){if("function"==typeof e){let t=async t=>{let r=await e(t);return setEnvDefaults1(r),Auth(reqWithEnvURL(t),r)};return{handlers:{GET:t,POST:t},auth:initAuth(e,e=>setEnvDefaults1(e)),signIn:async(t,r,n)=>{let i=await e(void 0);return setEnvDefaults1(i),signIn1(t,r,n,i)},signOut:async t=>{let r=await e(void 0);return setEnvDefaults1(r),signOut1(t,r)},unstable_update:async t=>{let r=await e(void 0);return setEnvDefaults1(r),update(t,r)}}}setEnvDefaults1(e);let t=t=>Auth(reqWithEnvURL(t),e);return{handlers:{GET:t,POST:t},auth:initAuth(e),signIn:(t,r,n)=>signIn1(t,r,n,e),signOut:t=>signOut1(t,e),unstable_update:t=>update(t,e)}}function Credentials(e){return{id:"credentials",name:"Credentials",type:"credentials",credentials:{},authorize:()=>null,options:e}}var __TURBOPACK__imported__module__63021__=__turbopack_context__.i(63021);let prisma=globalThis.prisma??new __TURBOPACK__imported__module__63021__.PrismaClient,__TURBOPACK__default__export__4=prisma,attempts=new Map,WINDOW_MS=9e5,MAX_ATTEMPTS=5;function pruneExpiredEntries(e){for(let[t,r]of attempts.entries())r.resetAt<=e&&attempts.delete(t)}function registerLoginAttempt(e){let t=Date.now();pruneExpiredEntries(t);let r=attempts.get(e);return!r||r.resetAt<=t?(attempts.set(e,{count:1,resetAt:t+WINDOW_MS}),{allowed:!0,remaining:MAX_ATTEMPTS-1}):r.count>=MAX_ATTEMPTS?{allowed:!1,remaining:0}:(r.count+=1,attempts.set(e,r),{allowed:!0,remaining:MAX_ATTEMPTS-r.count})}function clearLoginAttempts(e){attempts.delete(e)}class InvalidCredentialsError extends CredentialsSignin{code="invalid_credentials"}class RateLimitedLoginError extends CredentialsSignin{code="rate_limited"}class DisabledAccountError extends CredentialsSignin{code="disabled"}function getClientAddress(e){let t=e.get("x-forwarded-for");return t?t.split(",")[0]?.trim()??"unknown":e.get("x-real-ip")??"unknown"}function getLoginRateLimitKey(e,t){return`${e}:${getClientAddress(t)}`}function buildSessionCookieName(){return"__Secure-authjs.session-token"}function loadArgon2(){return eval("require")("argon2")}let{handlers,auth,signIn:signIn2,signOut:signOut2}=NextAuth({adapter:PrismaAdapter(__TURBOPACK__default__export__4),pages:{signIn:"/login"},session:{strategy:"database"},trustHost:"true"===process.env.AUTH_TRUST_HOST,useSecureCookies:!0,cookies:{sessionToken:{name:buildSessionCookieName(),options:{httpOnly:!0,sameSite:"lax",path:"/",secure:!0}}},jwt:{async encode(e){if(!e.token?.sub)return encode2(e);let t=(0,__TURBOPACK__imported__module__54799__.randomUUID)(),r=new Date(Date.now()+(e.maxAge??2592e3)*1e3);return await __TURBOPACK__default__export__4.session.create({data:{sessionToken:t,userId:e.token.sub,expires:r}}),t},decode:decode2},providers:[Credentials({credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e,t){let r=String(e.email??"").trim().toLowerCase(),n=String(e.password??"");if(!r||!n)throw new InvalidCredentialsError;let i=getLoginRateLimitKey(r,t.headers);if(!registerLoginAttempt(i).allowed)throw new RateLimitedLoginError;let a=await __TURBOPACK__default__export__4.user.findUnique({where:{email:r},select:{id:!0,email:!0,name:!0,passwordHash:!0,role:!0,isActive:!0}});if(!a||!a.passwordHash)throw new InvalidCredentialsError;if(!a.isActive)throw new DisabledAccountError;let o=loadArgon2();if(!await o.verify(a.passwordHash,n))throw new InvalidCredentialsError;return clearLoginAttempts(i),{id:a.id,email:a.email,name:a.name,role:a.role}}})],callbacks:{async session({session:e,user:t}){let r=e;return r.user&&(r.user.id=t.id,r.user.role=t.role),r},async signIn({user:e}){if(!e.id)return!1;let t=await __TURBOPACK__default__export__4.user.findUnique({where:{id:e.id},select:{isActive:!0}});return!!t?.isActive}}}),roles=["techlinx_admin","techlinx_webdev","techlinx_marketing","client_admin","client_user"],roleLabels={};function isRole(e){return"string"==typeof e&&roles.includes(e)}function isTechlinxAdmin(e){return"techlinx_admin"===e}let SESSION_COOKIE_NAME="__Secure-authjs.session-token",proxy=auth(async e=>{let{pathname:t}=e.nextUrl;if("/login"===t||t.startsWith("/api/auth"))return __TURBOPACK__imported__module__55207__.NextResponse.next();if(!e.auth?.user?.id)return __TURBOPACK__imported__module__55207__.NextResponse.redirect(new URL("/login",e.url));let r=await __TURBOPACK__default__export__4.user.findUnique({where:{id:e.auth.user.id},select:{role:!0,isActive:!0}});if(!r||!r.isActive){await __TURBOPACK__default__export__4.session.deleteMany({where:{userId:e.auth.user.id}});let t=__TURBOPACK__imported__module__55207__.NextResponse.redirect(new URL("/login?error=disabled",e.url));return t.cookies.set(SESSION_COOKIE_NAME,"",{httpOnly:!0,sameSite:"lax",path:"/",secure:!0,maxAge:0}),t}return t.startsWith("/admin")&&!isTechlinxAdmin(r.role)?__TURBOPACK__imported__module__55207__.NextResponse.redirect(new URL("/dashboard",e.url)):__TURBOPACK__imported__module__55207__.NextResponse.next()}),config={matcher:["/((?!api|_next/static|_next/image|favicon.ico|.*\\..*).*)"]};__turbopack_context__.s(["config",0,config,"proxy",0,proxy],94824);var __TURBOPACK__imported__module__94824__=__turbopack_context__.i(94824);let HTTPAccessErrorStatus={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},ALLOWED_CODES=new Set(Object.values(HTTPAccessErrorStatus)),HTTP_ERROR_FALLBACK_ERROR_CODE="NEXT_HTTP_ERROR_FALLBACK";function isHTTPAccessFallbackError(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return t===HTTP_ERROR_FALLBACK_ERROR_CODE&&ALLOWED_CODES.has(Number(r))}function getAccessFallbackHTTPStatus(e){return Number(e.digest.split(";")[1])}function getAccessFallbackErrorTypeByStatus(e){switch(e){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}var RedirectStatusCode=function(e){return e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e}({});let REDIRECT_ERROR_CODE="NEXT_REDIRECT";var RedirectType=function(e){return e.push="push",e.replace="replace",e}({});function isRedirectError(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,n]=t,i=t.slice(2,-2).join(";"),a=Number(t.at(-2));return r===REDIRECT_ERROR_CODE&&("replace"===n||"push"===n)&&"string"==typeof i&&!isNaN(a)&&a in RedirectStatusCode}function isNextRouterError(e){return isRedirectError(e)||isHTTPAccessFallbackError(e)}let mod={...__TURBOPACK__imported__module__94824__},page="/proxy",isProxy="/proxy"===page||"/src/proxy"===page,handlerUserland=mod.proxy||mod.default;class ProxyMissingExportError extends Error{constructor(e){super(e),this.stack=""}}if("function"!=typeof handlerUserland)throw new ProxyMissingExportError(`The Proxy file "${page}" must export a function named \`proxy\` or a default function.`);function errorHandledHandler(e){return async(...t)=>{try{return await e(...t)}catch(i){let e=t[0],r=new URL(e.url),n=r.pathname+r.search;throw await edgeInstrumentationOnRequestError(i,{path:n,method:e.method,headers:Object.fromEntries(e.headers.entries())},{routerKind:"Pages Router",routePath:"/proxy",routeType:"proxy",revalidateReason:void 0}),i}}}let handler=e=>adapter({...e,page,handler:errorHandledHandler(handlerUserland)}),__TURBOPACK__default__export__5=handler;__turbopack_context__.s(["default",0,__TURBOPACK__default__export__5],62395)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__33364876._.js.map